<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.youran.generate.dao.MetaIndexFieldDAO">

    <insert id="saveBatch">
        insert into meta_index_field (
        indexId, fieldId, orderNo)
        values
        <foreach collection="fieldIdList" index="index" item="fieldId" separator=",">
            (#{indexId},#{fieldId},#{index})
        </foreach>
    </insert>

    <delete id="delete">
        delete from meta_index_field
        where indexId = #{indexId,jdbcType=INTEGER}
    </delete>

    <delete id="remove">
        delete from meta_index_field
        where indexId = #{indexId,jdbcType=INTEGER}
        and fieldId in
        <foreach collection="fieldIdList" open="(" close=")" item="fieldId" separator=",">
            #{fieldId}
        </foreach>
    </delete>

    <select id="findByIndexId"  parameterType="java.lang.Integer"  resultType="MetaFieldListVO">
        select t.*
        from meta_field t
            inner join meta_index_field r on t.fieldId=r.fieldId
        where  t.delSign=0
            and r.indexId = #{arg0,jdbcType=INTEGER}
        order by r.orderNo
    </select>

    <select id="findIdsByIndexId" resultType="java.lang.Integer">
        select t.fieldId
        from meta_field t
            inner join meta_index_field r on t.fieldId=r.fieldId
        where  t.delSign=0
               and r.indexId = #{arg0,jdbcType=INTEGER}
        order by r.orderNo
    </select>
</mapper>
