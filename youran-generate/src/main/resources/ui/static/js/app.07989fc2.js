(function(e){function t(t){for(var n,i,l=t[0],s=t[1],c=t[2],d=0,m=[];d<l.length;d++)i=l[d],o[i]&&m.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,l=1;l<r.length;l++){var s=r[l];0!==o[s]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={app:0},a=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/ui/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"03bf":function(e,t,r){"use strict";var n=r("6f6a"),o=r.n(n);o.a},"0540":function(e,t,r){"use strict";var n=r("9851"),o=r.n(n);o.a},"115d":function(e,t,r){},"1a83":function(e,t,r){"use strict";var n=r("d5b3"),o=r.n(n);o.a},2043:function(e,t,r){"use strict";var n=r("5d67"),o=r.n(n);o.a},2276:function(e,t,r){},2925:function(e,t,r){"use strict";var n=r("2276"),o=r.n(n);o.a},"2ab6":function(e,t,r){},"2fcc":function(e,t,r){},3013:function(e,t,r){},"3ec6":function(e,t,r){},"3fda":function(e,t,r){"use strict";var n=r("eb47"),o=r.n(n);o.a},"4eba":function(e,t,r){"use strict";var n=r("ac24"),o=r.n(n);o.a},5036:function(e,t,r){"use strict";var n=r("2ab6"),o=r.n(n);o.a},5235:function(e,t,r){"use strict";var n=r("96a0"),o=r.n(n);o.a},"524a":function(e,t,r){"use strict";var n=r("3013"),o=r.n(n);o.a},"54f1":function(e,t,r){"use strict";var n=r("624f"),o=r.n(n);o.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),o=r("5c96"),a=r.n(o),i=(r("0fae"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"wrapper"},[r("el-header",{staticStyle:{"background-color":"#409EFF"},attrs:{height:"80px"}},[r("div",{staticClass:"header-logo-wrapper"},[r("svg",{staticClass:"header-logo",attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 32 32","xml:space":"preserve"}},[r("g",[r("path",{attrs:{d:"M29.3,7.5L16.7,0.2c-0.4-0.3-1-0.3-1.4,0L2.7,7.5C2.2,7.7,2,8.2,2,8.7v14.6c0,0.5,0.3,1,0.7,1.2l12.6,7.3\n          c0.2,0.1,0.5,0.2,0.7,0.2c0.2,0,0.5-0.1,0.7-0.2l12.6-7.3c0.4-0.3,0.7-0.7,0.7-1.2V8.7C30,8.2,29.8,7.7,29.3,7.5z M27.2,22.5L16,29\n          L4.8,22.5v-13L16,3l11.2,6.5V22.5z"}}),r("path",{attrs:{d:"M7.1,10.8c-0.4,0.7-0.2,1.5,0.5,1.9l6.9,4v8.7c0,0.8,0.6,1.4,1.4,1.4s1.4-0.6,1.4-1.4v-8.6l6.8-3.8\n          c0.7-0.4,0.9-1.2,0.5-1.9c-0.4-0.7-1.2-0.9-1.9-0.5L16,14.2l-6.9-4C8.4,9.9,7.5,10.1,7.1,10.8z"}})])])]),r("div",{staticClass:"header-title"},[r("h2",{staticStyle:{color:"#FFFFFF",margin:"10px 0"},attrs:{align:"left"}},[e._v("Youran代码自动化平台")])])]),r("el-container",[r("el-aside",{staticClass:"menu",staticStyle:{width:"250px"}},[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:!0}},[r("el-menu-item",{class:{"is-active":e.isRoutePath("/")},attrs:{index:"/"}},[e._v("首页")]),r("el-menu-item",{class:{"is-active":e.isRouteIndexOf("/project")},attrs:{index:"/project"}},[e._v("项目管理")])],1)],1),r("el-main",{staticClass:"content"},[r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[r("router-view")],1)],1)],1)],1)}),l=[],s={name:"app",data:function(){return{}},methods:{isRoutePath:function(e){return this.$route.path===e},isRouteIndexOf:function(e){return 0===this.$route.path.indexOf(e)}},created:function(){},watch:{$route:function(e,t){}}},c=s,u=r("2877"),d=Object(u["a"])(c,i,l,!1,null,null,null);d.options.__file="App.vue";var m=d.exports,p=r("8c4f"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-col",{attrs:{span:24}},[r("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.tutorial)}})])],1)],1)},h=[],b=r("339e"),y=r.n(b),g=(r("e4cb"),r("e958")),v=r.n(g),j=new y.a.Converter,I=j.makeHtml(v.a),_={data:function(){return{tutorial:I}}},x=_,k=Object(u["a"])(x,f,h,!1,null,null,null);k.options.__file="Home.vue";var w=k.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[r("keep-alive",{attrs:{include:"projectList"}},[r("router-view")],1)],1)],1)},N=[],F={},E=Object(u["a"])(F,$,N,!1,null,null,null);E.options.__file="index.vue";var q=E.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",[e._v("项目管理")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:6}},[e._v("\n      已选择"+e._s(e.activeNum)+"个项目\n    ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("创建项目")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"projectTable",staticStyle:{width:"100%"},attrs:{data:e.entities,"row-key":"projectId","expand-row-keys":e.expandRowKeys,"row-class-name":e.activeRow},on:{"cell-mouse-enter":e.cellMouseEnter}},[r("el-table-column",{attrs:{type:"expand",width:"0","class-name":"project-table-expand-column"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"project-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){e.handleEdit(t.row)}}},[r("icon",{attrs:{name:"edit",scale:"0.8"}}),e._v(" 编辑")],1),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){e.handleEntity(t.row)}}},[r("icon",{attrs:{name:"cubes",scale:"0.8"}}),e._v(" 实体管理")],1),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){e.handleConst(t.row)}}},[r("icon",{attrs:{name:"align-justify",scale:"0.8"}}),e._v(" 枚举管理")],1),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){e.handleReverseEngineering(t.row)}}},[r("icon",{attrs:{name:"object-group",scale:"0.8"}}),e._v(" 反向工程")],1),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){e.handleGenCode(t.row)}}},[r("icon",{attrs:{name:"file-archive",scale:"0.8"}}),e._v(" 下载代码")],1),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){e.handleGenSql(t.row)}}},[r("icon",{attrs:{name:"file-code",scale:"0.8"}}),e._v(" 下载sql")],1),1==t.row.remote?r("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(r){e.handleCommit(t.row)}}},[r("icon",{attrs:{name:"brands/git",scale:"0.8"}}),e._v(" 提交Git")],1):e._e(),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){e.handleDel(t.row)}}},[r("icon",{attrs:{name:"trash-alt",scale:"0.8"}}),e._v(" 删除")],1)],1)],1)]}}])}),r("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),r("el-table-column",{attrs:{property:"groupId",label:"groupId",width:"160"}}),r("el-table-column",{attrs:{property:"projectName",label:"项目标识",width:"200"}}),r("el-table-column",{attrs:{property:"projectDesc",label:"项目名称",width:"200"}}),r("el-table-column",{attrs:{property:"author",label:"作者",width:"120"}}),r("el-table-column",{attrs:{property:"packageName",label:"包名"}}),r("el-table-column",{attrs:{label:"启用Git仓库",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.remote?r("icon",{staticClass:"color-success",attrs:{name:"check"}}):e._e(),1!=t.row.remote?r("icon",{staticClass:"color-danger",attrs:{name:"times"}}):e._e()]}}])})],1),r("el-dialog",{attrs:{title:"反向工程",visible:e.reverseEngineeringFormVisible,width:"60%"},on:{"update:visible":function(t){e.reverseEngineeringFormVisible=t}}},[r("el-form",{ref:"reverseEngineeringForm",attrs:{model:e.reverseEngineeringForm,rules:e.reverseEngineeringFormRules}},[r("el-form-item",{attrs:{label:"脚本语言：","label-width":"100px"}},[r("el-radio-group",{model:{value:e.reverseEngineeringForm.dbType,callback:function(t){e.$set(e.reverseEngineeringForm,"dbType",t)},expression:"reverseEngineeringForm.dbType"}},[r("el-radio",{attrs:{border:"",label:"mysql"}},[e._v("MySql")])],1)],1),r("el-form-item",{attrs:{label:"DDL脚本：","label-width":"100px",prop:"ddl"}},[r("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.reverseEngineeringForm.ddl,callback:function(t){e.$set(e.reverseEngineeringForm,"ddl",t)},expression:"reverseEngineeringForm.ddl"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.reverseEngineeringFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleReverseEngineeringCheck}},[e._v("校 验")]),r("el-button",{attrs:{type:"success"},on:{click:e.handleReverseEngineeringSubmit}},[e._v("反向生成")])],1)],1)],1)},C=[],O=(r("7514"),r("53ca")),D=r("bc3a"),S=r.n(D),R=r("4328"),L=r.n(R),B=r("64ae"),A="",M=S.a.create({baseURL:A,timeout:6e4,responseType:"json",headers:{"Content-Type":"application/json; charset=utf-8"},paramsSerializer:function(e){return L.a.stringify(e,{arrayFormat:"repeat"})}}),P="api",z={install:function(e,t){e.prototype.$ajax=M,e.prototype.$common={BASE_API_URL:A,snakeCase:function(e){return Object(B["snakeCase"])(e)},camelCase:function(e){return Object(B["camelCase"])(e)},getProjectOptions:function(){return M.get("/".concat(P,"/meta_project/list"))},getEntityOptions:function(e){return M.get("/".concat(P,"/meta_entity/list"),{params:{projectId:e,pageSize:1e3,pageNo:1}})},getFieldOptions:function(e){return M.get("/".concat(P,"/meta_field/list"),{params:{entityId:e}})},getConstOptions:function(e){return M.get("/".concat(P,"/meta_const/list"),{params:{projectId:e,pageSize:1e3,pageNo:1}})},confirm:function(t){return e.prototype.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},showNotify:function(t,r,n){return e.prototype.$notify({title:r,type:t,message:n})},showNotifyError:function(e){if(!1===e)return this.showNotify("error","出错了","表单校验失败");if("string"===typeof e&&e.constructor===String){if("cancel"===e)return;return this.showNotify("error","出错了",e)}if("object"===Object(O["a"])(e)){if(e.constructor===Error){if(e.response&&500===e.response.status)return this.showNotify("error","出错了","系统内部错误");if(e.message)return this.showNotify("error","出错了",e.message)}if(e.code&&"0"!==e.code)return this.showNotify("error","出错了",e.message)}return this.showNotify("error","出错了","")},showMsg:function(t,r){e.prototype.$message({message:r,type:t})},checkResult:function(e){return new Promise(function(t,r){return e?"0"===e.code?t(e):r(new Error(e.message)):r(new Error("返回结果有误"))})},removeBlankField:function(e){var t={};for(var r in e)if("string"===typeof e[r]){var n=e[r].trim();if(""===n)continue;t[r]=n}else t[r]=e[r];return t}}}},V={name:"projectList",data:function(){return{query:{},activeNum:0,selectItems:[],entities:[],loading:!1,reverseEngineeringFormVisible:!1,reverseEngineeringForm:{projectId:null,dbType:"mysql",ddl:""},reverseEngineeringFormRules:{ddl:[{required:!0,message:"请输入DDL脚本",trigger:"blur"},{max:1e4,message:"长度不能超过10000个字符",trigger:"blur"}]},expandRowKeys:[]}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(e){var t=this;this.$common.confirm("是否确认删除").then(function(){return t.$ajax.put("/".concat(P,"/meta_project/deleteBatch"),[e.projectId])}).then(function(e){return t.$common.checkResult(e.data)}).then(function(){return t.doQuery()}).catch(function(e){return t.$common.showNotifyError(e)})},doQuery:function(){var e=this;this.loading=!0,this.$ajax.get("/".concat(P,"/meta_project/list"),{params:this.query}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.entities=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){e.loading=!1})},handleAdd:function(){this.$router.push("/project/add")},handleEntity:function(e){this.$router.push("/project/".concat(e.projectId,"/entity"))},handleConst:function(e){this.$router.push("/project/".concat(e.projectId,"/const"))},handleEdit:function(e){this.$router.push("/project/edit/".concat(e.projectId))},handleShow:function(e){this.$router.push("/project/show/".concat(e.projectId))},handleGenSql:function(e){window.open("".concat(this.$common.BASE_API_URL,"/").concat(P,"/code_gen/genSql?projectId=").concat(e.projectId))},handleGenCode:function(e){var t=this;this.$common.confirm("是否确认下载").then(function(){return window.open("".concat(t.$common.BASE_API_URL,"/").concat(P,"/code_gen/genCode?projectId=").concat(e.projectId))})},handleReverseEngineering:function(e){this.reverseEngineeringFormVisible=!0,this.reverseEngineeringForm.projectId=e.projectId,this.reverseEngineeringForm.ddl=""},handleReverseEngineeringCheck:function(){var e=this,t=null;this.$refs.reverseEngineeringForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/".concat(P,"/reverse_engineering/check"),e.reverseEngineeringForm)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","校验通过")}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},handleReverseEngineeringSubmit:function(){var e=this,t=null;this.$refs.reverseEngineeringForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/".concat(P,"/reverse_engineering/execute"),e.reverseEngineeringForm)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","执行成功"),e.reverseEngineeringFormVisible=!1}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},handleCommit:function(e){var t=this;this.$common.confirm("是否确认提交到远程git仓库").then(function(){return t.loading=!0,t.$ajax.get("/".concat(P,"/code_gen/gitCommit?projectId=").concat(e.projectId))}).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return t.$common.showMsg("success",e.message)}).catch(function(e){return t.$common.showNotifyError(e)}).finally(function(){t.loading=!1})},activeRow:function(e){if(this.expandRowKeys.find(function(t){return t===e.row.projectId}))return"active-row"},cellMouseEnter:function(e){this.expandRowKeys=[e.projectId]}},activated:function(){this.doQuery()}},K=V,Q=(r("3fda"),Object(u["a"])(K,T,C,!1,null,null,null));Q.options.__file="list.vue";var G=Q.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",[e._v("添加")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"groupId",prop:"groupId"}},[r("help-popover",{attrs:{name:"project.groupId"}},[r("el-input",{attrs:{placeholder:"例如：com.myGroup"},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}})],1)],1),r("el-form-item",{attrs:{label:"项目标识",prop:"projectName"}},[r("help-popover",{attrs:{name:"project.projectName"}},[r("el-input",{attrs:{placeholder:"例如：bbs"},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1)],1),r("el-form-item",{attrs:{label:"项目名称",prop:"projectDesc"}},[r("help-popover",{attrs:{name:"project.projectDesc"}},[r("el-input",{attrs:{placeholder:"例如：论坛"},model:{value:e.form.projectDesc,callback:function(t){e.$set(e.form,"projectDesc",t)},expression:"form.projectDesc"}})],1)],1),r("el-form-item",{attrs:{label:"包名",prop:"packageName"}},[r("help-popover",{attrs:{name:"project.packageName"}},[r("el-input",{attrs:{placeholder:"例如：com.cbb.bbs"},model:{value:e.form.packageName,callback:function(t){e.$set(e.form,"packageName",t)},expression:"form.packageName"}})],1)],1),r("el-form-item",{attrs:{label:"作者",prop:"author"}},[r("help-popover",{attrs:{name:"project.author"}},[r("el-input",{attrs:{placeholder:"例如：菜小哥"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1)],1),r("el-form-item",{attrs:{label:"spring-boot版本",prop:"feature.bootVersion"}},[r("help-popover",{attrs:{name:"project.feature.bootVersion"}},[r("el-radio-group",{model:{value:e.form.feature.bootVersion,callback:function(t){e.$set(e.form.feature,"bootVersion",t)},expression:"form.feature.bootVersion"}},[r("el-radio",{attrs:{border:"",label:1}},[e._v("1.5.x.RELEASE")]),r("el-radio",{attrs:{border:"",label:2}},[e._v("2.1.x.RELEASE")])],1)],1)],1),r("el-form-item",{attrs:{label:"启用Git仓库",prop:"remote"}},[r("help-popover",{attrs:{name:"project.remote"}},[r("el-radio-group",{model:{value:e.form.remote,callback:function(t){e.$set(e.form,"remote",t)},expression:"form.remote"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),1==e.form.remote?[r("el-form-item",{attrs:{label:"Git仓库地址",prop:"remoteUrl"}},[r("help-popover",{attrs:{name:"project.remoteUrl"}},[r("el-input",{attrs:{placeholder:"例如：https://github.com/github/testrepo.git"},model:{value:e.form.remoteUrl,callback:function(t){e.$set(e.form,"remoteUrl",t)},expression:"form.remoteUrl"}})],1)],1),r("el-form-item",{attrs:{label:"Git用户名",prop:"username"}},[r("help-popover",{attrs:{name:"project.username"}},[r("el-input",{attrs:{placeholder:"例如：zhangsan"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),r("el-form-item",{attrs:{label:"Git密码/token",prop:"password"}},[r("help-popover",{attrs:{name:"project.password"}},[r("el-input",{attrs:{placeholder:"例如：123456"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)]:e._e(),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],2)],1)],1)],1)},H=[],J={boolOptions:[{value:1,label:"是"},{value:0,label:"否"}],fieldTypeOptions:[{value:"int",label:"INT"},{value:"varchar",label:"VARCHAR"},{value:"text",label:"TEXT"},{value:"datetime",label:"DATETIME"},{value:"float",label:"FLOAT"},{value:"double",label:"DOUBLE"},{value:"decimal",label:"DECIMAL"},{value:"bigint",label:"BIGINT"},{value:"smallint",label:"SMALLINT"},{value:"tinyint",label:"TINYINT"}],showFieldLength:function(e){return"datetime"!==e&&"text"!==e},showFieldScale:function(e){return"decimal"===e||"double"===e||"float"===e},jfieldTypeOptions:[{value:"Integer",label:"Integer"},{value:"Short",label:"Short"},{value:"Long",label:"Long"},{value:"String",label:"String"},{value:"Date",label:"Date"},{value:"Double",label:"Double"},{value:"Float",label:"Float"},{value:"BigDecimal",label:"BigDecimal"}],queryTypeOptions:[{value:1,label:"等于"},{value:2,label:"like"},{value:3,label:"大于"},{value:4,label:"大于等于"},{value:5,label:"小于"},{value:6,label:"小于等于"},{value:7,label:"between"}],specialFieldOptions:[{value:"deleted",label:"逻辑删除"},{value:"createdTime",label:"创建时间"},{value:"createdBy",label:"创建人员"},{value:"operatedTime",label:"更新时间"},{value:"operatedBy",label:"更新人员"},{value:"version",label:"乐观锁版本"}],constTypeOptions:[{value:1,label:"整型"},{value:2,label:"字符串"}],defaultConstList:[{constName:"BoolConst"}]};function W(e){var t={groupId:"",projectName:"",projectDesc:"",packageName:"",author:"",remote:0,remoteUrl:"",username:"",password:"",feature:{bootVersion:1}};return e&&(t["projectId"]=null),t}function X(){return{groupId:[{required:!0,message:"请输入groupId",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"},{validator:function(e,t,r){/^[a-z|-]+$/.test(t)||r(new Error("项目名称不合法,只允许小写字母和横杠")),r()},trigger:"blur"}],projectDesc:[{required:!0,message:"请输入项目名称",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],packageName:[{required:!0,message:"请输入包名",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],author:[{required:!0,message:"请输入作者",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],remote:[{required:!0,type:"number",message:"请选择是否启用",trigger:"change"}],remoteUrl:[{max:256,message:"长度不能超过256个字符",trigger:"blur"}],username:[{max:32,message:"长度不能超过32个字符",trigger:"blur"}],password:[{max:32,message:"长度不能超过32个字符",trigger:"blur"}],feature:{bootVersion:[{required:!0,type:"number",message:"请选择spring-boot版本",trigger:"change"}]}}}var Y={name:"projectAdd",data:function(){return{boolOptions:J.boolOptions,form:W(!1),rules:X()}},methods:{submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/".concat(P,"/meta_project/save"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project")}},created:function(){}},Z=Y,ee=(r("6565"),Object(u["a"])(Z,U,H,!1,null,null,null));ee.options.__file="add.vue";var te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",[e._v("编辑")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"groupId",prop:"groupId"}},[r("help-popover",{attrs:{name:"project.groupId"}},[r("el-input",{attrs:{placeholder:"例如：com.myGroup"},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}})],1)],1),r("el-form-item",{attrs:{label:"项目标识",prop:"projectName"}},[r("help-popover",{attrs:{name:"project.projectName"}},[r("el-input",{attrs:{placeholder:"例如：bbs"},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1)],1),r("el-form-item",{attrs:{label:"项目名称",prop:"projectDesc"}},[r("help-popover",{attrs:{name:"project.projectDesc"}},[r("el-input",{attrs:{placeholder:"例如：论坛"},model:{value:e.form.projectDesc,callback:function(t){e.$set(e.form,"projectDesc",t)},expression:"form.projectDesc"}})],1)],1),r("el-form-item",{attrs:{label:"包名",prop:"packageName"}},[r("help-popover",{attrs:{name:"project.packageName"}},[r("el-input",{attrs:{placeholder:"例如：com.cbb.bbs"},model:{value:e.form.packageName,callback:function(t){e.$set(e.form,"packageName",t)},expression:"form.packageName"}})],1)],1),r("el-form-item",{attrs:{label:"作者",prop:"author"}},[r("help-popover",{attrs:{name:"project.author"}},[r("el-input",{attrs:{placeholder:"例如：菜小哥"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1)],1),r("el-form-item",{attrs:{label:"spring-boot版本",prop:"feature.bootVersion"}},[r("help-popover",{attrs:{name:"project.feature.bootVersion"}},[r("el-radio-group",{model:{value:e.form.feature.bootVersion,callback:function(t){e.$set(e.form.feature,"bootVersion",t)},expression:"form.feature.bootVersion"}},[r("el-radio",{attrs:{border:"",label:1}},[e._v("1.5.x.RELEASE")]),r("el-radio",{attrs:{border:"",label:2}},[e._v("2.1.x.RELEASE")])],1)],1)],1),r("el-form-item",{attrs:{label:"启用Git仓库",prop:"remote"}},[r("help-popover",{attrs:{name:"project.remote"}},[r("el-radio-group",{model:{value:e.form.remote,callback:function(t){e.$set(e.form,"remote",t)},expression:"form.remote"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),1==e.form.remote?[r("el-form-item",{attrs:{label:"Git仓库地址",prop:"remoteUrl"}},[r("help-popover",{attrs:{name:"project.remoteUrl"}},[r("el-input",{attrs:{placeholder:"例如：https://github.com/github/testrepo.git"},model:{value:e.form.remoteUrl,callback:function(t){e.$set(e.form,"remoteUrl",t)},expression:"form.remoteUrl"}})],1)],1),r("el-form-item",{attrs:{label:"Git用户名",prop:"username"}},[r("help-popover",{attrs:{name:"project.username"}},[r("el-input",{attrs:{placeholder:"例如：zhangsan"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),r("el-form-item",{attrs:{label:"Git密码/token",prop:"password"}},[r("help-popover",{attrs:{name:"project.password"}},[r("el-input",{attrs:{placeholder:"例如：123456"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)]:e._e(),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.reset()}}},[e._v("重置")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],2)],1)],1)],1)},ne=[],oe={name:"projectEdit",props:["projectId"],data:function(){return{boolOptions:J.boolOptions,old:W(!0),form:W(!0),rules:X()}},methods:{getProject:function(){var e=this;return this.$ajax.get("/".concat(P,"/meta_project/").concat(this.projectId)).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in W(!0))this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/".concat(P,"/meta_project/update"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project")}},created:function(){var e=this;this.getProject().then(function(){return e.reset()})}},ae=oe,ie=(r("03bf"),Object(u["a"])(ae,re,ne,!1,null,null,null));ie.options.__file="edit.vue";var le=ie.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[r("keep-alive",{attrs:{include:"entityList"}},[r("router-view")],1)],1)],1)},ce=[],ue={},de=Object(u["a"])(ue,se,ce,!1,null,null,null);de.options.__file="index.vue";var me=de.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"entityList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",[e._v("实体管理")])],1),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:6}},[e._v("\n      已选择"+e._s(e.activeNum)+"个实体\n    ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"请选择项目"},on:{change:e.handleQuery},model:{value:e.queryForm.projectId,callback:function(t){e.$set(e.queryForm,"projectId",t)},expression:"queryForm.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectDesc,value:e.projectId}})}),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加实体")]),r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleMtmAdd(t)}}},[e._v("添加多对多")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleErDiagram(t)}}},[e._v("查看ER图")]),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")])],1)],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.page.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),r("el-table-column",{attrs:{label:"实体名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.title)+"\n        "),e._l(t.row.mtms,function(n){return[r("el-dropdown",{key:n.mtmId,staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{size:"mini",placement:"bottom-start",trigger:"click"},on:{command:e.handleMtmCommand}},[r("span",{class:["mtm_span",1==n.holdRefer1&&n.entityId1==t.row.entityId||1==n.holdRefer2&&n.entityId2==t.row.entityId?"mtm_hold_span":"mtm_unhold_span"],attrs:{title:"多对多"}},[e._v("\n              "+e._s(n.tableName)+"\n            ")]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:{method:"handleMtmDel",arg:[n]}}},[r("icon",{attrs:{name:"trash-alt",scale:"0.7",color:"red"}}),e._v(" 删除多对多\n              ")],1),r("el-dropdown-item",{attrs:{command:{method:"handleMtmEdit",arg:[n]}}},[r("icon",{attrs:{name:"edit",scale:"0.7",color:"red"}}),e._v(" 编辑多对多\n              ")],1)],1)],1)]})]}}])}),r("el-table-column",{attrs:{property:"className",label:"类名"}}),r("el-table-column",{attrs:{property:"tableName",label:"表名"}}),r("el-table-column",{attrs:{label:"分页",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.pageSign?r("icon",{staticClass:"color-success",attrs:{name:"check"}}):e._e(),1!=t.row.pageSign?r("icon",{staticClass:"color-danger",attrs:{name:"times"}}):e._e()]}}])}),r("el-table-column",{attrs:{property:"desc",label:"描述"}}),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleField(t.row)}}},[e._v("字段管理")]),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleSqlPreview(t.row)}}},[e._v("sql预览")])]}}])})],1),r("el-row",{staticStyle:{padding:"20px 0"},attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.page.pageNo,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"sizes, prev, pager, next",total:e.page.entityCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),r("el-dialog",{attrs:{title:"sql预览",visible:e.sqlPreviewVisible,width:"50%"},on:{"update:visible":function(t){e.sqlPreviewVisible=t}}},[r("el-input",{attrs:{readonly:!0,type:"textarea",rows:20},model:{value:e.sqlPreview,callback:function(t){e.sqlPreview=t},expression:"sqlPreview"}}),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.sqlPreviewVisible=!1}}},[e._v("关 闭")])],1)],1),r("er-diagram",{ref:"erDiagram"})],1)},fe=[],he=r("2909"),be=r("be94"),ye=(r("ac6a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"erDiagram"},[r("el-dialog",{class:{hideTitle:e.hideTitle},attrs:{title:"实体关系图",visible:e.visible,fullscreen:!0},on:{"update:visible":function(t){e.visible=t}}},[r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"100%"},attrs:{type:"flex",align:"middle"}},[r("div",{staticClass:"erDiagramDiv",attrs:{id:"erDiagramDiv"}})])],1)],1)}),ge=[],ve=r("6f70"),je=r.n(ve),Ie={name:"er-diagram",data:function(){return{erDiagram:{},loading:!1,visible:!1}},methods:{show:function(e,t){var r=this;this.visible=!0,this.queryErDiagram(e,t).then(function(){return r.renderDiagram()})},queryErDiagram:function(e,t){var r=this;return this.loading=!0,this.$ajax.get("/".concat(P,"/er_diagram/show"),{params:{projectId:e,entityIds:t}}).then(function(e){return r.$common.checkResult(e.data)}).then(function(e){r.erDiagram=e.data}).catch(function(e){return r.$common.showNotifyError(e)}).finally(function(){r.loading=!1})},getBrush:function(e){if(!this.brush){var t=je.a.GraphObject.make;this.brush={bluegrad:t(je.a.Brush,"Linear",{0:"rgb(150, 150, 250)",.5:"rgb(86, 86, 186)",1:"rgb(86, 86, 186)"}),greengrad:t(je.a.Brush,"Linear",{0:"rgb(158, 209, 159)",1:"rgb(67, 101, 56)"}),redgrad:t(je.a.Brush,"Linear",{0:"rgb(206, 106, 100)",1:"rgb(180, 56, 50)"}),yellowgrad:t(je.a.Brush,"Linear",{0:"rgb(254, 221, 50)",1:"rgb(254, 182, 50)"}),lightgrad:t(je.a.Brush,"Linear",{1:"#E6E6FA",0:"#FFFAF0"})}}return this.brush[e]},initDiagram:function(){var e=je.a.GraphObject.make;this.diagram=e(je.a.Diagram,"erDiagramDiv",{initialContentAlignment:je.a.Spot.Center,allowDelete:!1,allowCopy:!1,layout:e(je.a.ForceDirectedLayout),"undoManager.isEnabled":!0});var t=e(je.a.Panel,"Horizontal",e(je.a.Shape,{desiredSize:new je.a.Size(10,10),margin:new je.a.Margin(0,5,0,0)},new je.a.Binding("figure","figure"),new je.a.Binding("fill","color")),e(je.a.TextBlock,{stroke:"#333333",font:"bold 14px sans-serif",margin:new je.a.Margin(0,10,0,0)},new je.a.Binding("text","name")),e(je.a.TextBlock,{stroke:"#333333",font:"bold 14px sans-serif"},new je.a.Binding("text","desc")));this.diagram.nodeTemplate=e(je.a.Node,"Auto",{selectionAdorned:!0,resizable:!0,layoutConditions:je.a.Part.LayoutStandard&~je.a.Part.LayoutNodeSized,fromSpot:je.a.Spot.AllSides,toSpot:je.a.Spot.AllSides,isShadowed:!0,shadowColor:"#C5C1AA"},new je.a.Binding("location","location").makeTwoWay(),new je.a.Binding("desiredSize","visible",function(){return new je.a.Size(NaN,NaN)}).ofObject("LIST"),e(je.a.Shape,"Rectangle",{fill:this.getBrush("lightgrad"),stroke:"#756875",strokeWidth:3}),e(je.a.Panel,"Table",{margin:8,stretch:je.a.GraphObject.Fill},e(je.a.RowColumnDefinition,{row:0,sizing:je.a.RowColumnDefinition.None}),e(je.a.TextBlock,{row:0,alignment:je.a.Spot.Center,margin:new je.a.Margin(0,14,0,2),font:"bold 16px sans-serif"},new je.a.Binding("text","key")),e("PanelExpanderButton","LIST",{row:0,alignment:je.a.Spot.TopRight}),e(je.a.Panel,"Vertical",{name:"LIST",row:1,padding:3,alignment:je.a.Spot.TopLeft,defaultAlignment:je.a.Spot.Left,stretch:je.a.GraphObject.Horizontal,itemTemplate:t},new je.a.Binding("itemArray","fields")))),this.diagram.linkTemplate=e(je.a.Link,{selectionAdorned:!0,layerName:"Foreground",reshapable:!0,routing:je.a.Link.AvoidsNodes,corner:5,curve:je.a.Link.JumpOver},e(je.a.Shape,{stroke:"#303B45",strokeWidth:2.5}),e(je.a.TextBlock,{textAlign:"center",font:"bold 14px sans-serif",stroke:"#1967B3",segmentIndex:0,segmentOffset:new je.a.Point(NaN,NaN),segmentOrientation:je.a.Link.OrientUpright},new je.a.Binding("text","text")),e(je.a.TextBlock,{textAlign:"center",font:"bold 14px sans-serif",stroke:"#1967B3",segmentIndex:-1,segmentOffset:new je.a.Point(NaN,NaN),segmentOrientation:je.a.Link.OrientUpright},new je.a.Binding("text","toText")))},updateModel:function(){var e=this;this.erDiagram.nodeData.forEach(function(t){return t.fields.forEach(function(t){"pk"===t.type?(t.iskey=!0,t.figure="Decision",t.color=e.getBrush("yellowgrad")):(t.iskey=!1,"fk"===t.type?(t.figure="Decision",t.color=e.getBrush("bluegrad")):"delete"===t.type?(t.figure="ThickX",t.color=e.getBrush("redgrad")):"version"===t.type?(t.figure="PaperTape",t.color=e.getBrush("greengrad")):(t.figure="",t.color=null))})}),this.diagram.model=new je.a.GraphLinksModel(this.erDiagram.nodeData,this.erDiagram.linkData)},renderDiagram:function(){this.diagram?(this.updateModel(),this.diagram.requestUpdate()):(this.initDiagram(),this.updateModel())}}},_e=Ie,xe=(r("54f1"),Object(u["a"])(_e,ye,ge,!1,null,null,null));xe.options.__file="erDiagram.vue";var ke=xe.exports,we={name:"entityList",components:{ErDiagram:ke},props:["projectId"],data:function(){return{sqlPreview:"",sqlPreviewVisible:!1,query:{projectId:null},queryForm:{projectId:null},projectList:[],activeNum:0,selectItems:[],page:{pageNo:1,entityCount:0,pageSize:20,entities:[]},mtms:[],loading:!1}},watch:{mtms:function(e){var t=this;e&&(this.page.entities.forEach(function(e){e.mtms=[]}),e.forEach(function(e){var r=t.page.entities.find(function(t){return t.entityId===e.entityId1}),n=t.page.entities.find(function(t){return t.entityId===e.entityId2});r&&r.mtms.push(e),n&&n.mtms.push(e)}))}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择实体"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/".concat(P,"/meta_entity/deleteBatch"),e.selectItems.map(function(e){return e.entityId}))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){return e.doQuery()}).then(function(){return e.doQueryMtm()}).catch(function(t){return e.$common.showNotifyError(t)})},sizeChange:function(e){this.page.pageSize=e,this.doQuery()},currentChange:function(e){this.page.pageNo=e,this.doQuery()},queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.projectList=t.data})},handleQuery:function(){var e=this;this.query=Object(be["a"])({},this.queryForm),this.query.projectId!==parseInt(this.projectId)&&this.$router.push("/project/".concat(this.query.projectId,"/entity")),this.doQuery().then(function(){return e.doQueryMtm()})},doQuery:function(){var e=this;if(this.query.projectId){var t=Object(be["a"])({},this.query,{pageNo:this.page.pageNo,pageSize:this.page.pageSize});return this.loading=!0,this.$ajax.get("/".concat(P,"/meta_entity/list"),{params:t}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){t.data.entities.forEach(function(e){e.mtms=[]}),e.page=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){e.loading=!1})}},doQueryMtm:function(){var e=this;if(this.query.projectId)return this.loading=!0,this.$ajax.get("/".concat(P,"/meta_mtm/list"),{params:{projectId:this.query.projectId}}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.mtms=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){e.loading=!1})},handleMtmCommand:function(e){this[e.method].apply(this,Object(he["a"])(e.arg))},handleAdd:function(){this.$router.push("/project/".concat(this.projectId,"/entity/add"))},handleMtmAdd:function(){var e=this.selectItems.map(function(e){return e.entityId}).join("-");this.$router.push("/project/".concat(this.projectId,"/entity/mtmAdd/").concat(e))},handleMtmEdit:function(e){this.$router.push("/project/".concat(this.projectId,"/entity/mtmEdit/").concat(e.mtmId))},handleMtmDel:function(e){var t=this;this.$common.confirm("请确认是否删除多对多【".concat(e.tableName,"】")).then(function(){return t.$ajax.delete("/".concat(P,"/meta_mtm/").concat(e.mtmId))}).then(function(e){return t.$common.checkResult(e.data)}).then(function(){return t.doQueryMtm()}).catch(function(e){return t.$common.showNotifyError(e)})},handleErDiagram:function(){var e=this.selectItems.map(function(e){return e.entityId});this.$refs.erDiagram.show(this.projectId,e)},handleField:function(e){this.$router.push("/project/".concat(this.projectId,"/entity/").concat(e.entityId,"/field"))},handleEdit:function(e){this.$router.push("/project/".concat(this.projectId,"/entity/edit/").concat(e.entityId))},handleShow:function(e){this.$router.push("/project/".concat(this.projectId,"/entity/show/").concat(e.entityId))},handleSqlPreview:function(e){var t=this;this.$ajax.get("/".concat(P,"/code_gen/sqlPreview?entityId=").concat(e.entityId)).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){t.sqlPreview=e.data,t.sqlPreviewVisible=!0}).catch(function(e){return t.$common.showNotifyError(e)})},handleCommand:function(e){this[e.method](e.arg)}},activated:function(){var e=this;this.queryProject().then(function(){e.queryForm.projectId=parseInt(e.projectId),e.query.projectId=e.queryForm.projectId}).then(function(){return e.doQuery()}).then(function(){return e.doQueryMtm()})}},$e=we,Ne=(r("80ab"),Object(u["a"])($e,pe,fe,!1,null,null,null));Ne.options.__file="list.vue";var Fe=Ne.exports,Ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"entityAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",[e._v("添加实体")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"entity.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectDesc,value:e.projectId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"实体名",prop:"title"}},[r("help-popover",{attrs:{name:"entity.title"}},[r("el-input",{attrs:{placeholder:"例如：用户"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),r("el-form-item",{attrs:{label:"类名",prop:"className"}},[r("help-popover",{attrs:{name:"entity.className"}},[r("el-input",{attrs:{placeholder:"例如：User"},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1)],1),r("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[r("help-popover",{attrs:{name:"entity.tableName"}},[r("el-input",{attrs:{placeholder:"例如：t_user"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),r("el-form-item",{attrs:{label:"分页",prop:"pageSign"}},[r("help-popover",{attrs:{name:"entity.pageSign"}},[r("el-radio-group",{model:{value:e.form.pageSign,callback:function(t){e.$set(e.form,"pageSign",t)},expression:"form.pageSign"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("help-popover",{attrs:{name:"entity.desc"}},[r("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},qe=[];function Te(e){var t={projectId:null,title:"",className:"",tableName:"",desc:"",commonCall:1,pageSign:1};return e&&(t["entityId"]=null),t}function Ce(){return{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],title:[{required:!0,message:"请输入实体名",trigger:"blur"},{max:25,message:"长度不能超过25个字符",trigger:"blur"}],className:[{required:!0,message:"请输入类名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],tableName:[{required:!0,message:"请输入表名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],pageSign:[{required:!0,type:"number",message:"请选择是否支持分页",trigger:"change"}],desc:[{max:250,message:"长度不能超过250个字符",trigger:"blur"}]}}function Oe(e){var t={projectId:null,tableName:"",desc:"",entityId1:null,entityId2:null,holdRefer1:1,holdRefer2:1};return e&&(t["mtmId"]=null),t}function De(){return{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],tableName:[{required:!0,message:"请输入关联表名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],desc:[{max:250,message:"长度不能超过250个字符",trigger:"blur"}],entityId1:[{required:!0,type:"number",message:"请选择实体1",trigger:"change"}],entityId2:[{required:!0,type:"number",message:"请选择实体2",trigger:"change"}],holdRefer1:[{required:!0,type:"number",message:"请选择实体1持有引用",trigger:"change"}],holdRefer2:[{required:!0,type:"number",message:"请选择实体2持有引用",trigger:"change"}]}}var Se={name:"entityAdd",props:["projectId"],data:function(){return{boolOptions:J.boolOptions,projectList:[],form:Te(!1),rules:Ce()}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.projectList=t.data})},submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/".concat(P,"/meta_entity/save"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/entity"))}},created:function(){var e=this;this.queryProject().then(function(){e.form.projectId=parseInt(e.projectId)})}},Re=Se,Le=(r("d1db"),Object(u["a"])(Re,Ee,qe,!1,null,null,null));Le.options.__file="add.vue";var Be=Le.exports,Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"entityEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",[e._v("编辑实体")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"entity.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectDesc,value:e.projectId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"实体名",prop:"title"}},[r("help-popover",{attrs:{name:"entity.title"}},[r("el-input",{attrs:{placeholder:"例如：用户"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),r("el-form-item",{attrs:{label:"类名",prop:"className"}},[r("help-popover",{attrs:{name:"entity.className"}},[r("el-input",{attrs:{placeholder:"例如：User"},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1)],1),r("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[r("help-popover",{attrs:{name:"entity.tableName"}},[r("el-input",{attrs:{placeholder:"例如：t_user"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),r("el-form-item",{attrs:{label:"分页",prop:"pageSign"}},[r("help-popover",{attrs:{name:"entity.pageSign"}},[r("el-radio-group",{model:{value:e.form.pageSign,callback:function(t){e.$set(e.form,"pageSign",t)},expression:"form.pageSign"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("help-popover",{attrs:{name:"entity.desc"}},[r("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.reset()}}},[e._v("重置")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},Me=[],Pe=(r("5df3"),{name:"entityEdit",props:["projectId","entityId"],data:function(){return{boolOptions:J.boolOptions,projectList:[],old:Te(!0),form:Te(!0),rules:Ce()}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.projectList=t.data})},getEntity:function(){var e=this;return this.$ajax.get("/".concat(P,"/meta_entity/").concat(this.entityId)).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Te(!0))this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/".concat(P,"/meta_entity/update"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/entity"))}},created:function(){var e=this;Promise.all([this.getEntity(),this.queryProject()]).then(function(){return e.reset()})}}),ze=Pe,Ve=(r("2925"),Object(u["a"])(ze,Ae,Me,!1,null,null,null));Ve.options.__file="edit.vue";var Ke=Ve.exports,Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mtmAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",[e._v("添加多对多")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"mtm.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectDesc,value:e.projectId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"关联表名",prop:"tableName"}},[r("help-popover",{attrs:{name:"mtm.tableName"}},[r("el-input",{attrs:{placeholder:"例如：r_user_role"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("help-popover",{attrs:{name:"mtm.desc"}},[r("el-input",{attrs:{placeholder:"例如：用户角色关联表",type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),r("el-form-item",{attrs:{label:"实体1",prop:"entityId1"}},[r("help-popover",{attrs:{name:"mtm.entityId1"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择实体1"},model:{value:e.form.entityId1,callback:function(t){e.$set(e.form,"entityId1",t)},expression:"form.entityId1"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"实体2",prop:"entityId2"}},[r("help-popover",{attrs:{name:"mtm.entityId2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择实体2"},model:{value:e.form.entityId2,callback:function(t){e.$set(e.form,"entityId2",t)},expression:"form.entityId2"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"实体1持有引用",prop:"holdRefer1"}},[r("help-popover",{attrs:{name:"mtm.holdRefer1"}},[r("el-radio-group",{model:{value:e.form.holdRefer1,callback:function(t){e.$set(e.form,"holdRefer1",t)},expression:"form.holdRefer1"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"实体2持有引用",prop:"holdRefer2"}},[r("help-popover",{attrs:{name:"mtm.holdRefer2"}},[r("el-radio-group",{model:{value:e.form.holdRefer2,callback:function(t){e.$set(e.form,"holdRefer2",t)},expression:"form.holdRefer2"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},Ge=[],Ue=(r("28a5"),{name:"mtmAdd",props:["projectId","entityIds"],data:function(){return{boolOptions:J.boolOptions,projectList:[],entityList:[],form:Oe(!1),rules:De()}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.projectList=t.data})},queryEntity:function(e){var t=this;return this.$common.getEntityOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){t.entityList=e.data.entities})},submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/".concat(P,"/meta_mtm/save"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/entity"))}},created:function(){var e=this;if(this.form.projectId=parseInt(this.projectId),this.entityIds){var t=this.entityIds.split("-").map(function(e){return parseInt(e)});this.form.entityId1=t[0],this.form.entityId2=t[1]}this.queryProject().then(function(){return e.queryEntity(e.form.projectId)})}}),He=Ue,Je=(r("fa4e"),Object(u["a"])(He,Qe,Ge,!1,null,null,null));Je.options.__file="mtmAdd.vue";var We=Je.exports,Xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mtmEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",[e._v("编辑多对多")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"mtm.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectDesc,value:e.projectId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"关联表名",prop:"tableName"}},[r("help-popover",{attrs:{name:"mtm.tableName"}},[r("el-input",{attrs:{placeholder:"例如：r_user_role"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("help-popover",{attrs:{name:"mtm.desc"}},[r("el-input",{attrs:{placeholder:"例如：用户角色关联表",type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),r("el-form-item",{attrs:{label:"实体1",prop:"entityId1"}},[r("help-popover",{attrs:{name:"mtm.entityId1"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择实体1"},model:{value:e.form.entityId1,callback:function(t){e.$set(e.form,"entityId1",t)},expression:"form.entityId1"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"实体2",prop:"entityId2"}},[r("help-popover",{attrs:{name:"mtm.entityId2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择实体2"},model:{value:e.form.entityId2,callback:function(t){e.$set(e.form,"entityId2",t)},expression:"form.entityId2"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"实体1持有引用",prop:"holdRefer1"}},[r("help-popover",{attrs:{name:"mtm.holdRefer1"}},[r("el-radio-group",{model:{value:e.form.holdRefer1,callback:function(t){e.$set(e.form,"holdRefer1",t)},expression:"form.holdRefer1"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"实体2持有引用",prop:"holdRefer2"}},[r("help-popover",{attrs:{name:"mtm.holdRefer2"}},[r("el-radio-group",{model:{value:e.form.holdRefer2,callback:function(t){e.$set(e.form,"holdRefer2",t)},expression:"form.holdRefer2"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.reset()}}},[e._v("重置")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},Ye=[],Ze={name:"mtmEdit",props:["projectId","mtmId"],data:function(){return{boolOptions:J.boolOptions,projectList:[],entityList:[],old:Oe(!0),form:Oe(!0),rules:De()}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.projectList=t.data})},queryEntity:function(e){var t=this;return this.$common.getEntityOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){t.entityList=e.data.entities})},getMtm:function(){var e=this;return this.$ajax.get("/".concat(P,"/meta_mtm/").concat(this.mtmId)).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Oe(!0))this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/".concat(P,"/meta_mtm/update"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/entity"))}},created:function(){var e=this;Promise.all([this.getMtm(),this.queryProject(),this.queryEntity(this.projectId)]).then(function(){return e.reset()})}},et=Ze,tt=(r("5ed3"),Object(u["a"])(et,Xe,Ye,!1,null,null,null));tt.options.__file="mtmEdit.vue";var rt=tt.exports,nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[r("keep-alive",{attrs:{include:"fieldList"}},[r("router-view")],1)],1)],1)},ot=[],at={},it=Object(u["a"])(at,nt,ot,!1,null,null,null);it.options.__file="index.vue";var lt=it.exports,st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fieldList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",[e._v("字段管理")])],1),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:4}},[e._v("\n      已选择"+e._s(e.activeNum)+"个字段\n    ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-cascader",{attrs:{placeholder:"请选择实体",options:e.queryForm.projectEntityOptions},on:{"active-item-change":e.handleProjectChange,change:e.handleQuery},model:{value:e.queryForm.projectEntity,callback:function(t){e.$set(e.queryForm,"projectEntity",t)},expression:"queryForm.projectEntity"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){e.addTemplateFormVisible=!0,e.templateForm.template=""}}},[e._v("添加字段")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.handleIndexAdd(t)}}},[e._v("创建索引")]),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除字段")]),r("el-badge",{staticClass:"item",attrs:{value:e.cacheFieldTemplateCount,hidden:!e.cacheFieldTemplateCount}},[r("el-button",{ref:"copyButton",staticStyle:{margin:"0 0 0 10px"},attrs:{type:"warning"},nativeOn:{click:function(t){return e.handleCopy(t)}}},[e._v("复制为模板")])],1)],1),r("el-form-item",[r("help-popover",{attrs:{name:"fieldListHelp",pic:{copyField:e.copyFieldUrl}}})],1)],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),r("el-table-column",{attrs:{label:"字段描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.fieldDesc)+"\n        "),e._l(t.row.indexes,function(n){return[r("el-dropdown",{key:n.indexId,staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{size:"mini",placement:"bottom-start",trigger:"click"},on:{command:e.handleIndexCommand}},[r("span",{class:["index_span",1==n.unique?"index_u_span":1==n.uniqueCheck?"index_check_span":"index_com_span"],attrs:{title:[1==n.unique?"唯一索引":1==n.uniqueCheck?"普通索引(唯一性校验)":"普通索引"]}},[e._v("\n              "+e._s(n.indexName)+"\n            ")]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:{method:"handleDelIndexField",arg:[n,t.row]}}},[r("icon",{attrs:{name:"times",scale:"0.7",color:[1==n.unique?"red":"blue"]}}),e._v(" 删除索引字段\n              ")],1),r("el-dropdown-item",{attrs:{command:{method:"handleDelIndex",arg:[n]}}},[r("icon",{attrs:{name:"trash-alt",scale:"0.7",color:[1==n.unique?"red":"blue"]}}),e._v(" 删除整个索引\n              ")],1),r("el-dropdown-item",{attrs:{command:{method:"handleIndexEdit",arg:[n]}}},[r("icon",{attrs:{name:"edit",scale:"0.7",color:[1==n.unique?"red":"blue"]}}),e._v(" 编辑索引\n              ")],1)],1)],1)]})]}}])}),r("el-table-column",{attrs:{label:"字段名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.jfieldName)+" / "+e._s(t.row.fieldName)+"\n      ")]}}])}),r("el-table-column",{attrs:{label:"字段类型",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("optionLabel")(t.row.jfieldType,"jfieldTypeOptions"))+"\n        / "+e._s(e._f("optionLabel")(t.row.fieldType,"fieldTypeOptions"))+e._s(e._f("lengthAndScale")(t.row))+"\n      ")]}}])}),r("el-table-column",{attrs:{label:"非空",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.notNull?r("icon",{staticClass:"color-success",attrs:{name:"check"}}):e._e(),1!=t.row.notNull?r("icon",{staticClass:"color-danger",attrs:{name:"times"}}):e._e()]}}])}),r("el-table-column",{attrs:{label:"主外键",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.primaryKey?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"主键",placement:"right"}},[r("icon",{staticClass:"color-warning",attrs:{name:"key"}})],1):e._e(),1==t.row.foreignKey?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"外键",placement:"right"}},[r("icon",{staticClass:"color-primary",attrs:{name:"key"}})],1):e._e()]}}])}),r("el-table-column",{attrs:{property:"orderNo",label:"排序",width:"50px"}}),r("el-table-column",{attrs:{property:"fieldExample",label:"字段示例"}}),r("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),r("el-button",{ref:"copyButton"+t.row.fieldId,staticStyle:{"margin-left":"5px"},attrs:{disabled:e.fieldCached(t.row.fieldId),type:"text",size:"medium"},on:{click:function(r){e.handleCopyOne(t.row,r)}}},[e._v("复制")]),1==t.row.foreignKey?r("el-badge",{staticClass:"cascadeBadge",attrs:{value:t.row.cascadeFieldNum,hidden:!t.row.cascadeFieldNum}},[r("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleShowCascadeExt(t.row)}}},[e._v("级联")])],1):e._e()]}}])})],1),r("el-dialog",{attrs:{title:"请选择字段模板",visible:e.addTemplateFormVisible,width:"30%"},on:{"update:visible":function(t){e.addTemplateFormVisible=t}}},[r("el-form",{attrs:{model:e.templateForm}},[r("el-form-item",{attrs:{label:"模式：","label-width":"100px"}},[r("el-radio-group",{model:{value:e.templateForm.multiple,callback:function(t){e.$set(e.templateForm,"multiple",t)},expression:"templateForm.multiple"}},[r("el-radio",{attrs:{border:"",label:"0"}},[e._v("表单编辑")]),r("el-radio",{attrs:{border:"",label:"1"}},[e._v("批量保存")])],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"==e.templateForm.multiple,expression:"templateForm.multiple=='0'"}],attrs:{label:"模板：","label-width":"100px"}},[r("el-select",{model:{value:e.templateForm.template,callback:function(t){e.$set(e.templateForm,"template",t)},expression:"templateForm.template"}},[r("el-option-group",[r("el-option",{attrs:{label:"不使用模板",value:""}})],1),e.cacheFieldTemplateCount>0?r("el-option-group",{attrs:{label:"临时模板"}},e._l(e.cacheFieldTemplate,function(t){return r("el-option",{key:t.fieldId,attrs:{label:t.fieldDesc,value:t.fieldId}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.fieldDesc))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[r("i",{staticClass:"el-icon-delete",on:{click:function(r){r.stopPropagation(),e.removeFieldTemplate(t.fieldId)}}})])])}),1):e._e(),r("el-option-group",{attrs:{label:"系统内置模板"}},e._l(e.fieldTemplate,function(e,t){return r("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.templateForm.multiple,expression:"templateForm.multiple=='1'"}],attrs:{label:"模板：","label-width":"100px"}},[r("el-select",{attrs:{multiple:"","collapse-tags":""},model:{value:e.templateForm.templates,callback:function(t){e.$set(e.templateForm,"templates",t)},expression:"templateForm.templates"}},[e.cacheFieldTemplateCount>0?r("el-option-group",{attrs:{label:"临时模板"}},e._l(e.cacheFieldTemplate,function(t){return r("el-option",{key:t.fieldId,attrs:{label:t.fieldDesc,value:t.fieldId}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.fieldDesc))]),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[r("i",{staticClass:"el-icon-delete",on:{click:function(r){r.stopPropagation(),e.removeFieldTemplate(t.fieldId)}}})])])}),1):e._e(),r("el-option-group",{attrs:{label:"系统内置模板"}},e._l(e.fieldTemplate,function(e,t){return r("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addTemplateFormVisible=!1}}},[e._v("取 消")]),"0"==e.templateForm.multiple?r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("开始编辑")]):e._e(),"1"==e.templateForm.multiple?r("el-button",{attrs:{type:"success"},on:{click:e.handleAddImm}},[e._v("立即保存")]):e._e()],1)],1),r("el-dialog",{staticClass:"cascadeExtDialog",attrs:{title:"级联扩展",visible:e.cascadeExtListVisible,width:"60%"},on:{"update:visible":function(t){e.cascadeExtListVisible=t}}},[r("cascade-ext-list",{ref:"cascadeExtList",on:{cascadeFieldNumChange:e.resetCascadeFieldNum,cascadeFieldNumAdd:e.addCascadeFieldNum}})],1),e._l(e.entities,function(e){return r("meteor",{key:e.fieldId,ref:"meteor"+e.fieldId,refInFor:!0})})],2)},ct=[],ut=(r("ac4d"),r("8a81"),r("a481"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cascadeExtList"},[r("el-row",{staticStyle:{padding:"0px"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:4}},[e._v("\n      已选择"+e._s(e.activeNum)+"个字段\n    ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加")]),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),r("el-table-column",{attrs:{label:"展示字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editFlag?e._e():r("span",[e._v(e._s(t.row.cascadeFieldDesc+"("+t.row.cascadeJfieldName+")"))]),t.row.editFlag?r("span",[r("el-select",{attrs:{placeholder:"请选择级联字段"},on:{change:function(r){e.handleCascadeFieldChange(t.row)}},model:{value:t.row.cascadeFieldId,callback:function(r){e.$set(t.row,"cascadeFieldId",r)},expression:"scope.row.cascadeFieldId"}},e._l(e.cascadeFieldList,function(e){return r("el-option",{key:e.fieldId,attrs:{label:e.fieldDesc+"("+e.jfieldName+")",value:e.fieldId}})}),1)],1):e._e()]}}])}),r("el-table-column",{attrs:{label:"字段别名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editFlag?e._e():r("span",[e._v(e._s(t.row.alias))]),t.row.editFlag?r("span",[r("el-input",{attrs:{placeholder:"字段别名"},model:{value:t.row.alias,callback:function(r){e.$set(t.row,"alias",r)},expression:"scope.row.alias"}})],1):e._e()]}}])}),r("el-table-column",{attrs:{label:"查询条件",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:!t.row.editFlag},model:{value:t.row.query,callback:function(r){e.$set(t.row,"query",r)},expression:"scope.row.query"}})]}}])}),r("el-table-column",{attrs:{label:"列表展示",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:!t.row.editFlag},model:{value:t.row.list,callback:function(r){e.$set(t.row,"list",r)},expression:"scope.row.list"}})]}}])}),r("el-table-column",{attrs:{label:"详情展示",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:!t.row.editFlag},model:{value:t.row.show,callback:function(r){e.$set(t.row,"show",r)},expression:"scope.row.show"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editFlag?e._e():r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),t.row.editFlag?r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleSave(t.row)}}},[e._v("保存")]):e._e()]}}])})],1)],1)}),dt=[],mt=(r("f751"),{cascadeExtId:null,fieldId:null,entityId:null,alias:"",list:1,show:1,query:1,cascadeEntityId:null,cascadeFieldId:null,cascadeJfieldName:null,cascadeFieldDesc:null,editFlag:!0}),pt={name:"cascadeExtList",data:function(){return{entityId:null,fieldId:null,cascadeEntityId:null,cascadeFieldList:[],activeNum:0,selectItems:[],entities:[],loading:!1}},methods:{init:function(e,t,r){this.entityId=e,this.fieldId=t,this.cascadeEntityId=r,this.initCascadeFieldOptions(),this.doQuery()},selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},initCascadeFieldOptions:function(){var e=this;this.$ajax.get("/".concat(P,"/meta_field/list"),{params:{entityId:this.cascadeEntityId}}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.cascadeFieldList=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},doQuery:function(){var e=this;this.loading=!0,this.$ajax.get("/".concat(P,"/meta_cascade_ext/list"),{params:{fieldId:this.fieldId}}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.entities=t.data,e.$emit("cascadeFieldNumChange",e.fieldId,e.entities.length)}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){e.loading=!1})},handleAdd:function(){var e=Object.assign({},mt,{entityId:this.entityId,fieldId:this.fieldId,cascadeEntityId:this.cascadeEntityId});this.entities.unshift(e)},handleEdit:function(e){n["default"].set(e,"editFlag",!0)},handleCascadeFieldChange:function(e){var t=this.cascadeFieldList.find(function(t){return t.fieldId===e.cascadeFieldId});e.alias=t.jfieldName},handleSave:function(e){var t=this,r="/".concat(P,"/meta_cascade_ext/save"),n="post";e.cascadeExtId&&(r="/".concat(P,"/meta_cascade_ext/update"),n="put");var o=this.$loading();this.$ajax[n](r,e).then(function(e){return t.$common.checkResult(e.data)}).then(function(r){return t.$common.showMsg("success","保存成功"),e.cascadeExtId||(e.cascadeExtId=r.data.cascadeExtId,t.$emit("cascadeFieldNumAdd",t.fieldId,1)),t.$ajax.get("/".concat(P,"/meta_cascade_ext/").concat(e.cascadeExtId))}).then(function(e){return t.$common.checkResult(e.data)}).then(function(t){Object.assign(e,t.data,{editFlag:!1})}).catch(function(e){return t.$common.showNotifyError(e)}).finally(function(){o&&o.close()})},handleDel:function(){var e=this;if(this.activeNum<=0)this.$common.showMsg("warning","请选择字段");else{var t=this.selectItems.map(function(e){return e.cascadeExtId}).filter(function(e){return null!=e});this.$common.confirm("是否确认删除").then(function(){if(t.length>0)return e.$ajax.put("/".concat(P,"/meta_cascade_ext/deleteBatch"),t)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){return e.doQuery()}).catch(function(t){return e.$common.showNotifyError(t)})}}}},ft=pt,ht=Object(u["a"])(ft,ut,dt,!1,null,null,null);ht.options.__file="list.vue";var bt=ht.exports,yt={"主键ID(Long)":{jfieldName:"id",fieldName:"id",fieldDesc:"主键",jfieldType:"Long",fieldType:"bigint",fieldLength:20,fieldScale:0,primaryKey:1,autoIncrement:1,defaultValue:"",notNull:1,foreignKey:0,specialField:"",fieldExample:"1",fieldComment:"主键ID",dicType:"",query:0,queryType:null,insert:0,update:0,list:1,listSort:0,show:1,editType:null,orderNo:1},"主键ID(Integer)":{jfieldName:"id",fieldName:"id",fieldDesc:"主键",jfieldType:"Integer",fieldType:"int",fieldLength:11,fieldScale:0,primaryKey:1,autoIncrement:1,defaultValue:"",notNull:1,foreignKey:0,specialField:"",fieldExample:"1",fieldComment:"主键ID",dicType:"",query:0,queryType:null,insert:0,update:0,list:1,listSort:0,show:1,editType:null,orderNo:1},"创建时间":{jfieldName:"createdTime",fieldName:"created_time",fieldDesc:"创建时间",jfieldType:"Date",fieldType:"datetime",fieldLength:0,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"createdTime",fieldExample:"2017-12-07 00:00:00",fieldComment:"创建时间【yyyy-MM-dd HH:mm:ss】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:1,show:0,editType:null,orderNo:100},"创建人":{jfieldName:"createdBy",fieldName:"created_by",fieldDesc:"创建人",jfieldType:"String",fieldType:"varchar",fieldLength:20,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"createdBy",fieldExample:"admin",fieldComment:"创建人【最大长度20】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:0,show:0,editType:null,orderNo:101},"修改时间":{jfieldName:"operatedTime",fieldName:"operated_time",fieldDesc:"修改时间",jfieldType:"Date",fieldType:"datetime",fieldLength:0,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"operatedTime",fieldExample:"2017-12-07 00:00:00",fieldComment:"修改时间【yyyy-MM-dd HH:mm:ss】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:1,show:0,editType:null,orderNo:102},"修改人":{jfieldName:"operatedBy",fieldName:"operated_by",fieldDesc:"修改人",jfieldType:"String",fieldType:"varchar",fieldLength:20,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"operatedBy",fieldExample:"admin",fieldComment:"修改人【最大长度20】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:0,show:0,editType:null,orderNo:103},"乐观锁版本号":{jfieldName:"version",fieldName:"version",fieldDesc:"乐观锁版本号",jfieldType:"Integer",fieldType:"int",fieldLength:11,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"version",fieldExample:"1",fieldComment:"乐观锁版本号【整型】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:0,show:0,editType:null,orderNo:104},"逻辑删除标识":{jfieldName:"deleted",fieldName:"deleted",fieldDesc:"逻辑删除标识",jfieldType:"Integer",fieldType:"tinyint",fieldLength:1,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"deleted",fieldExample:"0",fieldComment:"逻辑删除标识【0-未删除，1-已删除】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:0,show:0,editType:null,orderNo:105},"排序号":{jfieldName:"orderNo",fieldName:"order_no",fieldDesc:"排序号",jfieldType:"Integer",fieldType:"int",fieldLength:11,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"",fieldExample:"1",fieldComment:"排序号【整型】",dicType:"",query:0,queryType:null,insert:1,update:1,list:1,listSort:1,show:1,editType:null,orderNo:90}},gt=r("ad44"),vt=r.n(gt),jt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"meteor-container"},[r("transition",{on:{"before-enter":e.beforeEnter,enter:e.enter,"after-enter":e.afterEnter}},[e.visible?r("div",{staticClass:"meteor-body"}):e._e()])],1)},It=[],_t=r("589d"),xt=r.n(_t);function kt(e){var t={top:0,left:0};if(e.offsetParent)while(e.offsetParent)t.top+=e.offsetTop,t.left+=e.offsetLeft,e=e.offsetParent;else e.x?t.left+=e.x:e.x&&(t.top+=e.y);return{x:t.left,y:t.top}}var wt={name:"meteor",data:function(){return{visible:!1,from:{x:0,y:0},to:{x:0,y:0},curr:{x:0,y:0},duration:100}},methods:{init:function(e,t){this.from=kt(e),this.to=kt(t),this.curr=kt(this.$el)},adjust:function(e,t,r,n){this.from.x+=e,this.from.y+=t,this.to.x+=r,this.to.y+=n},show:function(e){this.duration=e,this.visible=!0},hide:function(){this.visible=!1},beforeEnter:function(e){var t=this.from.x-this.curr.x,r=this.from.y-this.curr.y;xt()(e,{opacity:.4,translateX:t+"px",translateY:r+"px"},{duration:0})},enter:function(e,t){var r=this.to.x-this.curr.x,n=this.to.y-this.curr.y;xt()(e,{opacity:1,translateX:r+"px",translateY:n+"px"},{duration:this.duration,easing:"ease-in-out",complete:t})},afterEnter:function(e){this.hide()}}},$t=wt,Nt=(r("2043"),Object(u["a"])($t,jt,It,!1,null,null,null));Nt.options.__file="meteor.vue";var Ft=Nt.exports,Et=r("2f62"),qt={name:"fieldList",props:["projectId","entityId"],components:{"cascade-ext-list":bt,meteor:Ft},data:function(){return{copyFieldUrl:vt.a.replace("uistatic","ui/static"),addTemplateFormVisible:!1,fieldTemplate:yt,templateForm:{multiple:"0",template:"",templates:[]},query:{projectId:null,entityId:null},queryForm:{projectEntityOptions:[],projectEntity:[0,0]},activeNum:0,selectItems:[],entities:[],indexes:[],loading:!1,cascadeExtListVisible:!1}},computed:Object(be["a"])({},Object(Et["d"])(["cacheFieldTemplateCount","cacheFieldTemplate"]),Object(Et["b"])(["fieldCached"])),watch:{indexes:function(e){var t=this;e&&(this.entities.forEach(function(e){e.indexes=[]}),e.forEach(function(e){e.fields.forEach(function(r){var n=t.entities.find(function(e){return e.fieldId===r.fieldId});n&&n.indexes.push(e)})}))}},filters:{optionLabel:function(e,t){var r=J[t],n=!0,o=!1,a=void 0;try{for(var i,l=r[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;if(s.value===e)return s.label}}catch(c){o=!0,a=c}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return null},lengthAndScale:function(e){var t="";return J.showFieldLength(e.fieldType)&&(t+="("+e.fieldLength,J.showFieldScale(e.fieldType)&&(t+=","+e.fieldScale),t+=")"),t}},methods:Object(be["a"])({},Object(Et["c"])(["removeFieldTemplate","addFieldTemplate"]),{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择字段"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/".concat(P,"/meta_field/deleteBatch"),e.selectItems.map(function(e){return e.fieldId}))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){return e.doQuery()}).then(function(){return e.doQueryIndex()}).catch(function(t){return e.$common.showNotifyError(t)})},handleCopy:function(){if(this.activeNum<=0)this.$common.showMsg("warning","请选择字段");else{var e=!0,t=!1,r=void 0;try{for(var n,o=this.selectItems[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;this.fieldCached(a.fieldId)||(this.addFieldTemplate(a),this.showMeteor(a.fieldId))}}catch(i){t=!0,r=i}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},showMeteor:function(e){var t=this.$refs["meteor"+e][0],r=this.$refs["copyButton"+e];t.init(r.$el,this.$refs.copyButton.$el),t.adjust(10,0,103,-8),t.show(500)},handleCopyOne:function(e){this.fieldCached(e.fieldId)||(this.addFieldTemplate(e),this.showMeteor(e.fieldId))},initProjectOptions:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.queryForm.projectEntityOptions=t.data.map(function(e){return{value:e.projectId,label:e.projectDesc,children:[]}})})},handleProjectChange:function(e){var t=this,r=e[0],n=this.queryForm.projectEntityOptions.find(function(e){return e.value===r});if(!n.children.length)return this.$common.getEntityOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){n.children=e.data.entities.map(function(e){return{value:e.entityId,label:e.title}})})},handleQuery:function(){var e=this;null!=this.queryForm.projectEntity[1]?(this.query.projectId=this.queryForm.projectEntity[0],this.query.entityId=this.queryForm.projectEntity[1],this.query.entityId!==parseInt(this.entityId)&&this.$router.push("/project/".concat(this.query.projectId,"/entity/").concat(this.query.entityId,"/field")),this.doQuery().then(function(){return e.doQueryIndex()})):this.$common.showNotifyError("请选择实体")},doQuery:function(){var e=this;if(this.query.projectId&&this.query.entityId)return this.loading=!0,this.$ajax.get("/".concat(P,"/meta_field/list"),{params:Object(be["a"])({},this.query,{withCascadeFieldNum:1})}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){t.data.forEach(function(e){e.indexes=[]}),e.entities=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){e.loading=!1})},doQueryIndex:function(){var e=this;if(this.query.projectId&&this.query.entityId)return this.loading=!0,this.$ajax.get("/".concat(P,"/meta_index/list"),{params:this.query}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.indexes=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){e.loading=!1})},handleAdd:function(){this.addTemplateFormVisible=!1;var e="system";"number"===typeof this.templateForm.template&&(e="temp"),this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field/add?type=").concat(e,"&template=").concat(this.templateForm.template))},handleAddImm:function(){var e=this;this.addTemplateFormVisible=!1;var t=this.templateForm.multiple,r=this.templateForm.templates,n=this.templateForm.template,o=function(t,r){return e.$ajax.post("/".concat(P,"/meta_field/save"),Object(be["a"])({},e.$common.removeBlankField(t),{entityId:e.entityId})).then(function(t){return e.$common.checkResult(t.data)}).then(function(){r&&(e.$common.showMsg("success","添加成功"),e.doQuery().then(function(){return e.doQueryIndex()}))}).catch(function(t){return e.$common.showNotifyError(t)})},a=function(t,r){return"number"===typeof t?e.$ajax.get("/".concat(P,"/meta_field/").concat(t)).then(function(t){return e.$common.checkResult(t.data)}).then(function(e){return o(e.data,r)}).catch(function(t){return e.$common.showNotifyError(t)}):o(yt[t],r)},i=this.$loading(),l=null;l="0"===t?a(n,!0):Promise.all(r.map(function(e){return a(e)})).then(function(){e.$common.showMsg("success","添加成功"),e.doQuery().then(function(){return e.doQueryIndex()})}),l.finally(function(){return i.close()})},handleEdit:function(e){this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field/edit/").concat(e.fieldId))},handleShow:function(e){this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field/show/").concat(e.fieldId))},handleShowCascadeExt:function(e){var t=this;this.cascadeExtListVisible=!0,n["default"].nextTick(function(){return t.$refs.cascadeExtList.init(e.entityId,e.fieldId,e.foreignEntityId)})},resetCascadeFieldNum:function(e,t){var r=this.entities.find(function(t){return t.fieldId===e});r.cascadeFieldNum=t},addCascadeFieldNum:function(e,t){var r=this.entities.find(function(t){return t.fieldId===e});r.cascadeFieldNum+=t},handleIndexCommand:function(e){this[e.method].apply(this,Object(he["a"])(e.arg))},handleDelIndexField:function(e,t){var r=this;this.$common.confirm("请确认是否从索引【".concat(e.indexName,"】中删除【").concat(t.fieldDesc,"】字段")).then(function(){return r.$ajax.put("/".concat(P,"/meta_index/").concat(e.indexId,"/removeField"),[t.fieldId])}).then(function(e){return r.$common.checkResult(e.data)}).then(function(){return r.doQueryIndex()}).catch(function(e){return r.$common.showNotifyError(e)})},handleDelIndex:function(e){var t=this;this.$common.confirm("请确认是否删除索引【".concat(e.indexName,"】")).then(function(){return t.$ajax.delete("/".concat(P,"/meta_index/").concat(e.indexId))}).then(function(e){return t.$common.checkResult(e.data)}).then(function(){return t.doQueryIndex()}).catch(function(e){return t.$common.showNotifyError(e)})},handleIndexAdd:function(){var e=this.selectItems.map(function(e){return e.fieldId}).join("-");this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field/indexAdd/").concat(e))},handleIndexEdit:function(e){this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field/indexEdit/").concat(e.indexId))}}),activated:function(){var e=this,t=parseInt(this.projectId),r=parseInt(this.entityId);this.queryForm.projectEntity[0]=t,this.queryForm.projectEntity[1]=r,this.query.projectId=t,this.query.entityId=r,this.initProjectOptions().then(function(){return e.handleProjectChange([t])}).then(function(){return e.doQuery()}).then(function(){return e.doQueryIndex()})}},Tt=qt,Ct=(r("1a83"),Object(u["a"])(Tt,st,ct,!1,null,null,null));Ct.options.__file="list.vue";var Ot=Ct.exports,Dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fieldAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/field"}}},[e._v("字段管理")]),r("el-breadcrumb-item",[e._v("添加")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"java字段名",prop:"jfieldName"}},[r("help-popover",{attrs:{name:"field.jfieldName"}},[r("el-input",{attrs:{placeholder:"java字段名，例如：age"},model:{value:e.form.jfieldName,callback:function(t){e.$set(e.form,"jfieldName",t)},expression:"form.jfieldName"}}),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.form.jfieldName=e.$common.snakeCase(e.form.jfieldName)}}},[e._v("转下划线")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.form.jfieldName=e.$common.camelCase(e.form.jfieldName)}}},[e._v("转驼峰")])],1)],1),r("el-form-item",{attrs:{label:"mysql字段名",prop:"fieldName"}},[r("help-popover",{attrs:{name:"field.fieldName"}},[r("el-input",{attrs:{placeholder:"mysql字段名，例如：age"},model:{value:e.form.fieldName,callback:function(t){e.$set(e.form,"fieldName",t)},expression:"form.fieldName"}}),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.form.fieldName=e.$common.snakeCase(e.form.fieldName)}}},[e._v("转下划线")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.form.fieldName=e.$common.camelCase(e.form.fieldName)}}},[e._v("转驼峰")])],1)],1),r("el-form-item",{attrs:{label:"字段描述",prop:"fieldDesc"}},[r("help-popover",{attrs:{name:"field.fieldDesc"}},[r("el-input",{attrs:{placeholder:"字段描述，例如：年龄"},model:{value:e.form.fieldDesc,callback:function(t){e.$set(e.form,"fieldDesc",t)},expression:"form.fieldDesc"}})],1)],1),r("el-form-item",{attrs:{label:"字段备注",prop:"fieldComment"}},[r("help-popover",{attrs:{name:"field.fieldComment"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"字段备注，例如：年龄【整型】"},model:{value:e.form.fieldComment,callback:function(t){e.$set(e.form,"fieldComment",t)},expression:"form.fieldComment"}})],1)],1),r("el-form-item",{attrs:{label:"字段示例",prop:"fieldExample"}},[r("help-popover",{attrs:{name:"field.fieldExample"}},[r("el-input",{attrs:{placeholder:"字段示例，例如年龄字段：21"},model:{value:e.form.fieldExample,callback:function(t){e.$set(e.form,"fieldExample",t)},expression:"form.fieldExample"}})],1)],1),r("el-form-item",{attrs:{label:"java字段类型",prop:"jfieldType"}},[r("help-popover",{attrs:{name:"field.jfieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.jfieldType,callback:function(t){e.$set(e.form,"jfieldType",t)},expression:"form.jfieldType"}},e._l(e.jfieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("el-form-item",{attrs:{label:"mysql字段类型",prop:"fieldType"}},[r("help-popover",{attrs:{name:"field.fieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.fieldType,callback:function(t){e.$set(e.form,"fieldType",t)},expression:"form.fieldType"}},e._l(e.fieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("el-form-item",{attrs:{label:"字段长度",prop:"fieldLength"}},[r("help-popover",{attrs:{name:"field.fieldLength"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"字段长度，例如：10"},model:{value:e.form.fieldLength,callback:function(t){e.$set(e.form,"fieldLength",t)},expression:"form.fieldLength"}})],1)],1),e.fieldScaleVisible?r("el-form-item",{attrs:{label:"字段精度",prop:"fieldScale"}},[r("help-popover",{attrs:{name:"field.fieldScale"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"字段精度，例如：2"},model:{value:e.form.fieldScale,callback:function(t){e.$set(e.form,"fieldScale",t)},expression:"form.fieldScale"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:"是否主键",prop:"primaryKey"}},[r("help-popover",{attrs:{name:"field.primaryKey"}},[r("el-radio-group",{model:{value:e.form.primaryKey,callback:function(t){e.$set(e.form,"primaryKey",t)},expression:"form.primaryKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否自增",prop:"autoIncrement"}},[r("help-popover",{attrs:{name:"field.autoIncrement"}},[r("el-radio-group",{attrs:{disabled:e.autoIncrementDisabled},model:{value:e.form.autoIncrement,callback:function(t){e.$set(e.form,"autoIncrement",t)},expression:"form.autoIncrement"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"不能为空",prop:"notNull"}},[r("help-popover",{attrs:{name:"field.notNull"}},[r("el-radio-group",{attrs:{disabled:e.notNullDisabled},model:{value:e.form.notNull,callback:function(t){e.$set(e.form,"notNull",t)},expression:"form.notNull"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否外键",prop:"foreignKey"}},[r("help-popover",{attrs:{name:"field.foreignKey"}},[r("el-radio-group",{model:{value:e.form.foreignKey,callback:function(t){e.$set(e.form,"foreignKey",t)},expression:"form.foreignKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"外键字段"}},[r("help-popover",{attrs:{name:"field.foreignField"}},[r("el-cascader",{attrs:{disabled:e.foreignFieldDisabled,placeholder:"请选择",options:e.entityFieldOptions},on:{"active-item-change":e.handleForeignEntityChange},model:{value:e.foreignField,callback:function(t){e.foreignField=t},expression:"foreignField"}})],1)],1),r("el-form-item",{attrs:{label:"特殊字段类型",prop:"specialField"}},[r("help-popover",{attrs:{name:"field.specialField"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.specialFieldDisabled,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.specialField,callback:function(t){e.$set(e.form,"specialField",t)},expression:"form.specialField"}},e._l(e.specialFieldOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("el-form-item",{attrs:{label:"枚举字典",prop:"dicType"}},[r("help-popover",{attrs:{name:"field.dicType"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{disabled:e.dicTypeDisabled,"fetch-suggestions":e.queryDicType,placeholder:"请输入枚举字典"},model:{value:e.form.dicType,callback:function(t){e.$set(e.form,"dicType",t)},expression:"form.dicType"}})],1)],1),r("el-form-item",{attrs:{label:"是否查询字段",prop:"query"}},[r("help-popover",{attrs:{name:"field.query"}},[r("el-radio-group",{model:{value:e.form.query,callback:function(t){e.$set(e.form,"query",t)},expression:"form.query"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"查询方式",prop:"queryType"}},[r("help-popover",{attrs:{name:"field.queryType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.queryTypeDisabled,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.queryType,callback:function(t){e.$set(e.form,"queryType",t)},expression:"form.queryType"}},e._l(e.queryTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("el-form-item",{attrs:{label:"是否新增字段",prop:"insert"}},[r("help-popover",{attrs:{name:"field.insert"}},[r("el-radio-group",{model:{value:e.form.insert,callback:function(t){e.$set(e.form,"insert",t)},expression:"form.insert"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否编辑字段",prop:"update"}},[r("help-popover",{attrs:{name:"field.update"}},[r("el-radio-group",{model:{value:e.form.update,callback:function(t){e.$set(e.form,"update",t)},expression:"form.update"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否列表字段",prop:"list"}},[r("help-popover",{attrs:{name:"field.list"}},[r("el-radio-group",{model:{value:e.form.list,callback:function(t){e.$set(e.form,"list",t)},expression:"form.list"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否支持排序",prop:"listSort"}},[r("help-popover",{attrs:{name:"field.listSort"}},[r("el-radio-group",{model:{value:e.form.listSort,callback:function(t){e.$set(e.form,"listSort",t)},expression:"form.listSort"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否详情字段",prop:"show"}},[r("help-popover",{attrs:{name:"field.show"}},[r("el-radio-group",{model:{value:e.form.show,callback:function(t){e.$set(e.form,"show",t)},expression:"form.show"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"排序号",prop:"orderNo"}},[r("help-popover",{attrs:{name:"field.orderNo"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},St=[];function Rt(e){var t={entityId:null,jfieldName:"",fieldName:"",fieldDesc:"",jfieldType:"",fieldType:"",fieldLength:0,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:0,foreignKey:0,foreignEntityId:null,foreignFieldId:null,specialField:"",fieldExample:"",fieldComment:"",dicType:"",query:0,queryType:null,insert:1,update:1,list:1,listSort:0,show:1,editType:null,orderNo:1};return e&&(t["fieldId"]=null),t}function Lt(e){return{jfieldName:[{required:!0,message:"请输入java字段名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],fieldName:[{required:!0,message:"请输入mysql字段名",trigger:"blur"},{max:64,message:"长度不能超过64个字符",trigger:"blur"}],fieldDesc:[{required:!0,message:"请输入字段描述",trigger:"blur"},{max:40,message:"长度不能超过40个字符",trigger:"blur"}],jfieldType:[{required:!0,type:"string",message:"请选择java字段类型",trigger:"change"}],fieldType:[{required:!0,type:"string",message:"请选择mysql字段类型",trigger:"change"}],fieldLength:[{required:!0,message:"请输入字段长度",trigger:"blur"}],fieldScale:[{required:!0,message:"请输入字段精度",trigger:"blur"}],primaryKey:[{required:!0,type:"number",message:"请选择是否主键",trigger:"change"}],autoIncrement:[{required:!0,type:"number",message:"请选择是否自增",trigger:"change"}],notNull:[{required:!0,type:"number",message:"请选择不能为空",trigger:"change"}],foreignKey:[{required:!0,type:"number",message:"请选择是否外键",trigger:"change"}],fieldExample:[{required:!0,message:"请输入字段示例",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],fieldComment:[{required:!0,message:"请输入字段备注",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],dicType:[{max:40,message:"长度不能超过40个字符",trigger:"blur"}],query:[{required:!0,type:"number",message:"请选择是否查询字段",trigger:"change"}],queryType:[{validator:function(t,r,n){r||1!==e.form.query?n():n(new Error("请选择查询方式"))},trigger:"change"}],insert:[{required:!0,type:"number",message:"请选择是否新增字段",trigger:"change"}],update:[{required:!0,type:"number",message:"请选择是否编辑字段",trigger:"change"}],list:[{required:!0,type:"number",message:"请选择是否列表字段",trigger:"change"}],listSort:[{required:!0,type:"number",message:"请选择是否支持排序",trigger:"change"}],show:[{required:!0,type:"number",message:"请选择是否详情字段",trigger:"change"}],orderNo:[{required:!0,message:"请输入排序号",trigger:"blur"}]}}function Bt(e){var t={entityId:null,indexName:"",unique:0,uniqueCheck:0,fieldIds:[]};return e&&(t["indexId"]=null),t}function At(){return{indexName:[{required:!0,message:"请输入索引名",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],unique:[{required:!0,type:"number",message:"请选择是否唯一",trigger:"change"}],uniqueCheck:[{required:!0,type:"number",message:"请选择唯一性校验",trigger:"change"}],fieldIds:[{required:!0,type:"array",message:"请选择字段",trigger:"change"}]}}var Mt={name:"fieldAdd",props:["projectId","entityId"],data:function(){return{boolOptions:J.boolOptions,fieldTypeOptions:J.fieldTypeOptions,jfieldTypeOptions:J.jfieldTypeOptions,queryTypeOptions:J.queryTypeOptions,specialFieldOptions:J.specialFieldOptions,entityFieldOptions:[],constList:null,notNullDisabled:!1,autoIncrementDisabled:!0,queryTypeDisabled:!0,specialFieldDisabled:!1,foreignField:[0,0],foreignFieldDisabled:!0,form:Rt(!1),rules:Lt(this)}},computed:{dicTypeDisabled:function(){return!(1!==this.form.primaryKey&&!this.form.specialField)},fieldScaleVisible:function(){return J.showFieldScale(this.form.fieldType)}},watch:{"form.primaryKey":function(e){1===e?(this.form.notNull=1,this.notNullDisabled=!0,this.form.specialField="",this.specialFieldDisabled=!0,this.autoIncrementDisabled=!1):(this.notNullDisabled=!1,this.specialFieldDisabled=!1,this.form.autoIncrement=0,this.autoIncrementDisabled=!0)},"form.foreignKey":function(e){this.foreignFieldDisabled=1!==e},"form.query":function(e){1===e?this.queryTypeDisabled=!1:(this.queryTypeDisabled=!0,this.queryType="")},dicTypeDisabled:function(e){e&&(this.form.dicType="")}},methods:{initForeignEntityOptions:function(){var e=this;return this.$common.getEntityOptions(this.projectId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.entityFieldOptions=t.data.entities.map(function(e){return{value:e.entityId,label:e.title,children:[]}})})},handleForeignEntityChange:function(e){var t=this,r=e[0],n=this.entityFieldOptions.find(function(e){return e.value===r});if(!n.children.length)return this.$common.getFieldOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){n.children=e.data.filter(function(e){return 1===e.primaryKey}).map(function(e){return{value:e.fieldId,label:e.fieldDesc}})})},queryDicType:function(e,t){var r=this,n=function(){var n=r.constList.slice(0);n.push.apply(n,Object(he["a"])(J.defaultConstList));var o=e?n.filter(function(t){return 0===t.constName.toLowerCase().indexOf(e.toLowerCase())}):n;t(o.map(function(e){return{value:e.constName}}))};this.constList?n():this.$common.getConstOptions(this.projectId).then(function(e){return r.$common.checkResult(e.data)}).then(function(e){r.constList=e.data.entities,n()})},submit:function(){var e=this;J.showFieldScale(this.form.fieldType)||(this.form.fieldScale=null),this.form.foreignEntityId=this.foreignField[0],this.form.foreignFieldId=this.foreignField[1];var t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/".concat(P,"/meta_field/save"),e.$common.removeBlankField(e.form))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field"))}},created:function(){var e=this,t=parseInt(this.entityId);this.form.entityId=t;var r=this.initForeignEntityOptions(),n=this.$router.currentRoute.query.type,o=this.$router.currentRoute.query.template;if(o&&("system"===n&&(this.form=yt[o],this.form.entityId=t),"temp"===n)){var a=this.$ajax.get("/".concat(P,"/meta_field/").concat(o)).then(function(t){return e.$common.checkResult(t.data)}).then(function(r){return new Promise(function(n,o){return e.form=r.data,e.form.entityId=t,n()})});Promise.all([r,a]).then(function(){if(e.form.foreignFieldId&&e.form.foreignEntityId)return e.handleForeignEntityChange([e.form.foreignEntityId]).then(function(){e.foreignField=[e.form.foreignEntityId,e.form.foreignFieldId]})}).catch(function(t){return e.$common.showNotifyError(t)})}}},Pt=Mt,zt=(r("cc96"),Object(u["a"])(Pt,Dt,St,!1,null,null,null));zt.options.__file="add.vue";var Vt=zt.exports,Kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fieldEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/field"}}},[e._v("字段管理")]),r("el-breadcrumb-item",[e._v("编辑")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"java字段名",prop:"jfieldName"}},[r("help-popover",{attrs:{name:"field.jfieldName"}},[r("el-input",{attrs:{placeholder:"java字段名，例如：age"},model:{value:e.form.jfieldName,callback:function(t){e.$set(e.form,"jfieldName",t)},expression:"form.jfieldName"}}),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.form.jfieldName=e.$common.snakeCase(e.form.jfieldName)}}},[e._v("转下划线")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.form.jfieldName=e.$common.camelCase(e.form.jfieldName)}}},[e._v("转驼峰")])],1)],1),r("el-form-item",{attrs:{label:"mysql字段名",prop:"fieldName"}},[r("help-popover",{attrs:{name:"field.fieldName"}},[r("el-input",{attrs:{placeholder:"mysql字段名，例如：age"},model:{value:e.form.fieldName,callback:function(t){e.$set(e.form,"fieldName",t)},expression:"form.fieldName"}}),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.form.fieldName=e.$common.snakeCase(e.form.fieldName)}}},[e._v("转下划线")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.form.fieldName=e.$common.camelCase(e.form.fieldName)}}},[e._v("转驼峰")])],1)],1),r("el-form-item",{attrs:{label:"字段描述",prop:"fieldDesc"}},[r("help-popover",{attrs:{name:"field.fieldDesc"}},[r("el-input",{attrs:{placeholder:"字段描述，例如：年龄"},model:{value:e.form.fieldDesc,callback:function(t){e.$set(e.form,"fieldDesc",t)},expression:"form.fieldDesc"}})],1)],1),r("el-form-item",{attrs:{label:"字段备注",prop:"fieldComment"}},[r("help-popover",{attrs:{name:"field.fieldComment"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"字段备注，例如：年龄【整型】"},model:{value:e.form.fieldComment,callback:function(t){e.$set(e.form,"fieldComment",t)},expression:"form.fieldComment"}})],1)],1),r("el-form-item",{attrs:{label:"字段示例",prop:"fieldExample"}},[r("help-popover",{attrs:{name:"field.fieldExample"}},[r("el-input",{attrs:{placeholder:"字段示例，例如年龄字段：21"},model:{value:e.form.fieldExample,callback:function(t){e.$set(e.form,"fieldExample",t)},expression:"form.fieldExample"}})],1)],1),r("el-form-item",{attrs:{label:"java字段类型",prop:"jfieldType"}},[r("help-popover",{attrs:{name:"field.jfieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.jfieldType,callback:function(t){e.$set(e.form,"jfieldType",t)},expression:"form.jfieldType"}},e._l(e.jfieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("el-form-item",{attrs:{label:"mysql字段类型",prop:"fieldType"}},[r("help-popover",{attrs:{name:"field.fieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.fieldType,callback:function(t){e.$set(e.form,"fieldType",t)},expression:"form.fieldType"}},e._l(e.fieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("el-form-item",{attrs:{label:"字段长度",prop:"fieldLength"}},[r("help-popover",{attrs:{name:"field.fieldLength"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"字段长度，例如：10"},model:{value:e.form.fieldLength,callback:function(t){e.$set(e.form,"fieldLength",t)},expression:"form.fieldLength"}})],1)],1),e.fieldScaleVisible?r("el-form-item",{attrs:{label:"字段精度",prop:"fieldScale"}},[r("help-popover",{attrs:{name:"field.fieldScale"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"字段精度，例如：2"},model:{value:e.form.fieldScale,callback:function(t){e.$set(e.form,"fieldScale",t)},expression:"form.fieldScale"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:"是否主键",prop:"primaryKey"}},[r("help-popover",{attrs:{name:"field.primaryKey"}},[r("el-radio-group",{model:{value:e.form.primaryKey,callback:function(t){e.$set(e.form,"primaryKey",t)},expression:"form.primaryKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否自增",prop:"autoIncrement"}},[r("help-popover",{attrs:{name:"field.autoIncrement"}},[r("el-radio-group",{attrs:{disabled:e.autoIncrementDisabled},model:{value:e.form.autoIncrement,callback:function(t){e.$set(e.form,"autoIncrement",t)},expression:"form.autoIncrement"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"不能为空",prop:"notNull"}},[r("help-popover",{attrs:{name:"field.notNull"}},[r("el-radio-group",{attrs:{disabled:e.notNullDisabled},model:{value:e.form.notNull,callback:function(t){e.$set(e.form,"notNull",t)},expression:"form.notNull"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否外键",prop:"foreignKey"}},[r("help-popover",{attrs:{name:"field.foreignKey"}},[r("el-radio-group",{model:{value:e.form.foreignKey,callback:function(t){e.$set(e.form,"foreignKey",t)},expression:"form.foreignKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"外键字段"}},[r("help-popover",{attrs:{name:"field.foreignField"}},[r("el-cascader",{attrs:{disabled:e.foreignFieldDisabled,placeholder:"请选择",options:e.entityFieldOptions},on:{"active-item-change":e.handleForeignEntityChange},model:{value:e.foreignField,callback:function(t){e.foreignField=t},expression:"foreignField"}})],1)],1),r("el-form-item",{attrs:{label:"特殊字段类型",prop:"specialField"}},[r("help-popover",{attrs:{name:"field.specialField"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.specialFieldDisabled,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.specialField,callback:function(t){e.$set(e.form,"specialField",t)},expression:"form.specialField"}},e._l(e.specialFieldOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("el-form-item",{attrs:{label:"枚举字典",prop:"dicType"}},[r("help-popover",{attrs:{name:"field.dicType"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{disabled:e.dicTypeDisabled,"fetch-suggestions":e.queryDicType,placeholder:"请输入枚举字典"},model:{value:e.form.dicType,callback:function(t){e.$set(e.form,"dicType",t)},expression:"form.dicType"}})],1)],1),r("el-form-item",{attrs:{label:"是否查询字段",prop:"query"}},[r("help-popover",{attrs:{name:"field.query"}},[r("el-radio-group",{model:{value:e.form.query,callback:function(t){e.$set(e.form,"query",t)},expression:"form.query"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"查询方式",prop:"queryType"}},[r("help-popover",{attrs:{name:"field.queryType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.queryTypeDisabled,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.queryType,callback:function(t){e.$set(e.form,"queryType",t)},expression:"form.queryType"}},e._l(e.queryTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("el-form-item",{attrs:{label:"是否新增字段",prop:"insert"}},[r("help-popover",{attrs:{name:"field.insert"}},[r("el-radio-group",{model:{value:e.form.insert,callback:function(t){e.$set(e.form,"insert",t)},expression:"form.insert"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否编辑字段",prop:"update"}},[r("help-popover",{attrs:{name:"field.update"}},[r("el-radio-group",{model:{value:e.form.update,callback:function(t){e.$set(e.form,"update",t)},expression:"form.update"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否列表字段",prop:"list"}},[r("help-popover",{attrs:{name:"field.list"}},[r("el-radio-group",{model:{value:e.form.list,callback:function(t){e.$set(e.form,"list",t)},expression:"form.list"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否支持排序",prop:"listSort"}},[r("help-popover",{attrs:{name:"field.listSort"}},[r("el-radio-group",{model:{value:e.form.listSort,callback:function(t){e.$set(e.form,"listSort",t)},expression:"form.listSort"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"是否详情字段",prop:"show"}},[r("help-popover",{attrs:{name:"field.show"}},[r("el-radio-group",{model:{value:e.form.show,callback:function(t){e.$set(e.form,"show",t)},expression:"form.show"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",{attrs:{label:"排序号",prop:"orderNo"}},[r("help-popover",{attrs:{name:"field.orderNo"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.reset()}}},[e._v("重置")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},Qt=[],Gt={name:"fieldEdit",props:["projectId","entityId","fieldId"],data:function(){return{boolOptions:J.boolOptions,fieldTypeOptions:J.fieldTypeOptions,jfieldTypeOptions:J.jfieldTypeOptions,queryTypeOptions:J.queryTypeOptions,specialFieldOptions:J.specialFieldOptions,entityFieldOptions:[],constList:null,notNullDisabled:!1,autoIncrementDisabled:!0,queryTypeDisabled:!0,specialFieldDisabled:!1,foreignField:[0,0],foreignFieldDisabled:!0,old:Rt(!0),form:Rt(!0),rules:Lt(this)}},computed:{dicTypeDisabled:function(){return!(1!==this.form.primaryKey&&!this.form.specialField)},fieldScaleVisible:function(){return J.showFieldScale(this.form.fieldType)}},watch:{"form.primaryKey":function(e){1===e?(this.form.notNull=1,this.notNullDisabled=!0,this.form.specialField="",this.specialFieldDisabled=!0,this.autoIncrementDisabled=!1):(this.notNullDisabled=!1,this.specialFieldDisabled=!1,this.form.autoIncrement=0,this.autoIncrementDisabled=!0)},"form.foreignKey":function(e){this.foreignFieldDisabled=1!==e},"form.query":function(e){1===e?this.queryTypeDisabled=!1:(this.queryTypeDisabled=!0,this.queryType="")},dicTypeDisabled:function(e){e&&(this.form.dicType="")}},methods:{initForeignEntityOptions:function(){var e=this;return this.$common.getEntityOptions(this.projectId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.entityFieldOptions=t.data.entities.map(function(e){return{value:e.entityId,label:e.title,children:[]}})})},handleForeignEntityChange:function(e){var t=this,r=e[0],n=this.entityFieldOptions.find(function(e){return e.value===r});if(!n.children.length)return this.$common.getFieldOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){n.children=e.data.filter(function(e){return 1===e.primaryKey}).map(function(e){return{value:e.fieldId,label:e.fieldDesc}})})},queryDicType:function(e,t){var r=this,n=function(){var n=r.constList.slice(0);n.push.apply(n,Object(he["a"])(J.defaultConstList));var o=e?n.filter(function(t){return 0===t.constName.toLowerCase().indexOf(e.toLowerCase())}):n;t(o.map(function(e){return{value:e.constName}}))};this.constList?n():this.$common.getConstOptions(this.projectId).then(function(e){return r.$common.checkResult(e.data)}).then(function(e){r.constList=e.data.entities,n()})},getField:function(){var e=this;return this.$ajax.get("/".concat(P,"/meta_field/").concat(this.fieldId)).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Rt(!0))this.form[e]=this.old[e]},submit:function(){var e=this;J.showFieldScale(this.form.fieldType)||(this.form.fieldScale=null),this.form.foreignEntityId=this.foreignField[0],this.form.foreignFieldId=this.foreignField[1];var t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/".concat(P,"/meta_field/update"),e.$common.removeBlankField(e.form))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field"))}},created:function(){var e=this;Promise.all([this.getField(),this.initForeignEntityOptions()]).then(function(){return e.reset()}).then(function(){return e.handleForeignEntityChange([e.form.foreignEntityId])}).then(function(){e.foreignField=[e.form.foreignEntityId,e.form.foreignFieldId]})}},Ut=Gt,Ht=(r("fd1b"),Object(u["a"])(Ut,Kt,Qt,!1,null,null,null));Ht.options.__file="edit.vue";var Jt=Ht.exports,Wt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"indexAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/field"}}},[e._v("字段管理")]),r("el-breadcrumb-item",[e._v("添加索引")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"索引名",prop:"indexName"}},[r("help-popover",{attrs:{name:"index.indexName"}},[r("el-input",{attrs:{placeholder:"索引名，例如：IDX_ORDER_1"},model:{value:e.form.indexName,callback:function(t){e.$set(e.form,"indexName",t)},expression:"form.indexName"}})],1)],1),r("el-form-item",{attrs:{label:"字段",prop:"fieldIds"}},[r("help-popover",{attrs:{name:"index.fieldIds"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.fieldIds,callback:function(t){e.$set(e.form,"fieldIds",t)},expression:"form.fieldIds"}},e._l(e.fieldList,function(e){return r("el-option",{key:e.fieldId,attrs:{label:e.fieldName,value:e.fieldId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"是否唯一",prop:"unique"}},[r("help-popover",{attrs:{name:"index.unique"}},[r("el-radio-group",{model:{value:e.form.unique,callback:function(t){e.$set(e.form,"unique",t)},expression:"form.unique"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"唯一性校验",prop:"uniqueCheck"}},[r("help-popover",{attrs:{name:"index.uniqueCheck"}},[r("el-radio-group",{attrs:{disabled:e.uniqueCheckDisabled},model:{value:e.form.uniqueCheck,callback:function(t){e.$set(e.form,"uniqueCheck",t)},expression:"form.uniqueCheck"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},Xt=[],Yt={name:"indexAdd",props:["projectId","entityId","fieldIds"],data:function(){return{boolOptions:J.boolOptions,fieldList:[],form:Bt(!1),uniqueCheckDisabled:!1,rules:At()}},watch:{"form.indexName":function(e){var t=/[a-z]/i;t.test(e)&&(this.form.indexName=e.toUpperCase())},"form.unique":function(e){1===e?(this.form.uniqueCheck=1,this.uniqueCheckDisabled=!0):this.uniqueCheckDisabled=!1}},methods:{queryField:function(e){var t=this;return this.$common.getFieldOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){t.fieldList=e.data})},submit:function(){var e=this,t=Object(be["a"])({},this.form);t.fieldIds=this.form.fieldIds.join(",");var r=null;this.$refs.addForm.validate().then(function(){return r=e.$loading(),e.$ajax.post("/".concat(P,"/meta_index/save"),e.$common.removeBlankField(t))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){r&&r.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field"))}},created:function(){this.form.entityId=parseInt(this.entityId),this.fieldIds&&(this.form.fieldIds=this.fieldIds.split("-").map(function(e){return parseInt(e)})),this.queryField(this.form.entityId)}},Zt=Yt,er=(r("60c9"),Object(u["a"])(Zt,Wt,Xt,!1,null,null,null));er.options.__file="indexAdd.vue";var tr=er.exports,rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"indexEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/field"}}},[e._v("字段管理")]),r("el-breadcrumb-item",[e._v("编辑索引")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"索引名",prop:"indexName"}},[r("help-popover",{attrs:{name:"index.indexName"}},[r("el-input",{attrs:{placeholder:"索引名，例如：IDX_ORDER_1"},model:{value:e.form.indexName,callback:function(t){e.$set(e.form,"indexName",t)},expression:"form.indexName"}})],1)],1),r("el-form-item",{attrs:{label:"字段",prop:"fieldIds"}},[r("help-popover",{attrs:{name:"index.fieldIds"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.fieldIds,callback:function(t){e.$set(e.form,"fieldIds",t)},expression:"form.fieldIds"}},e._l(e.fieldList,function(e){return r("el-option",{key:e.fieldId,attrs:{label:e.fieldName,value:e.fieldId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"是否唯一",prop:"unique"}},[r("help-popover",{attrs:{name:"index.unique"}},[r("el-radio-group",{model:{value:e.form.unique,callback:function(t){e.$set(e.form,"unique",t)},expression:"form.unique"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",{attrs:{label:"唯一性校验",prop:"uniqueCheck"}},[r("help-popover",{attrs:{name:"index.uniqueCheck"}},[r("el-radio-group",{attrs:{disabled:e.uniqueCheckDisabled},model:{value:e.form.uniqueCheck,callback:function(t){e.$set(e.form,"uniqueCheck",t)},expression:"form.uniqueCheck"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}),1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.reset()}}},[e._v("重置")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},nr=[],or={name:"indexEdit",props:["projectId","entityId","indexId"],data:function(){return{boolOptions:J.boolOptions,fieldList:[],old:Bt(!0),form:Bt(!0),uniqueCheckDisabled:!1,rules:At()}},watch:{"form.indexName":function(e){var t=/[a-z]/i;t.test(e)&&(this.form.indexName=e.toUpperCase())},"form.unique":function(e){1===e?(this.form.uniqueCheck=1,this.uniqueCheckDisabled=!0):this.uniqueCheckDisabled=!1}},methods:{queryField:function(e){var t=this;return this.$common.getFieldOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){t.fieldList=e.data})},getIndex:function(){var e=this;return this.$ajax.get("/".concat(P,"/meta_index/").concat(this.indexId)).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){var r=Object(be["a"])({},t.data);r.fieldIds=r.fields.map(function(e){return e.fieldId}),r.fields=null,e.old=r}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Bt(!0))this.form[e]=this.old[e]},submit:function(){var e=this,t=Object(be["a"])({},this.form);t.fieldIds=this.form.fieldIds.join(",");var r=null;this.$refs.editForm.validate().then(function(){return r=e.$loading(),e.$ajax.put("/".concat(P,"/meta_index/update"),e.$common.removeBlankField(t))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){r&&r.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/entity/").concat(this.entityId,"/field"))}},created:function(){var e=this;Promise.all([this.getIndex(),this.queryField(this.entityId)]).then(function(){return e.reset()})}},ar=or,ir=(r("4eba"),Object(u["a"])(ar,rr,nr,!1,null,null,null));ir.options.__file="indexEdit.vue";var lr=ir.exports,sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[r("keep-alive",{attrs:{include:"constList"}},[r("router-view")],1)],1)],1)},cr=[],ur={},dr=Object(u["a"])(ur,sr,cr,!1,null,null,null);dr.options.__file="index.vue";var mr=dr.exports,pr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",[e._v("枚举管理")])],1),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:6}},[e._v("\n      已选择"+e._s(e.activeNum)+"个枚举\n    ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"请选择项目"},on:{change:e.handleQuery},model:{value:e.queryForm.projectId,callback:function(t){e.$set(e.queryForm,"projectId",t)},expression:"queryForm.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectDesc,value:e.projectId}})}),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加枚举")]),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除枚举")])],1)],1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"constTable",staticStyle:{width:"100%"},attrs:{data:e.page.entities},on:{"selection-change":e.selectionChange,"expand-change":e.expandChange}},[r("el-table-column",{attrs:{type:"expand",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}],staticClass:"detailTable",attrs:{data:e.detailList,"show-header":!1}},[r("el-table-column",{attrs:{width:"100"}}),r("el-table-column",{attrs:{property:"detailRemark",label:"备注",width:"250"}}),r("el-table-column",{attrs:{property:"detailName",label:"枚举字段名",width:"250"}}),r("el-table-column",{attrs:{property:"detailValue",label:"枚举值"}}),r("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(n){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleDetailEdit(t.row,n.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleDetailDel(t.row,n.row)}}},[e._v("删除")])]}}])})],1)]}}])}),r("el-table-column",{attrs:{type:"selection",width:"50"}}),r("el-table-column",{attrs:{property:"constRemark",label:"枚举名称 / 值描述",width:"250"}}),r("el-table-column",{attrs:{property:"constName",label:"枚举类名 / 字段名",width:"250"}}),r("el-table-column",{attrs:{label:"类型 / 枚举值"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("optionLabel")(t.row.constType,"constTypeOptions"))+"\n      ")]}}])}),r("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleDetailAdd(t.row)}}},[e._v("添加枚举值")])]}}])})],1),r("el-row",{staticStyle:{padding:"20px 0"},attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.page.pageNo,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"sizes, prev, pager, next",total:e.page.entityCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},fr=[],hr={name:"constList",props:["projectId","constId"],data:function(){return{query:{projectId:null},queryForm:{projectId:null},projectList:[],activeNum:0,selectItems:[],page:{pageNo:1,entityCount:0,pageSize:20,entities:[]},expandedRow:null,loading:!1,detailList:[],detailLoading:!1}},filters:{optionLabel:function(e,t){var r=J[t],n=!0,o=!1,a=void 0;try{for(var i,l=r[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;if(s.value===e)return s.label}}catch(c){o=!0,a=c}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return null}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择枚举"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/".concat(P,"/meta_const/deleteBatch"),e.selectItems.map(function(e){return e.constId}))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){return e.doQuery()}).catch(function(t){return e.$common.showNotifyError(t)})},sizeChange:function(e){this.page.pageSize=e,this.doQuery()},currentChange:function(e){this.page.pageNo=e,this.doQuery()},queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.projectList=t.data})},handleQuery:function(){this.query=Object(be["a"])({},this.queryForm),this.query.projectId!==parseInt(this.projectId)&&this.$router.push("/project/".concat(this.query.projectId,"/const")),this.doQuery()},doQuery:function(){var e=this;if(this.query.projectId){var t=Object(be["a"])({},this.query,{pageNo:this.page.pageNo,pageSize:this.page.pageSize});return this.loading=!0,this.$ajax.get("/".concat(P,"/meta_const/list"),{params:t}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.page=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){e.loading=!1})}},handleAdd:function(){this.$router.push("/project/".concat(this.projectId,"/const/add"))},handleEdit:function(e){this.$router.push("/project/".concat(this.projectId,"/const/edit/").concat(e.constId))},handleShow:function(e){this.$router.push("/project/".concat(this.projectId,"/const/show/").concat(e.constId))},expandChange:function(e,t){if(t&&t.length>1){var r=t.find(function(t){return t!==e});this.$refs.constTable.toggleRowExpansion(r,!1)}t&&1===t.length&&this.expandedRow!==e&&(this.doDetailQuery(t[0].constId),this.expandedRow=t[0]),t&&0!==t.length||(this.expandedRow=null,this.detailList=[])},doDetailQuery:function(e){var t=this;this.detailLoading=!0,this.$ajax.get("/".concat(P,"/meta_const_detail/list"),{params:{projectId:this.query.projectId,constId:e}}).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){t.detailList=e.data}).catch(function(e){return t.$common.showNotifyError(e)}).finally(function(){t.detailLoading=!1})},handleDetailAdd:function(e){this.$router.push("/project/".concat(this.projectId,"/const/").concat(e.constId,"/constDetailAdd"))},handleDetailEdit:function(e,t){this.$router.push("/project/".concat(this.projectId,"/const/").concat(e.constId,"/constDetailEdit/").concat(t.constDetailId))},handleDetailDel:function(e,t){var r=this;this.$common.confirm("是否确认删除枚举值").then(function(){return r.$ajax.put("/".concat(P,"/meta_const_detail/deleteBatch"),[t.constDetailId])}).then(function(e){return r.$common.checkResult(e.data)}).then(function(){return r.doDetailQuery(e.constId)}).catch(function(e){return r.$common.showNotifyError(e)})}},activated:function(){var e=this;this.queryProject().then(function(){e.queryForm.projectId=parseInt(e.projectId),e.query.projectId=e.queryForm.projectId}).then(function(){return e.doQuery()}).then(function(){if(e.constId){var t=e.page.entities.find(function(t){return t.constId===parseInt(e.constId)});e.$refs.constTable.toggleRowExpansion(t,!0)}})}},br=hr,yr=(r("6969"),Object(u["a"])(br,pr,fr,!1,null,null,null));yr.options.__file="list.vue";var gr=yr.exports,vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),r("el-breadcrumb-item",[e._v("添加枚举")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"const.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectDesc,value:e.projectId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"枚举名称",prop:"constRemark"}},[r("help-popover",{attrs:{name:"const.constRemark"}},[r("el-input",{attrs:{placeholder:"例如：性别"},model:{value:e.form.constRemark,callback:function(t){e.$set(e.form,"constRemark",t)},expression:"form.constRemark"}})],1)],1),r("el-form-item",{attrs:{label:"枚举类名",prop:"constName"}},[r("help-popover",{attrs:{name:"const.constName"}},[r("el-input",{attrs:{placeholder:"例如：Sex"},model:{value:e.form.constName,callback:function(t){e.$set(e.form,"constName",t)},expression:"form.constName"}})],1)],1),r("el-form-item",{attrs:{label:"类型",prop:"constType"}},[r("help-popover",{attrs:{name:"const.constType"}},[r("el-radio-group",{model:{value:e.form.constType,callback:function(t){e.$set(e.form,"constType",t)},expression:"form.constType"}},e._l(e.constTypeOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},jr=[];function Ir(e){var t={projectId:null,constRemark:"",constName:"",constType:""};return e&&(t["constId"]=null),t}function _r(){return{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],constRemark:[{required:!0,message:"请输入枚举名称",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],constName:[{required:!0,message:"请输入枚举类名",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],constType:[{required:!0,type:"number",message:"请选择类型",trigger:"change"}]}}function xr(e){var t={constId:null,detailName:"",detailValue:"",detailRemark:""};return e&&(t["constDetailId"]=null),t}function kr(){return{detailName:[{required:!0,message:"请输入枚举字段名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],detailValue:[{required:!0,message:"请输入枚举值",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],detailRemark:[{required:!0,message:"请输入值描述",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}]}}var wr={name:"constAdd",props:["projectId"],data:function(){return{constTypeOptions:J.constTypeOptions,projectList:[],form:Ir(!1),rules:_r()}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.projectList=t.data})},submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/".concat(P,"/meta_const/save"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/const"))}},created:function(){var e=this;this.queryProject().then(function(){e.form.projectId=parseInt(e.projectId)})}},$r=wr,Nr=(r("524a"),Object(u["a"])($r,vr,jr,!1,null,null,null));Nr.options.__file="add.vue";var Fr=Nr.exports,Er=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),r("el-breadcrumb-item",[e._v("编辑枚举")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"const.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectDesc,value:e.projectId}})}),1)],1)],1),r("el-form-item",{attrs:{label:"枚举名称",prop:"constRemark"}},[r("help-popover",{attrs:{name:"const.constRemark"}},[r("el-input",{attrs:{placeholder:"例如：性别"},model:{value:e.form.constRemark,callback:function(t){e.$set(e.form,"constRemark",t)},expression:"form.constRemark"}})],1)],1),r("el-form-item",{attrs:{label:"枚举类名",prop:"constName"}},[r("help-popover",{attrs:{name:"const.constName"}},[r("el-input",{attrs:{placeholder:"例如：Sex"},model:{value:e.form.constName,callback:function(t){e.$set(e.form,"constName",t)},expression:"form.constName"}})],1)],1),r("el-form-item",{attrs:{label:"类型",prop:"constType"}},[r("help-popover",{attrs:{name:"const.constType"}},[r("el-radio-group",{model:{value:e.form.constType,callback:function(t){e.$set(e.form,"constType",t)},expression:"form.constType"}},e._l(e.constTypeOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}),1)],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.reset()}}},[e._v("重置")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},qr=[],Tr={name:"constEdit",props:["projectId","constId"],data:function(){return{constTypeOptions:J.constTypeOptions,projectList:[],old:Ir(!0),form:Ir(!0),rules:_r()}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.projectList=t.data})},getConst:function(){var e=this;return this.$ajax.get("/".concat(P,"/meta_const/").concat(this.constId)).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Ir(!0))this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/".concat(P,"/meta_const/update"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/const"))}},created:function(){var e=this;Promise.all([this.getConst(),this.queryProject()]).then(function(){return e.reset()})}},Cr=Tr,Or=(r("ea0c"),Object(u["a"])(Cr,Er,qr,!1,null,null,null));Or.options.__file="edit.vue";var Dr=Or.exports,Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constDetailAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),r("el-breadcrumb-item",[e._v("添加枚举值")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"字段名",prop:"detailName"}},[r("help-popover",{attrs:{name:"constDetail.detailName"}},[r("el-input",{attrs:{placeholder:"枚举字段名，例如：WOMAN"},model:{value:e.form.detailName,callback:function(t){e.$set(e.form,"detailName",t)},expression:"form.detailName"}})],1)],1),r("el-form-item",{attrs:{label:"枚举值",prop:"detailValue"}},[r("help-popover",{attrs:{name:"constDetail.detailValue"}},[r("el-input",{attrs:{placeholder:"枚举值，例如：2"},model:{value:e.form.detailValue,callback:function(t){e.$set(e.form,"detailValue",t)},expression:"form.detailValue"}})],1)],1),r("el-form-item",{attrs:{label:"值描述",prop:"detailRemark"}},[r("help-popover",{attrs:{name:"constDetail.detailRemark"}},[r("el-input",{attrs:{placeholder:"值描述，例如：女"},model:{value:e.form.detailRemark,callback:function(t){e.$set(e.form,"detailRemark",t)},expression:"form.detailRemark"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},Rr=[],Lr={name:"constDetailAdd",props:["projectId","constId"],data:function(){return{form:xr(!1),rules:kr()}},methods:{submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/".concat(P,"/meta_const_detail/save"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/const/").concat(this.constId))}},created:function(){this.form.constId=parseInt(this.constId)}},Br=Lr,Ar=(r("5235"),Object(u["a"])(Br,Sr,Rr,!1,null,null,null));Ar.options.__file="detailAdd.vue";var Mr=Ar.exports,Pr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constDetailEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),r("el-breadcrumb-item",[e._v("编辑枚举值")])],1),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"字段名",prop:"detailName"}},[r("help-popover",{attrs:{name:"constDetail.detailName"}},[r("el-input",{attrs:{placeholder:"字段名，例如：WOMAN"},model:{value:e.form.detailName,callback:function(t){e.$set(e.form,"detailName",t)},expression:"form.detailName"}})],1)],1),r("el-form-item",{attrs:{label:"枚举值",prop:"detailValue"}},[r("help-popover",{attrs:{name:"constDetail.detailValue"}},[r("el-input",{attrs:{placeholder:"枚举值，例如：2"},model:{value:e.form.detailValue,callback:function(t){e.$set(e.form,"detailValue",t)},expression:"form.detailValue"}})],1)],1),r("el-form-item",{attrs:{label:"值描述",prop:"detailRemark"}},[r("help-popover",{attrs:{name:"constDetail.detailRemark"}},[r("el-input",{attrs:{placeholder:"值描述，例如：女"},model:{value:e.form.detailRemark,callback:function(t){e.$set(e.form,"detailRemark",t)},expression:"form.detailRemark"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),r("el-button",{attrs:{type:"warning"},on:{click:function(t){e.reset()}}},[e._v("重置")]),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},zr=[],Vr={name:"constDetailEdit",props:["projectId","constId","constDetailId"],data:function(){return{old:xr(!0),form:xr(!0),rules:kr()}},methods:{getConstDetail:function(){var e=this;return this.$ajax.get("/".concat(P,"/meta_const_detail/").concat(this.constDetailId)).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in xr(!0))this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/".concat(P,"/meta_const_detail/update"),e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/".concat(this.projectId,"/const/").concat(this.constId))}},created:function(){var e=this;this.getConstDetail().then(function(){return e.reset()})}},Kr=Vr,Qr=(r("5036"),Object(u["a"])(Kr,Pr,zr,!1,null,null,null));Qr.options.__file="detailEdit.vue";var Gr=Qr.exports;n["default"].use(p["a"]);var Ur=new p["a"]({routes:[{path:"",component:w},{path:"/project",component:q,children:[{path:"",component:G},{path:"add",component:te},{path:"edit/:projectId",component:le,props:!0}]},{path:"/project/:projectId/entity",component:me,props:!0,children:[{path:"",component:Fe,props:!0},{path:"add",component:Be,props:!0},{path:"edit/:entityId",component:Ke,props:!0},{path:"mtmEdit/:mtmId",component:rt,props:!0},{path:"mtmAdd/:entityIds?",component:We,props:!0}]},{path:"/project/:projectId/entity/:entityId/field",component:lt,props:!0,children:[{path:"",component:Ot,props:!0},{path:"add",component:Vt,props:!0},{path:"edit/:fieldId",component:Jt,props:!0},{path:"indexAdd/:fieldIds?",component:tr,props:!0},{path:"indexEdit/:indexId",component:lr,props:!0}]},{path:"/project/:projectId/const",component:mr,props:!0,children:[{path:"add",component:Fr,props:!0},{path:":constId?",component:gr,props:!0},{path:"edit/:constId",component:Dr,props:!0},{path:":constId/constDetailAdd",component:Mr,props:!0},{path:":constId/constDetailEdit/:constDetailId",component:Gr,props:!0}]}],scrollBehavior:function(e,t,r){return{x:0,y:0}}});r("20d6");n["default"].use(Et["a"]);var Hr=new Et["a"].Store({state:{cacheFieldTemplateCount:0,cacheFieldTemplate:[]},getters:{fieldCached:function(e){return function(t){return!!e.cacheFieldTemplate.find(function(e){return e.fieldId===t})}}},mutations:{removeFieldTemplate:function(e,t){var r=e.cacheFieldTemplate.findIndex(function(e){return e.fieldId===t});r>-1&&(e.cacheFieldTemplate.splice(r,1),e.cacheFieldTemplateCount--)},addFieldTemplate:function(e,t){var r=e.cacheFieldTemplate.findIndex(function(e){return e.fieldId===t.fieldId});r<0&&(e.cacheFieldTemplate.push(t),e.cacheFieldTemplateCount++)}}}),Jr=(r("b383"),r("79f6"),r("d06d"),r("0874")),Wr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"help-popover"},[r("el-popover",{ref:"popover",attrs:{placement:"right",width:"400",trigger:"click"}},[r("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.markdown)}})]),r("el-col",{attrs:{span:22}},[e._t("default")],2),r("el-col",{attrs:{span:2}},[r("icon",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"question-circle",attrs:{name:"regular/question-circle"}})],1)],1)},Xr=[],Yr=r("3835"),Zr=(r("ffc1"),r("7f7f"),{project:{groupId:"\n**groupId**：maven项目的groupId，主要影响pom文件\n    ",projectName:"\n**项目名称**：整个项目的唯一标识\n> 注意：只允许输入英文小写字母 “a-z”或短横杠 “-”\n    ",packageName:"\n**包名**：生成的核心代码所属包路径\n> 注意：请遵循开发规范，尽量只输入英文小写字母 “a-z”及路径分隔符 “.”\n    ",author:"\n**作者**：生成的代码中会注明作者，此外并无其他用途\n    ",remote:"\n**启用Git仓库**：启用以后，可以将代码同步到git仓库，可以方便实现代码增量变更\n    ",remoteUrl:"\n**Git仓库地址**：远程Git仓库地址，可以是github、码云、gitlab私有仓库等\n> 注意：请使用新创建的空仓库，不要有任何内容。\n    ",username:"\n**Git用户名/oauth2**：请填写一个有代码提交权限的用户名,如果使用access token则填入oauth2\n    ",password:"\n**Git密码/token**：密码/token不会回显，如果不想修改请置空\n    ",feature:{bootVersion:"\n**spring-boot版本**：生成的基本框架所依赖的spring-boot版本\n      "}},entity:{projectId:"\n**项目**：本实体所属项目\n    ",title:"\n**实体名**：本实体的中文名称，会出现在多处代码及表结构的注释中\n> 注意：请尽量使用言简意赅的名称\n    ",className:"\n**类名**：生成的java bean名称，比如输入类名User,会生成的bean有:UserPO、UserAddDTO、UserDAO等\n> 注意：第一个字母请大写\n    ",tableName:"\n**表名**：生成的业务表名称\n> 注意：请按mysql表名规范来命名，尽量使用下划线来分隔单词\n    ",pageSign:"\n**分页**：生成的查询服务返回结果是否需要分页展示\n    ",desc:"\n**描述**：会出现在建表语句的备注中\n    "},field:{jfieldName:"\n**java字段名**：Java类中的字段名称\n> 注意：请遵循Java字段命名规范，尽量使用驼峰格式\n    ",fieldName:"\n**mysql字段名**：业务表中的字段名称\n> 注意：请遵循mysql字段命名规范，尽量使用下划线来分隔单词\n    ",fieldDesc:"\n**字段描述**：本字段的中文描述\n> 主要是给你自己看的，对于生成的代码来说没什么影响:grin::grin::grin:\n    ",jfieldType:"\n**java字段类型**：实体类中的java字段类型\n    ",fieldType:"\n**mysql字段类型**：数据库中的字段类型\n    ",fieldLength:"\n**字段长度**：字段长度限制。\n\n**作用**：\n1. 首先会影响表结构里面的字段长度\n2. 新增和修改服务也会对DTO中的参数进行长度校验\n    ",fieldScale:"\n**字段精度**：只会影响表结构中的字段精度\n    ",primaryKey:"\n**是否主键**：标识当前字段是否业务表中的主键字段\n> 注意：一个实体必须有且只有一个主键\n    ",autoIncrement:"\n**是否自增**：主键的生成策略\n    ",notNull:"\n**不能为空**：是否非空字段\n    ",foreignKey:'\n**是否外键**：本字段是否跟其他实体的主键字段关联，可以用来实现“一对一”、“一对多”关联\n> 注意：这里的外键只是个概念，并不会在表里生成物理外键（因为大家伙都不建议使用物理外键）\n\n**使用外键后的效果1**：新增或修改实体时会校验关联实体是否存在\n```\n@Transactional\npublic DeveloperPO save(DeveloperAddDTO developerDTO) {\n    DeveloperPO developer = DeveloperMapper.INSTANCE.fromAddDTO(developerDTO);\n    if(developer.getUserId() != null){\n        Assert.isTrue(userDAO.exist(developer.getUserId()),"用户id有误");\n    }\n    developerDAO.save(developer);\n    return developer;\n}\n\n```\n\n\n**使用外键后的效果2**：删除实体时会校验当前实体是否有被其他实体的外键引用\n```\n@Transactional\npublic int delete(Long... userIds) {\n    int count = 0;\n    for (Long userId : userIds) {\n        this.checkDeleteByDeveloper(userId);\n        count += userDAO.delete(userId);\n    }\n    return count;\n}\n```\n\n    ',foreignField:"\n**外键字段**：对应其他实体的主键，详细说明同上\n    ",specialField:"\n**特殊字段类型**：有特殊意义的字段类型\n- 逻辑删除：如果当前实体存在逻辑删除字段，那么调用删除方法的时候，只会将该字段改为1（默认值是0），而不是物理删除。\n- 创建时间：创建实体的时候，会自动对本字段设值为当前时间\n- 创建人员：记录下谁创建了本实体\n- 更新时间：修改实体的时候，会自动对本字段设值为当前时间\n- 更新人员：记录下是谁最后一次修改了本实体\n- 乐观锁版本号：如果对乐观锁的含义不了解，请自己百度一下\n    ",fieldExample:"\n**字段示例**：有两个作用\n1. 生成的swagger文档中，出入参示例来源于此\n2. 生成的单元测试中，会用字段示例作为测试参数\n> 所以请认真写一下示例！\n    ",fieldComment:"\n**字段备注**：对该字段的详细说明，有两个作用\n1. 生成的swagger文档中，出入参结构中会用到字段备注\n2. 生成的表结构中，每个字段都有备注\n> 所以请认真写一下备注，越详细越好，其他人要看！\n    ",dicType:"\n**枚举字典**：当前字段的值是否来源于枚举\n\n系统默认枚举有：\n- BoolConst：1是，0否\n    ",query:"\n**是否查询字段**：如果是查询字段，则当前字段会出现在查询参数中，当然也会出现在查询sql的where语句中。\n    ",queryType:'\n**查询方式**：决定sql的查询方式，如果是between类型，则会生成前后两个查询字段。\n```\n//注册开始时间\n@ApiModelProperty(notes = N_REGTIME,example = E_REGTIME)\n@JsonFormat(pattern=JsonFieldConst.DEFAULT_DATETIME_FORMAT,timezone="GMT+8")\nprivate Date regTimeStart;\n\n//注册结束时间\n@ApiModelProperty(notes = N_REGTIME,example = E_REGTIME)\n@JsonFormat(pattern=JsonFieldConst.DEFAULT_DATETIME_FORMAT,timezone="GMT+8")\nprivate Date regTimeEnd;\n\n```\n    ',insert:"\n**是否新增字段**：如果是新增字段，则会出现在新增服务的外部入参中，\n否则就是需要在save方法中设置默认值。\n> 注意：如果是非新增字段，同时又非空。那生成的初始代码直接跑单元测试肯定会报错的。\n    ",update:"\n**是否编辑字段**：如果是编辑字段，则会出现在修改服务的外部入参中，\n否则代表该字段不允许用户编辑。比如某些状态字段，可以设置成非编辑字段。\n    ",list:"\n**是否列表字段**：如果是列表字段，则会出现在列表查询服务的返回结果中。\n    ",listSort:'\n**是否支持排序**：如果支持排序，则会在列表查询入参中加入排序字段，前端就可以自由指定如何排序。\n```\n@ApiModelProperty(notes = "发布标识排序标识【1升序,-1降序,0不排序】",example = "1")\nprivate Integer publishSignSortSign;\n```\n    ',show:"\n**是否详情字段**：如果是详情字段，则会出现查看详情服务的返回结果中\n    ",orderNo:"\n**排序号**：只影响当前字段在实体中的先后顺序，将功能接近的字段放在一起，会比较美观。\n    "},const:{projectId:"\n**项目**：当前枚举所属项目\n    ",constRemark:"\n**枚举名称**：枚举的中文名称\n    ",constName:"\n**枚举类名**：Java枚举类的类名，请一定要符合类名规范。\n    ",constType:"\n**类型**：指定下属枚举值的字段类型\n    "},constDetail:{detailName:"\n**枚举字段名**：Java枚举类中的字段名称，请符合Java字段命名规范\n    ",detailValue:"\n**枚举值**：枚举字段的值，如果枚举类型是整数，这里就请老老实实输入数字。\n    ",detailRemark:'\n**值描述**：枚举值的中文描述，对应枚举类中desc属性的值\n#### 生成的枚举类会包含两个属性，请看下面示例：\n```\n/**\n * <p>Title: 枚举【开发者类型】</p>\n * <p>Description: </p>\n * @author cbb\n * @date 2018/03/09\n */\npublic enum DevType {\n\n    PERSONAL(1,"个人"),\n    COMPANY(2,"公司");\n\n    private final Integer value;\n    private final String desc;\n\n    private static final Map<Integer, DevType> lookup = new HashMap<>();\n\n    static {\n        for (DevType e : DevType.values()) {\n            lookup.put(e.value, e);\n        }\n    }\n    \n    ......\n}\n```\n\n    '},mtm:{projectId:"\n**项目**：当前多对多所属项目\n    ",tableName:"\n**关联表名**：由于一个多对多关系会生成一张关联表，此处填写该关联表表名。\n    ",desc:"\n**描述**：用于生成关联表的备注信息\n    ",entityId1:"\n**实体1**：多对多的其中一方\n    ",entityId2:"\n**实体2**：多对多的另一方\n    ",holdRefer1:"\n**实体1持有引用**：持有引用的一方可以主动维护多对多关联关系，包括添加、删除关联等操作\n    ",holdRefer2:"\n**实体2持有引用**：持有引用的一方可以主动维护多对多关联关系，包括添加、删除关联等操作\n    "},index:{indexName:"\n**索引名**：生成数据库索引的名称\n    ",fieldIds:"\n**字段**：生成索引的表字段\n    ",unique:"\n**是否唯一**：唯一索引可以从数据库层面限制字段唯一性\n> 注意：如果实体中存在逻辑删除字段，则尽量不要使用唯一索引，而是用“普通索引”+“唯一性校验”来替代\n    ",uniqueCheck:"\n**唯一性校验**：插入或修改记录时，是否需要提前进行索引唯一性校验\n    "},fieldListHelp:"\n**快速复制字段攻略**\n\n![image]({copyField})\n\n\n"}),en=new y.a.Converter({emoji:"true"}),tn={name:"help-popover",props:["name","pic"],data:function(){var e=Zr;if(this.name.split(".").forEach(function(t){e=e[t]}),this.pic)for(var t=Object.entries(this.pic),r=0;r<t.length;r++){var n=Object(Yr["a"])(t[r],2),o=n[0],a=n[1];e=e.replace("{"+o+"}",a)}return{markdown:en.makeHtml(e)}}},rn=tn,nn=(r("0540"),Object(u["a"])(rn,Wr,Xr,!1,null,null,null));nn.options.__file="help-popover.vue";var on=nn.exports;n["default"].config.productionTip=!1,n["default"].use(a.a),n["default"].use(z),n["default"].component("icon",Jr["a"]),n["default"].component("help-popover",on),new n["default"]({store:Hr,router:Ur,render:function(e){return e(m)}}).$mount("#app")},"58dc":function(e,t,r){},"5d67":function(e,t,r){},"5ed3":function(e,t,r){"use strict";var n=r("acf2"),o=r.n(n);o.a},"60c9":function(e,t,r){"use strict";var n=r("c376"),o=r.n(n);o.a},"624f":function(e,t,r){},6565:function(e,t,r){"use strict";var n=r("d8c9"),o=r.n(n);o.a},6969:function(e,t,r){"use strict";var n=r("a69c"),o=r.n(n);o.a},"6f6a":function(e,t,r){},"79f6":function(e,t,r){},"80ab":function(e,t,r){"use strict";var n=r("b839"),o=r.n(n);o.a},"96a0":function(e,t,r){},9851:function(e,t,r){},a69c:function(e,t,r){},ac24:function(e,t,r){},acf2:function(e,t,r){},ad44:function(e,t,r){e.exports=r.p+"static/img/copyField.5ee9f56b.gif"},b383:function(e,t,r){},b839:function(e,t,r){},c376:function(e,t,r){},cc96:function(e,t,r){"use strict";var n=r("3ec6"),o=r.n(n);o.a},d1db:function(e,t,r){"use strict";var n=r("115d"),o=r.n(n);o.a},d5b3:function(e,t,r){},d8c9:function(e,t,r){},e958:function(e,t){e.exports="## 项目介绍\n\n> 通过维护元数据，一键生成java后端基础架构，同时还能生成增删改查代码和单元测试。\n生成的项目是基于[spring-boot](https://spring.io/projects/spring-boot/)+[mybatis](http://www.mybatis.org/mybatis-3/)架构；其他附属技术栈包括：\n- [hibernate-validator](http://hibernate.org/validator/releases/)\n- [swagger](https://swagger.io/)(API文档自动生成)\n- [mapstruct](http://mapstruct.org/)(属性映射)\n- 基于[H2](http://www.h2database.com)内存数据库的单元测试\n\n> 源码地址：[http://git.jd.com/cbb/youran](http://git.jd.com/cbb/youran)\n> 开发本平台的主要目的是减少java后端程序员的重复性工作，将没有技术含量的增删改查等重复性工作，\n> 通过在本系统简单录入即可实现，减少不必要的加班。\n\n## 术语解析\n1. 项目：项目就是一个独立的应用系统，可以基于一个项目生成一整套JavaWeb后端服务系统。\n2. 实体：一个实体对应数据库里一张业务表，同时对应后端一整套增删改查服务，同时实体之间也可以有‘一对多’，‘多对多’等关联关系。\n3. 字段：这里的字段既是数据库业务表中的字段，也是java实体类中的字段，一个字段有非常多的属性可以配置。\n4. 枚举：建议将不常变化的一类常量数据创建成枚举，会在java代码中生成对应的enum类。\n5. 枚举值：枚举类中的字段，有值(value)和描述(desc)两个属性。\n6. 索引：就是mysql业务表中的索引。\n\n\n## 特色功能\n1. 字段复制：支持将已经存在的字段复制，并在指定实体内粘贴，同时支持直接粘贴内置的模板字段。\n2. 基于git增量生成代码：支持将代码直接生成到远程git仓库，同时支持在数据变动以后再次生成（只生成差异部分）。\n3. 多对多关系：支持在两个实体之间的建立多对多关联关系，会在mysql中生成一张关联表，可以设置两个实体之间是否持有对方引用，持有引用的一方会自动生成维护关联关系的rest服务。\n4. 外键关联：在添加字段的时候，可以设置该字段是否外键，外键字段需要关联某个实体的主键，从而可以实现‘一对一’或‘一对多’关联。\n5. 外键级联扩展：设置成外键的字段上可以配置级联字段，级联字段是外键对应的关联表中的业务字段，级联字段可以作为查询条件，也能作为返回结果展示。\n6. 反向工程：如果您的应用已经完成了表结构设计，请使用'反向工程'功能将建表语句反向导入项目中，自动生成实体和字段。\n7. 实体ER图：可以在实体列表页选择多个存在关联关系的实体，点击'查看ER图'按钮，即可生成实体关系图。\n8. 帮助文档：使用本系统的过程中，每个表单项后面都有帮助按钮，可以查看该输入项的详细说明。\n\n## 使用说明\n\n一、最佳方案`推荐`（在本工程中进行模型设计，代码同步到git）\n1. 在gitlab或github之类的代码平台上创建空的工程\n2. 本系统中创建项目并录入git地址\n3. 创建实体\n4. 创建实体字段\n5. 创建枚举及枚举字段【可选】\n6. 创建多对多关联关系【可选】\n7. 创建字段索引【可选】\n8. 执行“提交Git”\n\n\n二、传统方案`不推荐`（设计完表结构后执行反向工程）\n1. 提前设计好表结构\n2. 创建项目\n3. 执行反向工程将建表语句导入项目中\n4. 调整字段的属性（因为反向工程导入的字段信息量太少，部分属性设置了默认值）\n5. 创建枚举及枚举字段【可选】\n6. 创建多对多关联关系【可选】\n7. 生成并下载代码\n\n> 【注意】：如果使用git增量生成代码，远程的auto分支尽量别删，尤其是最新的那个auto分支，因为下一次增量生成的时候是在上个分支基础上进行的。\n\n## 升级日志\n\n#### 2018-11-29\n- 支持spring-boot1和2两个版本的自由选择\n\n#### 2018-10-19\n- 增加项目中文名称字段\n\n#### 2018-07-17\n- 支持查看ER图\n\n#### 2018-07-12\n- 使用标准java doc风格的类注释\n- 删除枚举管理页面，字段列表页中增加枚举维护功能\n- 可以配置对枚举字段增加唯一性校验\n\n#### 2018-06-19\n- 增加国际化支持\n\n#### 2018-06-14\n- 切换mybatis的使用姿势：用传统的Mapper注解模式替换SqlSession模式\n\n#### 2018-05-31\n- 增加反向工程功能\n\n#### 2018-05-30\n- 外键字段增加级联扩展功能\n- core模块中增加默认配置文件，并设置mybatis.config-location\n\n#### 2018-05-08\n- 多对多关联表中增加创建时间字段\n\n#### 2018-04-10\n- 项目实体中增加groupId字段\n\n#### 2018-03-17\n- 增加将代码生成到远程Git仓库的功能\n\n#### 2018-03-09\n- 增加前端编辑表单中每个字段的详细说明（markdown格式）\n\n#### 2018-03-08\n- 生成Maven模块化代码\n\n#### 2018-03-07\n- 移除fastjson依赖，统一换成jackson\n- 修改下载代码压缩包文件名（带上项目名称）\n\n"},ea0c:function(e,t,r){"use strict";var n=r("58dc"),o=r.n(n);o.a},eb47:function(e,t,r){},ebd3:function(e,t,r){},fa4e:function(e,t,r){"use strict";var n=r("2fcc"),o=r.n(n);o.a},fd1b:function(e,t,r){"use strict";var n=r("ebd3"),o=r.n(n);o.a}});
//# sourceMappingURL=app.07989fc2.js.map