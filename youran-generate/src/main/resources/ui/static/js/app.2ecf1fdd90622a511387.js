webpackJsonp([1],{"1r4E":function(e,t){},"1vbG":function(e,t){},"2ah0":function(e,t){},"5rbF":function(e,t){},"6AJs":function(e,t){e.exports="\r\n\r\n## 项目介绍\r\n\r\n> 通过维护元数据，一键生成java后端基础架构，同时还能生成增删改查代码和单元测试。\r\n生成的项目是基于spring-boot+mybatis架构；其他附属技术栈包括：\r\n- hibernate-validator字段校验框架\r\n- swagger(API文档自动生成)\r\n- mapstruct(属性映射)\r\n- 基于H2内存数据库+MockMVC的单元测试\r\n\r\n> 源码地址：[http://git.jd.com/cbb/youran](http://git.jd.com/cbb/youran)\r\n> 开发本平台的主要目的是减少java后端程序员的重复性工作，将没有技术含量的增删改查等重复性工作，\r\n> 通过简单的系统录入工作即可实现，减少不必要的加班，将多出来的时间留给家人。\r\n\r\n## 术语解析\r\n1. 项目：项目就是一个独立的应用系统，可以基于一个项目生成一整套JavaWeb后端服务系统。\r\n2. 实体：一个实体对应数据库里一张业务表，同时对应后端一整套增删改查服务，同时实体之间也可以有‘一对多’，‘多对多’等关联关系。\r\n3. 字段：这里的字段既是数据库业务表中的字段，也是java实体类中的字段，一个字段有非常多的属性可以配置。\r\n4. 枚举：建议将不常变化的一类常量数据创建成枚举，会在java代码中生成对应的enum类。\r\n5. 枚举值：枚举类中的字段，有值(value)和描述(desc)两个属性\r\n6. 索引：就是mysql业务表中的索引\r\n7. 多对多：两个实体之间的关联关系，会在mysql中生成一张关联表，可以设置两个实体之间是否持有对方引用，持有引用的一方会自动生成维护关联关系的rest服务。\r\n8. 外键关联：在添加字段的时候，可以设置该字段是否外键，外键字段需要关联某个实体的主键，从而可以实现‘一对一’或‘一对多’关联\r\n\r\n## 使用说明\r\n\r\n1. 创建项目\r\n2. 创建实体\r\n3. 创建实体字段\r\n4. 创建枚举及枚举字段【可选】\r\n5. 创建多对多关联关系【可选】\r\n6. 创建字段索引【可选】\r\n7. 生成代码\r\n\r\n\r\n\r\n## 升级日志\r\n\r\n#### 2018-03-07\r\n- 移除fastjson依赖，统一换成jackson\r\n- 修改下载代码压缩包文件名（带上项目名称）\r\n#### 2018-03-08\r\n- 生成模块化代码\r\n#### 2018-03-09\r\n- 增加前端编辑表单中每个字段的详细说明（markdown格式）\r\n#### 2018-03-17\r\n- 增加将代码生成到远程Git仓库的功能\r\n"},"7HQV":function(e,t){},D4uH:function(e,t,r){"use strict";var o={},n={name:"icon",props:{name:{type:String,validator:function(e){return e?e in o||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+e+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(e){return"horizontal"===e||"vertical"===e}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?o[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var e=this.icon,t=e.width,r=e.height;return Math.max(t,r)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var e=this.icon.raw,t={};return e=e.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(e,r,o){var n="fa-"+(l++).toString(16);return t[o]=n,' id="'+n+'"'}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(e,r,o,n){var l=r||n;return l&&t[l]?"#"+t[l]:e}),e}},mounted:function(){var e=this;if(!this.icon){this.$children.forEach(function(t){t.outerScale=e.normalizedScale});var t=0,r=0;this.$children.forEach(function(e){t=Math.max(t,e.width),r=Math.max(r,e.height)}),this.childrenWidth=t,this.childrenHeight=r,this.$children.forEach(function(e){e.x=(t-e.width)/2,e.y=(r-e.height)/2})}},register:function(e){for(var t in e){var r=e[t];r.paths||(r.paths=[]),r.d&&r.paths.push({d:r.d}),r.polygons||(r.polygons=[]),r.points&&r.polygons.push({points:r.points}),o[t]=r}},icons:o},l=870711;var a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{class:e.klass,style:e.style,attrs:{version:"1.1",role:e.label?"img":"presentation","aria-label":e.label,x:e.x,y:e.y,width:e.width,height:e.height,viewBox:e.box}},[e._t("default",[e.icon&&e.icon.paths?e._l(e.icon.paths,function(t,o){return r("path",e._b({key:"path-"+o},"path",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.polygons?e._l(e.icon.polygons,function(t,o){return r("polygon",e._b({key:"polygon-"+o},"polygon",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.raw?[r("g",{domProps:{innerHTML:e._s(e.raw)}})]:e._e()])],2)},staticRenderFns:[]};var i=r("VU/8")(n,a,!1,function(e){r("g2YT")},null,null);t.a=i.exports},EDuv:function(e,t){},EGTM:function(e,t){},ETNL:function(e,t){},F1zG:function(e,t){},LiaM:function(e,t){},M2RA:function(e,t){},MzVX:function(e,t,r){e.exports=r.p+"static/img/copyField.5ee9f56.gif"},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("7+uW"),n=r("zL8q"),l=r.n(n),a=(r("tvR6"),{render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("header",{staticClass:"header"},[r("el-row",[r("el-col",{attrs:{span:24}},[r("h2",{attrs:{align:"center"}},[e._v("youran代码自动化平台")])])],1)],1),e._v(" "),r("main",[r("div",{staticClass:"main-left"},[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:!0}},[r("el-menu-item",{class:{"is-active":e.isRoutePath("/")},attrs:{index:"/"}},[e._v("首页")]),e._v(" "),r("el-menu-item",{class:{"is-active":e.isRouteIndexOf("/project")},attrs:{index:"/project"}},[e._v("项目管理")])],1)],1),e._v(" "),r("div",{staticClass:"main-right"},[r("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[r("router-view")],1)],1)])])},staticRenderFns:[]});var i=r("VU/8")({name:"app",data:function(){return{}},methods:{isRoutePath:function(e){return this.$route.path==e},isRouteIndexOf:function(e){return 0==this.$route.path.indexOf(e)}},created:function(){},watch:{$route:function(e,t){}}},a,!1,function(e){r("beal")},null,null).exports,s=r("/ocq"),c=r("HKE2"),u=r.n(c),d=(r("ETNL"),r("6AJs")),m=r.n(d),p=(new u.a.Converter).makeHtml(m.a),f={data:function(){return{tutorial:p}}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"markdown-body",domProps:{innerHTML:this._s(this.tutorial)}})])],1)],1)},staticRenderFns:[]},v=r("VU/8")(f,h,!1,null,null,null).exports,b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:"projectList"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]},y=r("VU/8")(null,b,!1,null,null,null).exports,g={name:"projectList",data:function(){return{query:{},activeNum:0,selectItems:[],entities:[],loading:!1}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择项目"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/generate/meta_project/deleteBatch",e.selectItems.map(function(e){return e.projectId}))}).then(function(){return e.doQuery()})},doQuery:function(){var e=this;this.loading=!0,this.$ajax.get("/generate/meta_project/list",{params:this.query}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.entities=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){return e.loading=!1})},handleAdd:function(){this.$router.push("/project/add")},handleEntity:function(e){this.$router.push("/project/"+e.projectId+"/entity")},handleConst:function(e){this.$router.push("/project/"+e.projectId+"/const")},handleMtm:function(e){this.$router.push("/project/"+e.projectId+"/mtm")},handleEdit:function(e){this.$router.push("/project/edit/"+e.projectId)},handleShow:function(e){this.$router.push("/project/show/"+e.projectId)},handleGenSql:function(e){window.open(this.$common.BASE_API_URL+"/generate/code_gen/genSql?projectId="+e.projectId)},handleGenCode:function(e){window.open(this.$common.BASE_API_URL+"/generate/code_gen/genCode?projectId="+e.projectId)},handleCommit:function(e){var t=this;this.loading=!0,this.$ajax.get("/generate/code_gen/gitCommit?projectId="+e.projectId).then(function(e){return t.$common.checkResult(e.data)}).then(function(){return t.$common.showMsg("success","提交成功")}).catch(function(e){return t.$common.showNotifyError(e)}).finally(function(){return t.loading=!1})},handleCommand:function(e){this[e.method](e.arg)}},activated:function(){this.doQuery()}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",[e._v("项目管理")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:6}},[e._v("\n      已选择"+e._s(e.activeNum)+"个项目\n    ")]),e._v(" "),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")])],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{property:"projectName",label:"项目名称"}}),e._v(" "),r("el-table-column",{attrs:{property:"author",label:"作者"}}),e._v(" "),r("el-table-column",{attrs:{property:"packageName",label:"包名"}}),e._v(" "),r("el-table-column",{attrs:{label:"启用Git仓库",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.remote?r("icon",{staticClass:"color-success",attrs:{name:"check"}}):e._e(),e._v(" "),1!=t.row.remote?r("icon",{staticClass:"color-danger",attrs:{name:"close"}}):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleShow(t.row)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click"},on:{command:e.handleCommand}},[r("span",{staticClass:"el-dropdown-link"},[e._v("\n            操作"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:{method:"handleEntity",arg:t.row}}},[r("icon",{attrs:{name:"cubes",scale:"0.8"}}),e._v(" 实体管理\n            ")],1),e._v(" "),r("el-dropdown-item",{attrs:{command:{method:"handleConst",arg:t.row}}},[r("icon",{attrs:{name:"navicon",scale:"0.8"}}),e._v(" 枚举管理\n            ")],1),e._v(" "),r("el-dropdown-item",{attrs:{command:{method:"handleMtm",arg:t.row}}},[r("icon",{attrs:{name:"th-list",scale:"0.8"}}),e._v(" 多对多管理\n            ")],1),e._v(" "),r("el-dropdown-item",{attrs:{command:{method:"handleGenCode",arg:t.row}}},[r("icon",{attrs:{name:"file-zip-o",scale:"0.8"}}),e._v(" 生成代码\n            ")],1),e._v(" "),r("el-dropdown-item",{attrs:{command:{method:"handleGenSql",arg:t.row}}},[r("icon",{attrs:{name:"file-code-o",scale:"0.8"}}),e._v(" 生成sql\n            ")],1),e._v(" "),1==t.row.remote?r("el-dropdown-item",{attrs:{command:{method:"handleCommit",arg:t.row}}},[r("icon",{attrs:{name:"git",scale:"0.8"}}),e._v(" 提交Git\n            ")],1):e._e()],1)],1)]}}])})],1)],1)},staticRenderFns:[]};var j=r("VU/8")(g,_,!1,function(e){r("nRaw")},null,null).exports,I={boolOptions:[{value:1,label:"是"},{value:0,label:"否"}],fieldTypeOptions:[{value:"int",label:"INT"},{value:"varchar",label:"VARCHAR"},{value:"text",label:"TEXT"},{value:"datetime",label:"DATETIME"},{value:"float",label:"FLOAT"},{value:"double",label:"DOUBLE"},{value:"decimal",label:"DECIMAL"},{value:"bigint",label:"BIGINT"},{value:"smallint",label:"SMALLINT"},{value:"tinyint",label:"TINYINT"}],showFieldLength:function(e){return"datetime"!=e&&"text"!=e},showFieldScale:function(e){return"decimal"==e||"double"==e||"float"==e},jfieldTypeOptions:[{value:"Integer",label:"Integer"},{value:"Short",label:"Short"},{value:"Long",label:"Long"},{value:"String",label:"String"},{value:"Date",label:"Date"},{value:"Double",label:"Double"},{value:"Float",label:"Float"},{value:"BigDecimal",label:"BigDecimal"}],queryTypeOptions:[{value:1,label:"等于"},{value:2,label:"like"},{value:3,label:"大于"},{value:4,label:"大于等于"},{value:5,label:"小于"},{value:6,label:"小于等于"},{value:7,label:"between"}],specialFieldOptions:[{value:"delSign",label:"逻辑删除"},{value:"createDate",label:"创建时间"},{value:"createBy",label:"创建人员"},{value:"operateDate",label:"更新时间"},{value:"operateBy",label:"更新人员"},{value:"version",label:"乐观锁版本"}],constTypeOptions:[{value:1,label:"整型"},{value:2,label:"字符串"}],defaultConstList:[{constName:"BoolConst"}]},k={name:"projectAdd",data:function(){return{boolOptions:I.boolOptions,form:{projectName:"",packageName:"",author:"",remote:0,remoteUrl:"",username:"",password:""},rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"},{validator:function(e,t,r){/^[a-z|-]+$/.test(t)||r(new Error("项目名称不合法,只允许小写字母和横杠")),r()},trigger:"blur"}],packageName:[{required:!0,message:"请输入包名",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],author:[{required:!0,message:"请输入作者",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],remote:[{required:!0,type:"number",message:"请选择是否启用",trigger:"change"}],remoteUrl:[{max:256,message:"长度不能超过256个字符",trigger:"blur"}],username:[{max:32,message:"长度不能超过32个字符",trigger:"blur"}],password:[{max:32,message:"长度不能超过32个字符",trigger:"blur"}]}}},methods:{submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/generate/meta_project/save",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project")}},created:function(){}},x={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("添加")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[r("help-popover",{attrs:{name:"project.projectName"}},[r("el-input",{attrs:{placeholder:"例如：bbs"},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"包名",prop:"packageName"}},[r("help-popover",{attrs:{name:"project.packageName"}},[r("el-input",{attrs:{placeholder:"例如：com.cbb.bbs"},model:{value:e.form.packageName,callback:function(t){e.$set(e.form,"packageName",t)},expression:"form.packageName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"作者",prop:"author"}},[r("help-popover",{attrs:{name:"project.author"}},[r("el-input",{attrs:{placeholder:"例如：菜小哥"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"启用Git仓库",prop:"remote"}},[r("help-popover",{attrs:{name:"project.remote"}},[r("el-radio-group",{model:{value:e.form.remote,callback:function(t){e.$set(e.form,"remote",t)},expression:"form.remote"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),1==e.form.remote?[r("el-form-item",{attrs:{label:"Git仓库地址",prop:"remoteUrl"}},[r("help-popover",{attrs:{name:"project.remoteUrl"}},[r("el-input",{attrs:{placeholder:"例如：https://github.com/github/testrepo.git"},model:{value:e.form.remoteUrl,callback:function(t){e.$set(e.form,"remoteUrl",t)},expression:"form.remoteUrl"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Git用户名",prop:"username"}},[r("help-popover",{attrs:{name:"project.username"}},[r("el-input",{attrs:{placeholder:"例如：zhangsan"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Git密码",prop:"password"}},[r("help-popover",{attrs:{name:"project.password"}},[r("el-input",{attrs:{placeholder:"例如：123456"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)]:e._e(),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],2)],1)],1)],1)},staticRenderFns:[]};var $=r("VU/8")(k,x,!1,function(e){r("pXpU")},null,null).exports,w=r("Dd8w"),N=r.n(w),q={projectId:null,projectName:"",packageName:"",author:"",remote:0,remoteUrl:"",username:"",password:""},F={name:"projectEdit",props:["projectId"],data:function(){return{boolOptions:I.boolOptions,old:N()({},q),form:N()({},q),rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"},{validator:function(e,t,r){/^[a-z|-]+$/.test(t)||r(new Error("项目名称不合法,只允许小写字母和横杠")),r()},trigger:"blur"}],packageName:[{required:!0,message:"请输入包名",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],author:[{required:!0,message:"请输入作者",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],remote:[{required:!0,type:"number",message:"请选择是否启用",trigger:"change"}],remoteUrl:[{max:256,message:"长度不能超过256个字符",trigger:"blur"}],username:[{max:32,message:"长度不能超过32个字符",trigger:"blur"}],password:[{max:32,message:"长度不能超过32个字符",trigger:"blur"}]}}},methods:{getProject:function(){var e=this;return this.$ajax.get("/generate/meta_project/"+this.projectId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in q)this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/generate/meta_project/update",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project")}},created:function(){var e=this;this.getProject().then(function(){return e.reset()})}},T={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("编辑")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[r("help-popover",{attrs:{name:"project.projectName"}},[r("el-input",{attrs:{placeholder:"例如：bbs"},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"包名",prop:"packageName"}},[r("help-popover",{attrs:{name:"project.packageName"}},[r("el-input",{attrs:{placeholder:"例如：com.cbb.bbs"},model:{value:e.form.packageName,callback:function(t){e.$set(e.form,"packageName",t)},expression:"form.packageName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"作者",prop:"author"}},[r("help-popover",{attrs:{name:"project.author"}},[r("el-input",{attrs:{placeholder:"例如：菜小哥"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"启用Git仓库",prop:"remote"}},[r("help-popover",{attrs:{name:"project.remote"}},[r("el-radio-group",{model:{value:e.form.remote,callback:function(t){e.$set(e.form,"remote",t)},expression:"form.remote"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),1==e.form.remote?[r("el-form-item",{attrs:{label:"Git仓库地址",prop:"remoteUrl"}},[r("help-popover",{attrs:{name:"project.remoteUrl"}},[r("el-input",{attrs:{placeholder:"例如：https://github.com/github/testrepo.git"},model:{value:e.form.remoteUrl,callback:function(t){e.$set(e.form,"remoteUrl",t)},expression:"form.remoteUrl"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Git用户名",prop:"username"}},[r("help-popover",{attrs:{name:"project.username"}},[r("el-input",{attrs:{placeholder:"例如：zhangsan"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Git密码",prop:"password"}},[r("help-popover",{attrs:{name:"project.password"}},[r("el-input",{attrs:{placeholder:"例如：123456"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)]:e._e(),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],2)],1)],1)],1)},staticRenderFns:[]};var S=r("VU/8")(F,T,!1,function(e){r("gM1w")},null,null).exports,E={projectId:null,projectName:"",packageName:"",author:"",remote:0,remoteUrl:"",username:"",password:""},O={name:"projectShow",props:["projectId"],data:function(){return{boolOptions:I.boolOptions,form:N()({},E)}},methods:{getProject:function(){var e=this;return this.$ajax.get("/generate/meta_project/"+this.projectId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.form=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},goBack:function(){this.$router.push("/project")}},created:function(){this.getProject()}},C={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectShow"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查看")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"showForm",staticClass:"showForm",attrs:{model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"包名",prop:"packageName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.packageName,callback:function(t){e.$set(e.form,"packageName",t)},expression:"form.packageName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"作者",prop:"author"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"启用Git仓库"}},[r("help-popover",{attrs:{name:"project.remote"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.remote,callback:function(t){e.$set(e.form,"remote",t)},expression:"form.remote"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),1==e.form.remote?[r("el-form-item",{attrs:{label:"Git仓库地址"}},[r("help-popover",{attrs:{name:"project.remoteUrl"}},[r("el-input",{attrs:{placeholder:"例如：https://github.com/github/testrepo.git",disabled:!0},model:{value:e.form.remoteUrl,callback:function(t){e.$set(e.form,"remoteUrl",t)},expression:"form.remoteUrl"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Git用户名"}},[r("help-popover",{attrs:{name:"project.username"}},[r("el-input",{attrs:{placeholder:"例如：zhangsan",disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1)]:e._e(),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],2)],1)],1)],1)},staticRenderFns:[]};var R=r("VU/8")(O,C,!1,function(e){r("5rbF")},null,null).exports,D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:"entityList"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]},L=r("VU/8")(null,D,!1,null,null,null).exports,V={name:"entityList",props:["projectId"],data:function(){return{sqlPreview:"",sqlPreviewVisible:!1,query:{projectId:null},queryForm:{projectId:null},projectList:[],activeNum:0,selectItems:[],page:{pageNo:1,entityCount:0,pageSize:20,entities:[]},loading:!1}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择实体"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/generate/meta_entity/deleteBatch",e.selectItems.map(function(e){return e.entityId}))}).then(function(){return e.doQuery()})},sizeChange:function(e){this.page.pageSize=e,this.doQuery()},currentChange:function(e){this.page.pageNo=e,this.doQuery()},queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},handleQuery:function(){this.query=N()({},this.queryForm),this.query.projectId!=parseInt(this.projectId)&&this.$router.push("/project/"+this.query.projectId+"/entity"),this.doQuery()},doQuery:function(){var e=this;if(this.query.projectId){var t=N()({},this.query,{pageNo:this.page.pageNo,pageSize:this.page.pageSize});this.loading=!0,this.$ajax.get("/generate/meta_entity/list",{params:t}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.page=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){return e.loading=!1})}},handleAdd:function(){this.$router.push("/project/"+this.projectId+"/entity/add")},handleField:function(e){this.$router.push("/project/"+this.projectId+"/entity/"+e.entityId+"/field")},handleIndex:function(e){this.$router.push("/project/"+this.projectId+"/entity/"+e.entityId+"/index")},handleEdit:function(e){this.$router.push("/project/"+this.projectId+"/entity/edit/"+e.entityId)},handleShow:function(e){this.$router.push("/project/"+this.projectId+"/entity/show/"+e.entityId)},handleSqlPreview:function(e){var t=this;this.$ajax.get("/generate/code_gen/sqlPreview?entityId="+e.entityId).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){t.sqlPreview=e.data,t.sqlPreviewVisible=!0}).catch(function(e){return t.$common.showNotifyError(e)})},handleCommand:function(e){this[e.method](e.arg)}},activated:function(){var e=this;this.queryProject().then(function(){e.queryForm.projectId=parseInt(e.projectId),e.query.projectId=e.queryForm.projectId}).then(function(){return e.doQuery()})}},P={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"entityList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("实体管理")])],1),e._v(" "),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:6}},[e._v("\n      已选择"+e._s(e.activeNum)+"个实体\n    ")]),e._v(" "),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"请选择项目"},on:{change:e.handleQuery},model:{value:e.queryForm.projectId,callback:function(t){e.$set(e.queryForm,"projectId",t)},expression:"queryForm.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.page.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{property:"title",label:"实体名"}}),e._v(" "),r("el-table-column",{attrs:{property:"className",label:"类名"}}),e._v(" "),r("el-table-column",{attrs:{property:"tableName",label:"表名"}}),e._v(" "),r("el-table-column",{attrs:{label:"分页",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.pageSign?r("icon",{staticClass:"color-success",attrs:{name:"check"}}):e._e(),e._v(" "),1!=t.row.pageSign?r("icon",{staticClass:"color-danger",attrs:{name:"close"}}):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"desc",label:"描述"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleShow(t.row)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-dropdown",{staticStyle:{"margin-left":"10px"},attrs:{trigger:"click"},on:{command:e.handleCommand}},[r("span",{staticClass:"el-dropdown-link"},[e._v("\n            操作"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:{method:"handleField",arg:t.row}}},[r("icon",{attrs:{name:"table",scale:"0.8"}}),e._v(" 字段管理\n            ")],1),e._v(" "),r("el-dropdown-item",{attrs:{command:{method:"handleIndex",arg:t.row}}},[r("icon",{attrs:{name:"rocket",scale:"0.8"}}),e._v(" 索引管理\n            ")],1),e._v(" "),r("el-dropdown-item",{attrs:{command:{method:"handleSqlPreview",arg:t.row}}},[r("icon",{attrs:{name:"file-o",scale:"0.8"}}),e._v(" sql预览\n            ")],1)],1)],1)]}}])})],1),e._v(" "),r("el-row",{staticStyle:{padding:"20px 0"},attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.page.pageNo,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"sizes, prev, pager, next",total:e.page.entityCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"sql预览",visible:e.sqlPreviewVisible,width:"50%"},on:{"update:visible":function(t){e.sqlPreviewVisible=t}}},[r("el-input",{attrs:{readonly:!0,type:"textarea",rows:20},model:{value:e.sqlPreview,callback:function(t){e.sqlPreview=t},expression:"sqlPreview"}}),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.sqlPreviewVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},staticRenderFns:[]};var B=r("VU/8")(V,P,!1,function(e){r("f9oQ")},null,null).exports,U={name:"entityAdd",props:["projectId"],data:function(){return{boolOptions:I.boolOptions,projectList:[],form:{projectId:null,title:"",className:"",tableName:"",desc:"",commonCall:1,pageSign:1},rules:{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],title:[{required:!0,message:"请输入实体名",trigger:"blur"},{max:25,message:"长度不能超过25个字符",trigger:"blur"}],className:[{required:!0,message:"请输入类名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],tableName:[{required:!0,message:"请输入表名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],pageSign:[{required:!0,type:"number",message:"请选择是否支持分页",trigger:"change"}],desc:[{max:250,message:"长度不能超过250个字符",trigger:"blur"}]}}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/generate/meta_entity/save",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity")}},created:function(){var e=this;this.queryProject().then(function(){return e.form.projectId=parseInt(e.projectId)})}},M={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"entityAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("添加")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"entity.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体名",prop:"title"}},[r("help-popover",{attrs:{name:"entity.title"}},[r("el-input",{attrs:{placeholder:"例如：用户"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"类名",prop:"className"}},[r("help-popover",{attrs:{name:"entity.className"}},[r("el-input",{attrs:{placeholder:"例如：User"},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[r("help-popover",{attrs:{name:"entity.tableName"}},[r("el-input",{attrs:{placeholder:"例如：t_user"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"分页",prop:"pageSign"}},[r("help-popover",{attrs:{name:"entity.pageSign"}},[r("el-radio-group",{model:{value:e.form.pageSign,callback:function(t){e.$set(e.form,"pageSign",t)},expression:"form.pageSign"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("help-popover",{attrs:{name:"entity.desc"}},[r("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var A=r("VU/8")(U,M,!1,function(e){r("xk7+")},null,null).exports,K=r("//Fk"),z=r.n(K),Q={entityId:null,projectId:null,title:"",className:"",tableName:"",desc:"",commonCall:1,pageSign:1},G={name:"entityEdit",props:["projectId","entityId"],data:function(){return{boolOptions:I.boolOptions,projectList:[],old:N()({},Q),form:N()({},Q),rules:{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],title:[{required:!0,message:"请输入实体名",trigger:"blur"},{max:25,message:"长度不能超过25个字符",trigger:"blur"}],className:[{required:!0,message:"请输入类名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],tableName:[{required:!0,message:"请输入表名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],pageSign:[{required:!0,type:"number",message:"请选择是否支持分页",trigger:"change"}],desc:[{max:250,message:"长度不能超过250个字符",trigger:"blur"}]}}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},getEntity:function(){var e=this;return this.$ajax.get("/generate/meta_entity/"+this.entityId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Q)this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/generate/meta_entity/update",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity")}},created:function(){var e=this;z.a.all([this.getEntity(),this.queryProject()]).then(function(){return e.reset()})}},H={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"entityEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("编辑")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"entity.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体名",prop:"title"}},[r("help-popover",{attrs:{name:"entity.title"}},[r("el-input",{attrs:{placeholder:"例如：用户"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"类名",prop:"className"}},[r("help-popover",{attrs:{name:"entity.className"}},[r("el-input",{attrs:{placeholder:"例如：User"},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[r("help-popover",{attrs:{name:"entity.tableName"}},[r("el-input",{attrs:{placeholder:"例如：t_user"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"分页",prop:"pageSign"}},[r("help-popover",{attrs:{name:"entity.pageSign"}},[r("el-radio-group",{model:{value:e.form.pageSign,callback:function(t){e.$set(e.form,"pageSign",t)},expression:"form.pageSign"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("help-popover",{attrs:{name:"entity.desc"}},[r("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var J=r("VU/8")(G,H,!1,function(e){r("EDuv")},null,null).exports,W={entityId:null,projectId:null,title:"",className:"",tableName:"",desc:"",commonCall:1,pageSign:1},X={name:"entityShow",props:["projectId","entityId"],data:function(){return{boolOptions:I.boolOptions,projectList:[],form:N()({},W)}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},getEntity:function(){var e=this;return this.$ajax.get("/generate/meta_entity/"+this.entityId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.form=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity")}},created:function(){var e=this;this.queryProject().then(function(){return e.getEntity()})}},Y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"entityShow"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查看")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"showForm",staticClass:"showForm",attrs:{model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"实体名",prop:"title"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"类名",prop:"className"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"表名",prop:"tableName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分页",prop:"pageSign"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.pageSign,callback:function(t){e.$set(e.form,"pageSign",t)},expression:"form.pageSign"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",rows:2,disabled:!0},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Z=r("VU/8")(X,Y,!1,function(e){r("Q4Wu")},null,null).exports,ee={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:"fieldList"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]},te=r("VU/8")(null,ee,!1,null,null,null).exports,re=r("BO1k"),oe=r.n(re),ne={"主键ID(Long)":{jfieldName:"id",fieldName:"id",fieldDesc:"主键",jfieldType:"Long",fieldType:"bigint",fieldLength:20,fieldScale:0,primaryKey:1,autoIncrement:1,defaultValue:"",notNull:1,foreignKey:0,specialField:"",fieldExample:"1",fieldComment:"主键ID",dicType:"",query:0,queryType:null,insert:0,update:0,list:1,listSort:0,show:1,editType:null,orderNo:1},"主键ID(Integer)":{jfieldName:"id",fieldName:"id",fieldDesc:"主键",jfieldType:"Integer",fieldType:"int",fieldLength:11,fieldScale:0,primaryKey:1,autoIncrement:1,defaultValue:"",notNull:1,foreignKey:0,specialField:"",fieldExample:"1",fieldComment:"主键ID",dicType:"",query:0,queryType:null,insert:0,update:0,list:1,listSort:0,show:1,editType:null,orderNo:1},"创建时间":{jfieldName:"createDate",fieldName:"create_date",fieldDesc:"创建时间",jfieldType:"Date",fieldType:"datetime",fieldLength:0,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"createDate",fieldExample:"2017-12-07 00:00:00",fieldComment:"创建时间【yyyy-MM-dd HH:mm:ss】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:1,show:0,editType:null,orderNo:100},"创建人":{jfieldName:"createBy",fieldName:"create_by",fieldDesc:"创建人",jfieldType:"String",fieldType:"varchar",fieldLength:20,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"createBy",fieldExample:"admin",fieldComment:"创建人【最大长度20】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:0,show:0,editType:null,orderNo:101},"修改时间":{jfieldName:"operateDate",fieldName:"operate_date",fieldDesc:"修改时间",jfieldType:"Date",fieldType:"datetime",fieldLength:0,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"operateDate",fieldExample:"2017-12-07 00:00:00",fieldComment:"修改时间【yyyy-MM-dd HH:mm:ss】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:1,show:0,editType:null,orderNo:102},"修改人":{jfieldName:"operateBy",fieldName:"operate_by",fieldDesc:"修改人",jfieldType:"String",fieldType:"varchar",fieldLength:20,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"operateBy",fieldExample:"admin",fieldComment:"修改人【最大长度20】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:0,show:0,editType:null,orderNo:103},"乐观锁版本号":{jfieldName:"version",fieldName:"version",fieldDesc:"乐观锁版本号",jfieldType:"Integer",fieldType:"int",fieldLength:11,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"version",fieldExample:"1",fieldComment:"乐观锁版本号【整型】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:0,show:0,editType:null,orderNo:104},"逻辑删除标识":{jfieldName:"delSign",fieldName:"del_sign",fieldDesc:"逻辑删除标识",jfieldType:"Integer",fieldType:"tinyint",fieldLength:1,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"delSign",fieldExample:"0",fieldComment:"逻辑删除标识【0-未删除，1-已删除】",dicType:"",query:0,queryType:null,insert:0,update:0,list:0,listSort:0,show:0,editType:null,orderNo:105},"排序号":{jfieldName:"orderNo",fieldName:"order_no",fieldDesc:"排序号",jfieldType:"Integer",fieldType:"int",fieldLength:11,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:1,foreignKey:0,specialField:"",fieldExample:"1",fieldComment:"排序号【整型】",dicType:"",query:0,queryType:null,insert:1,update:1,list:1,listSort:1,show:1,editType:null,orderNo:90}},le=r("MzVX"),ae=r.n(le),ie={name:"fieldList",props:["projectId","entityId"],data:function(){return{copyFieldUrl:ae.a.replace("uistatic","ui/static"),addTemplateFormVisible:!1,fieldTemplate:ne,cacheTemplateCount:0,cacheTemplate:[],templateForm:{multiple:"0",template:"",templates:[]},query:{projectId:null,entityId:null},queryForm:{projectEntityOptions:[],projectEntity:[0,0]},activeNum:0,selectItems:[],entities:[],loading:!1}},filters:{optionLabel:function(e,t){var r=I[t],o=!0,n=!1,l=void 0;try{for(var a,i=oe()(r);!(o=(a=i.next()).done);o=!0){var s=a.value;if(s.value==e)return s.label}}catch(e){n=!0,l=e}finally{try{!o&&i.return&&i.return()}finally{if(n)throw l}}return null},lengthAndScale:function(e){var t="";return I.showFieldLength(e.fieldType)&&(t+="("+e.fieldLength,I.showFieldScale(e.fieldType)&&(t+=","+e.fieldScale),t+=")"),t}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleRemoveTemplate:function(e){var t=this.cacheTemplate.findIndex(function(t){return t.fieldId==e});t>-1&&(this.cacheTemplate.splice(t,1),this.cacheTemplateCount--)},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择字段"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/generate/meta_field/deleteBatch",e.selectItems.map(function(e){return e.fieldId}))}).then(function(){return e.doQuery()})},handleCopy:function(){if(this.activeNum<=0)this.$common.showMsg("warning","请选择字段");else{var e=!0,t=!1,r=void 0;try{for(var o,n=oe()(this.selectItems);!(e=(o=n.next()).done);e=!0){var l=o.value;this.cacheTemplate.find(function(e){return e.fieldId==l.fieldId})||this.cacheTemplate.push(l)}}catch(e){t=!0,r=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw r}}this.cacheTemplateCount=this.cacheTemplate.length}},handleCopyOne:function(e){this.cacheTemplate.find(function(t){return t.fieldId==e.fieldId})||(this.cacheTemplate.push(e),this.cacheTemplateCount=this.cacheTemplate.length)},initProjectOptions:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.queryForm.projectEntityOptions=t.data.map(function(e){return{value:e.projectId,label:e.projectName,children:[]}})})},handleProjectChange:function(e){var t=this,r=e[0],o=this.queryForm.projectEntityOptions.find(function(e){return e.value==r});if(!o.children.length)return this.$common.getEntityOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return o.children=e.data.entities.map(function(e){return{value:e.entityId,label:e.title}})})},handleQuery:function(){null!=this.queryForm.projectEntity[1]?(this.query.projectId=this.queryForm.projectEntity[0],this.query.entityId=this.queryForm.projectEntity[1],this.query.entityId!=parseInt(this.entityId)&&this.$router.push("/project/"+this.query.projectId+"/entity/"+this.query.entityId+"/field"),this.doQuery()):this.$common.showNotifyError("请选择实体")},doQuery:function(){var e=this;this.query.projectId&&this.query.entityId&&(this.loading=!0,this.$ajax.get("/generate/meta_field/list",{params:this.query}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.entities=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){return e.loading=!1}))},handleAdd:function(){this.addTemplateFormVisible=!1;var e="system";"number"==typeof this.templateForm.template&&(e="temp"),this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/field/add?type="+e+"&template="+this.templateForm.template)},handleAddImm:function(){var e=this;this.addTemplateFormVisible=!1;var t=this.templateForm.multiple,r=this.templateForm.templates,o=this.templateForm.template,n=function(e,t){var r=this;return this.$ajax.post("/generate/meta_field/save",N()({},this.$common.removeBlankField(e),{entityId:this.entityId})).then(function(e){return r.$common.checkResult(e.data)}).then(function(){t&&(r.$common.showMsg("success","添加成功"),r.doQuery())}).catch(function(e){return r.$common.showNotifyError(e)})}.bind(this),l=function(e,t){var r=this;return"number"==typeof e?this.$ajax.get("/generate/meta_field/"+e).then(function(e){return r.$common.checkResult(e.data)}).then(function(e){return n(e.data,t)}).catch(function(e){return r.$common.showNotifyError(e)}):n(ne[e],t)}.bind(this),a=this.$loading();("0"==t?l(o,!0):z.a.all(r.map(function(e){return l(e)})).then(function(){e.$common.showMsg("success","添加成功"),e.doQuery()})).finally(function(){return a.close()})},handleEdit:function(e){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/field/edit/"+e.fieldId)},handleShow:function(e){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/field/show/"+e.fieldId)}},activated:function(){var e=this,t=parseInt(this.projectId),r=parseInt(this.entityId);this.queryForm.projectEntity[0]=t,this.queryForm.projectEntity[1]=r,this.query.projectId=t,this.query.entityId=r,this.initProjectOptions().then(function(){return e.handleProjectChange([t])}).then(function(){return e.doQuery()})}},se={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fieldList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("字段管理")])],1),e._v(" "),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:4}},[e._v("\n      已选择"+e._s(e.activeNum)+"个字段\n    ")]),e._v(" "),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-cascader",{attrs:{placeholder:"请选择实体",options:e.queryForm.projectEntityOptions},on:{"active-item-change":e.handleProjectChange,change:e.handleQuery},model:{value:e.queryForm.projectEntity,callback:function(t){e.$set(e.queryForm,"projectEntity",t)},expression:"queryForm.projectEntity"}})],1),e._v(" "),r("el-form-item",[r("help-popover",{attrs:{name:"fieldListHelp",pic:{copyField:e.copyFieldUrl}}},[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){e.addTemplateFormVisible=!0,e.templateForm.template=""}}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")]),e._v(" "),r("el-badge",{staticClass:"item",attrs:{value:e.cacheTemplateCount}},[r("el-button",{staticStyle:{margin:"0 0 0 10px"},attrs:{type:"warning"},nativeOn:{click:function(t){return e.handleCopy(t)}}},[e._v("复制为模板")])],1)],1)],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{property:"fieldDesc",label:"字段描述"}}),e._v(" "),r("el-table-column",{attrs:{label:"字段名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.jfieldName)+" / "+e._s(t.row.fieldName)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"字段类型",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("optionLabel")(t.row.jfieldType,"jfieldTypeOptions"))+"\n        / "+e._s(e._f("optionLabel")(t.row.fieldType,"fieldTypeOptions"))+e._s(e._f("lengthAndScale")(t.row))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"非空",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.notNull?r("icon",{staticClass:"color-success",attrs:{name:"check"}}):e._e(),e._v(" "),1!=t.row.notNull?r("icon",{staticClass:"color-danger",attrs:{name:"close"}}):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"主外键",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"主键",placement:"right"}},[1==t.row.primaryKey?r("icon",{staticClass:"color-warning",attrs:{name:"key"}}):e._e()],1),e._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"外键",placement:"right"}},[1==t.row.foreignKey?r("icon",{staticClass:"color-primary",attrs:{name:"key"}}):e._e()],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"orderNo",label:"排序",width:"50px"}}),e._v(" "),r("el-table-column",{attrs:{property:"fieldExample",label:"字段示例"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleShow(t.row)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleCopyOne(t.row)}}},[e._v("复制")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:"请选择字段模板",visible:e.addTemplateFormVisible,width:"30%"},on:{"update:visible":function(t){e.addTemplateFormVisible=t}}},[r("el-form",{attrs:{model:e.templateForm}},[r("el-form-item",{attrs:{label:"模式：","label-width":"100px"}},[r("el-radio-group",{model:{value:e.templateForm.multiple,callback:function(t){e.$set(e.templateForm,"multiple",t)},expression:"templateForm.multiple"}},[r("el-radio",{attrs:{border:"",label:"0"}},[e._v("表单编辑")]),e._v(" "),r("el-radio",{attrs:{border:"",label:"1"}},[e._v("批量保存")])],1)],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"==e.templateForm.multiple,expression:"templateForm.multiple=='0'"}],attrs:{label:"模板：","label-width":"100px"}},[r("el-select",{model:{value:e.templateForm.template,callback:function(t){e.$set(e.templateForm,"template",t)},expression:"templateForm.template"}},[r("el-option-group",[r("el-option",{attrs:{label:"不使用模板",value:""}})],1),e._v(" "),e.cacheTemplateCount>0?r("el-option-group",{attrs:{label:"临时模板"}},e._l(e.cacheTemplate,function(t){return r("el-option",{key:t.fieldId,attrs:{label:t.fieldDesc,value:t.fieldId}},[r("span",{staticStyle:{float:"left"}},[e._v(e._s(t.fieldDesc))]),e._v(" "),r("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[r("i",{staticClass:"el-icon-delete",on:{click:function(r){r.stopPropagation(),e.handleRemoveTemplate(t.fieldId)}}})])])})):e._e(),e._v(" "),r("el-option-group",{attrs:{label:"系统内置模板"}},e._l(e.fieldTemplate,function(e,t){return r("el-option",{key:t,attrs:{label:t,value:t}})}))],1)],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.templateForm.multiple,expression:"templateForm.multiple=='1'"}],attrs:{label:"模板：","label-width":"100px"}},[r("el-select",{attrs:{multiple:"","collapse-tags":""},model:{value:e.templateForm.templates,callback:function(t){e.$set(e.templateForm,"templates",t)},expression:"templateForm.templates"}},[e.cacheTemplateCount>0?r("el-option-group",{attrs:{label:"临时模板"}},e._l(e.cacheTemplate,function(e){return r("el-option",{key:e.fieldId,attrs:{label:e.fieldDesc,value:e.fieldId}})})):e._e(),e._v(" "),r("el-option-group",{attrs:{label:"系统内置模板"}},e._l(e.fieldTemplate,function(e,t){return r("el-option",{key:t,attrs:{label:t,value:t}})}))],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addTemplateFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"0"==e.templateForm.multiple?r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("开始编辑")]):e._e(),e._v(" "),"1"==e.templateForm.multiple?r("el-button",{attrs:{type:"success"},on:{click:e.handleAddImm}},[e._v("立即保存")]):e._e()],1)],1)],1)},staticRenderFns:[]};var ce=r("VU/8")(ie,se,!1,function(e){r("asR+")},null,null).exports,ue=r("Gu7T"),de=r.n(ue),me={name:"fieldAdd",props:["projectId","entityId"],data:function(){return{boolOptions:I.boolOptions,fieldTypeOptions:I.fieldTypeOptions,jfieldTypeOptions:I.jfieldTypeOptions,queryTypeOptions:I.queryTypeOptions,specialFieldOptions:I.specialFieldOptions,entityFieldOptions:[],constList:null,notNullDisabled:!1,autoIncrementDisabled:!0,queryTypeDisabled:!0,specialFieldDisabled:!1,foreignField:[0,0],foreignFieldDisabled:!0,form:{entityId:null,jfieldName:"",fieldName:"",fieldDesc:"",jfieldType:"",fieldType:"",fieldLength:0,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:0,foreignKey:0,foreignEntityId:null,foreignFieldId:null,specialField:"",fieldExample:"",fieldComment:"",dicType:"",query:0,queryType:null,insert:1,update:1,list:1,listSort:0,show:1,editType:null,orderNo:1},rules:{jfieldName:[{required:!0,message:"请输入java字段名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],fieldName:[{required:!0,message:"请输入mysql字段名",trigger:"blur"},{max:64,message:"长度不能超过64个字符",trigger:"blur"}],fieldDesc:[{required:!0,message:"请输入字段描述",trigger:"blur"},{max:40,message:"长度不能超过40个字符",trigger:"blur"}],jfieldType:[{required:!0,type:"string",message:"请选择java字段类型",trigger:"change"}],fieldType:[{required:!0,type:"string",message:"请选择mysql字段类型",trigger:"change"}],fieldLength:[{required:!0,message:"请输入字段长度",trigger:"blur"}],fieldScale:[{required:!0,message:"请输入字段精度",trigger:"blur"}],primaryKey:[{required:!0,type:"number",message:"请选择是否主键",trigger:"change"}],autoIncrement:[{required:!0,type:"number",message:"请选择是否自增",trigger:"change"}],notNull:[{required:!0,type:"number",message:"请选择不能为空",trigger:"change"}],foreignKey:[{required:!0,type:"number",message:"请选择是否外键",trigger:"change"}],fieldExample:[{required:!0,message:"请输入字段示例",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],fieldComment:[{required:!0,message:"请输入字段备注",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],dicType:[{max:40,message:"长度不能超过40个字符",trigger:"blur"}],query:[{required:!0,type:"number",message:"请选择是否查询字段",trigger:"change"}],insert:[{required:!0,type:"number",message:"请选择是否新增字段",trigger:"change"}],update:[{required:!0,type:"number",message:"请选择是否编辑字段",trigger:"change"}],list:[{required:!0,type:"number",message:"请选择是否列表字段",trigger:"change"}],listSort:[{required:!0,type:"number",message:"请选择是否支持排序",trigger:"change"}],show:[{required:!0,type:"number",message:"请选择是否详情字段",trigger:"change"}],orderNo:[{required:!0,message:"请输入排序号",trigger:"blur"}]}}},computed:{dicTypeDisabled:function(){return!(1!=this.form.primaryKey&&!this.form.specialField)},fieldScaleVisible:function(){return I.showFieldScale(this.form.fieldType)}},watch:{"form.primaryKey":function(e){1==e?(this.form.notNull=1,this.notNullDisabled=!0,this.form.specialField="",this.specialFieldDisabled=!0,this.autoIncrementDisabled=!1):(this.notNullDisabled=!1,this.specialFieldDisabled=!1,this.form.autoIncrement=0,this.autoIncrementDisabled=!0)},"form.foreignKey":function(e){this.foreignFieldDisabled=1!=e},"form.query":function(e){1==e?this.queryTypeDisabled=!1:(this.queryTypeDisabled=!0,this.queryType="")},dicTypeDisabled:function(e){e&&(this.form.dicType="")}},methods:{initForeignEntityOptions:function(){var e=this;return this.$common.getEntityOptions(this.projectId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.entityFieldOptions=t.data.entities.map(function(e){return{value:e.entityId,label:e.title,children:[]}})})},handleForeignEntityChange:function(e){var t=this,r=e[0],o=this.entityFieldOptions.find(function(e){return e.value==r});if(!o.children.length)return this.$common.getFieldOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return o.children=e.data.filter(function(e){return 1==e.primaryKey}).map(function(e){return{value:e.fieldId,label:e.fieldDesc}})})},queryDicType:function(e,t){var r=this,o=function(){var r=this.constList.slice(0);r.push.apply(r,de()(I.defaultConstList));var o=e?r.filter(function(t){return 0===t.constName.toLowerCase().indexOf(e.toLowerCase())}):r;t(o.map(function(e){return{value:e.constName}}))}.bind(this);this.constList?o():this.$common.getConstOptions(this.projectId).then(function(e){return r.$common.checkResult(e.data)}).then(function(e){r.constList=e.data.entities,o()})},submit:function(){var e=this;I.showFieldScale(this.form.fieldType)||(this.form.fieldScale=null),this.form.foreignEntityId=this.foreignField[0],this.form.foreignFieldId=this.foreignField[1];var t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/generate/meta_field/save",e.$common.removeBlankField(e.form))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/field")}},created:function(){var e=this,t=parseInt(this.entityId);this.form.entityId=t,this.initForeignEntityOptions();var r=this.$router.currentRoute.query.type,o=this.$router.currentRoute.query.template;o&&("system"==r&&(this.form=ne[o],this.form.entityId=t),"temp"==r&&this.$ajax.get("/generate/meta_field/"+o).then(function(t){return e.$common.checkResult(t.data)}).then(function(r){e.form=r.data,e.form.entityId=t}).catch(function(t){return e.$common.showNotifyError(t)}))}},pe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fieldAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/field"}}},[e._v("字段管理\n    ")]),e._v(" "),r("el-breadcrumb-item",[e._v("添加")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"java字段名",prop:"jfieldName"}},[r("help-popover",{attrs:{name:"field.jfieldName"}},[r("el-input",{attrs:{placeholder:"java字段名，例如：age"},model:{value:e.form.jfieldName,callback:function(t){e.$set(e.form,"jfieldName",t)},expression:"form.jfieldName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"mysql字段名",prop:"fieldName"}},[r("help-popover",{attrs:{name:"field.fieldName"}},[r("el-input",{attrs:{placeholder:"mysql字段名，例如：age"},model:{value:e.form.fieldName,callback:function(t){e.$set(e.form,"fieldName",t)},expression:"form.fieldName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段描述",prop:"fieldDesc"}},[r("help-popover",{attrs:{name:"field.fieldDesc"}},[r("el-input",{attrs:{placeholder:"字段描述，例如：年龄"},model:{value:e.form.fieldDesc,callback:function(t){e.$set(e.form,"fieldDesc",t)},expression:"form.fieldDesc"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"java字段类型",prop:"jfieldType"}},[r("help-popover",{attrs:{name:"field.jfieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.jfieldType,callback:function(t){e.$set(e.form,"jfieldType",t)},expression:"form.jfieldType"}},e._l(e.jfieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"mysql字段类型",prop:"fieldType"}},[r("help-popover",{attrs:{name:"field.fieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.fieldType,callback:function(t){e.$set(e.form,"fieldType",t)},expression:"form.fieldType"}},e._l(e.fieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段长度",prop:"fieldLength"}},[r("help-popover",{attrs:{name:"field.fieldLength"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"字段长度，例如：10"},model:{value:e.form.fieldLength,callback:function(t){e.$set(e.form,"fieldLength",t)},expression:"form.fieldLength"}})],1)],1),e._v(" "),e.fieldScaleVisible?r("el-form-item",{attrs:{label:"字段精度",prop:"fieldScale"}},[r("help-popover",{attrs:{name:"field.fieldScale"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"字段精度，例如：2"},model:{value:e.form.fieldScale,callback:function(t){e.$set(e.form,"fieldScale",t)},expression:"form.fieldScale"}})],1)],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"是否主键",prop:"primaryKey"}},[r("help-popover",{attrs:{name:"field.primaryKey"}},[r("el-radio-group",{model:{value:e.form.primaryKey,callback:function(t){e.$set(e.form,"primaryKey",t)},expression:"form.primaryKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否自增",prop:"autoIncrement"}},[r("help-popover",{attrs:{name:"field.autoIncrement"}},[r("el-radio-group",{attrs:{disabled:e.autoIncrementDisabled},model:{value:e.form.autoIncrement,callback:function(t){e.$set(e.form,"autoIncrement",t)},expression:"form.autoIncrement"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"不能为空",prop:"notNull"}},[r("help-popover",{attrs:{name:"field.notNull"}},[r("el-radio-group",{attrs:{disabled:e.notNullDisabled},model:{value:e.form.notNull,callback:function(t){e.$set(e.form,"notNull",t)},expression:"form.notNull"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否外键",prop:"foreignKey"}},[r("help-popover",{attrs:{name:"field.foreignKey"}},[r("el-radio-group",{model:{value:e.form.foreignKey,callback:function(t){e.$set(e.form,"foreignKey",t)},expression:"form.foreignKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"外键字段"}},[r("help-popover",{attrs:{name:"field.foreignField"}},[r("el-cascader",{attrs:{disabled:e.foreignFieldDisabled,placeholder:"请选择",options:e.entityFieldOptions},on:{"active-item-change":e.handleForeignEntityChange},model:{value:e.foreignField,callback:function(t){e.foreignField=t},expression:"foreignField"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"特殊字段类型",prop:"specialField"}},[r("help-popover",{attrs:{name:"field.specialField"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.specialFieldDisabled,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.specialField,callback:function(t){e.$set(e.form,"specialField",t)},expression:"form.specialField"}},e._l(e.specialFieldOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段示例",prop:"fieldExample"}},[r("help-popover",{attrs:{name:"field.fieldExample"}},[r("el-input",{attrs:{placeholder:"字段示例，例如年龄字段：21"},model:{value:e.form.fieldExample,callback:function(t){e.$set(e.form,"fieldExample",t)},expression:"form.fieldExample"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段备注",prop:"fieldComment"}},[r("help-popover",{attrs:{name:"field.fieldComment"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"字段备注，例如：年龄【整型】"},model:{value:e.form.fieldComment,callback:function(t){e.$set(e.form,"fieldComment",t)},expression:"form.fieldComment"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举字典",prop:"dicType"}},[r("help-popover",{attrs:{name:"field.dicType"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{disabled:e.dicTypeDisabled,"fetch-suggestions":e.queryDicType,placeholder:"请输入枚举字典"},model:{value:e.form.dicType,callback:function(t){e.$set(e.form,"dicType",t)},expression:"form.dicType"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否查询字段",prop:"query"}},[r("help-popover",{attrs:{name:"field.query"}},[r("el-radio-group",{model:{value:e.form.query,callback:function(t){e.$set(e.form,"query",t)},expression:"form.query"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"查询方式",prop:"queryType"}},[r("help-popover",{attrs:{name:"field.queryType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.queryTypeDisabled,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.queryType,callback:function(t){e.$set(e.form,"queryType",t)},expression:"form.queryType"}},e._l(e.queryTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否新增字段",prop:"insert"}},[r("help-popover",{attrs:{name:"field.insert"}},[r("el-radio-group",{model:{value:e.form.insert,callback:function(t){e.$set(e.form,"insert",t)},expression:"form.insert"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否编辑字段",prop:"update"}},[r("help-popover",{attrs:{name:"field.update"}},[r("el-radio-group",{model:{value:e.form.update,callback:function(t){e.$set(e.form,"update",t)},expression:"form.update"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否列表字段",prop:"list"}},[r("help-popover",{attrs:{name:"field.list"}},[r("el-radio-group",{model:{value:e.form.list,callback:function(t){e.$set(e.form,"list",t)},expression:"form.list"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否支持排序",prop:"listSort"}},[r("help-popover",{attrs:{name:"field.listSort"}},[r("el-radio-group",{model:{value:e.form.listSort,callback:function(t){e.$set(e.form,"listSort",t)},expression:"form.listSort"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否详情字段",prop:"show"}},[r("help-popover",{attrs:{name:"field.show"}},[r("el-radio-group",{model:{value:e.form.show,callback:function(t){e.$set(e.form,"show",t)},expression:"form.show"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"排序号",prop:"orderNo"}},[r("help-popover",{attrs:{name:"field.orderNo"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var fe=r("VU/8")(me,pe,!1,function(e){r("F1zG")},null,null).exports,he={fieldId:null,entityId:null,jfieldName:"",fieldName:"",fieldDesc:"",jfieldType:"",fieldType:"",fieldLength:0,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:0,foreignKey:0,foreignEntityId:null,foreignFieldId:null,specialField:"",fieldExample:"",fieldComment:"",dicType:"",query:0,queryType:null,insert:1,update:1,list:1,listSort:0,show:1,editType:null,orderNo:1},ve={name:"fieldEdit",props:["projectId","entityId","fieldId"],data:function(){return{boolOptions:I.boolOptions,fieldTypeOptions:I.fieldTypeOptions,jfieldTypeOptions:I.jfieldTypeOptions,queryTypeOptions:I.queryTypeOptions,specialFieldOptions:I.specialFieldOptions,entityFieldOptions:[],constList:null,notNullDisabled:!1,autoIncrementDisabled:!0,queryTypeDisabled:!0,specialFieldDisabled:!1,foreignField:[0,0],foreignFieldDisabled:!0,old:N()({},he),form:N()({},he),rules:{jfieldName:[{required:!0,message:"请输入java字段名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],fieldName:[{required:!0,message:"请输入mysql字段名",trigger:"blur"},{max:64,message:"长度不能超过64个字符",trigger:"blur"}],fieldDesc:[{required:!0,message:"请输入字段描述",trigger:"blur"},{max:40,message:"长度不能超过40个字符",trigger:"blur"}],jfieldType:[{required:!0,type:"string",message:"请选择java字段类型",trigger:"change"}],fieldType:[{required:!0,type:"string",message:"请选择mysql字段类型",trigger:"change"}],fieldLength:[{required:!0,message:"请输入字段长度",trigger:"blur"}],fieldScale:[{required:!0,message:"请输入字段精度",trigger:"blur"}],primaryKey:[{required:!0,type:"number",message:"请选择是否主键",trigger:"change"}],autoIncrement:[{required:!0,type:"number",message:"请选择是否自增",trigger:"change"}],notNull:[{required:!0,type:"number",message:"请选择不能为空",trigger:"change"}],foreignKey:[{required:!0,type:"number",message:"请选择是否外键",trigger:"change"}],fieldExample:[{required:!0,message:"请输入字段示例",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],fieldComment:[{required:!0,message:"请输入字段备注",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],dicType:[{max:40,message:"长度不能超过40个字符",trigger:"blur"}],query:[{required:!0,type:"number",message:"请选择是否查询字段",trigger:"change"}],insert:[{required:!0,type:"number",message:"请选择是否新增字段",trigger:"change"}],update:[{required:!0,type:"number",message:"请选择是否编辑字段",trigger:"change"}],list:[{required:!0,type:"number",message:"请选择是否列表字段",trigger:"change"}],listSort:[{required:!0,type:"number",message:"请选择是否支持排序",trigger:"change"}],show:[{required:!0,type:"number",message:"请选择是否详情字段",trigger:"change"}],orderNo:[{required:!0,message:"请输入排序号",trigger:"blur"}]}}},computed:{dicTypeDisabled:function(){return!(1!=this.form.primaryKey&&!this.form.specialField)},fieldScaleVisible:function(){return I.showFieldScale(this.form.fieldType)}},watch:{"form.primaryKey":function(e){1==e?(this.form.notNull=1,this.notNullDisabled=!0,this.form.specialField="",this.specialFieldDisabled=!0,this.autoIncrementDisabled=!1):(this.notNullDisabled=!1,this.specialFieldDisabled=!1,this.form.autoIncrement=0,this.autoIncrementDisabled=!0)},"form.foreignKey":function(e){this.foreignFieldDisabled=1!=e},"form.query":function(e){1==e?this.queryTypeDisabled=!1:(this.queryTypeDisabled=!0,this.queryType="")},dicTypeDisabled:function(e){e&&(this.form.dicType="")}},methods:{initForeignEntityOptions:function(){var e=this;return this.$common.getEntityOptions(this.projectId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.entityFieldOptions=t.data.entities.map(function(e){return{value:e.entityId,label:e.title,children:[]}})})},handleForeignEntityChange:function(e){var t=this,r=e[0],o=this.entityFieldOptions.find(function(e){return e.value==r});if(!o.children.length)return this.$common.getFieldOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return o.children=e.data.filter(function(e){return 1==e.primaryKey}).map(function(e){return{value:e.fieldId,label:e.fieldDesc}})})},queryDicType:function(e,t){var r=this,o=function(){var r=this.constList.slice(0);r.push.apply(r,de()(I.defaultConstList));var o=e?r.filter(function(t){return 0===t.constName.toLowerCase().indexOf(e.toLowerCase())}):r;t(o.map(function(e){return{value:e.constName}}))}.bind(this);this.constList?o():this.$common.getConstOptions(this.projectId).then(function(e){return r.$common.checkResult(e.data)}).then(function(e){r.constList=e.data.entities,o()})},getField:function(){var e=this;return this.$ajax.get("/generate/meta_field/"+this.fieldId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in he)this.form[e]=this.old[e]},submit:function(){var e=this;I.showFieldScale(this.form.fieldType)||(this.form.fieldScale=null),this.form.foreignEntityId=this.foreignField[0],this.form.foreignFieldId=this.foreignField[1];var t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/generate/meta_field/update",e.$common.removeBlankField(e.form))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/field")}},created:function(){var e=this;z.a.all([this.getField(),this.initForeignEntityOptions()]).then(function(){return e.reset()}).then(function(){return e.handleForeignEntityChange([e.form.foreignEntityId])}).then(function(){e.foreignField=[e.form.foreignEntityId,e.form.foreignFieldId]})}},be={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fieldEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/field"}}},[e._v("字段管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("编辑")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"java字段名",prop:"jfieldName"}},[r("help-popover",{attrs:{name:"field.jfieldName"}},[r("el-input",{attrs:{placeholder:"java字段名，例如：age"},model:{value:e.form.jfieldName,callback:function(t){e.$set(e.form,"jfieldName",t)},expression:"form.jfieldName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"mysql字段名",prop:"fieldName"}},[r("help-popover",{attrs:{name:"field.fieldName"}},[r("el-input",{attrs:{placeholder:"mysql字段名，例如：age"},model:{value:e.form.fieldName,callback:function(t){e.$set(e.form,"fieldName",t)},expression:"form.fieldName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段描述",prop:"fieldDesc"}},[r("help-popover",{attrs:{name:"field.fieldDesc"}},[r("el-input",{attrs:{placeholder:"字段描述，例如：年龄"},model:{value:e.form.fieldDesc,callback:function(t){e.$set(e.form,"fieldDesc",t)},expression:"form.fieldDesc"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"java字段类型",prop:"jfieldType"}},[r("help-popover",{attrs:{name:"field.jfieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.jfieldType,callback:function(t){e.$set(e.form,"jfieldType",t)},expression:"form.jfieldType"}},e._l(e.jfieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"mysql字段类型",prop:"fieldType"}},[r("help-popover",{attrs:{name:"field.fieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.fieldType,callback:function(t){e.$set(e.form,"fieldType",t)},expression:"form.fieldType"}},e._l(e.fieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段长度",prop:"fieldLength"}},[r("help-popover",{attrs:{name:"field.fieldLength"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"字段长度，例如：10"},model:{value:e.form.fieldLength,callback:function(t){e.$set(e.form,"fieldLength",t)},expression:"form.fieldLength"}})],1)],1),e._v(" "),e.fieldScaleVisible?r("el-form-item",{attrs:{label:"字段精度",prop:"fieldScale"}},[r("help-popover",{attrs:{name:"field.fieldScale"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,placeholder:"字段精度，例如：2"},model:{value:e.form.fieldScale,callback:function(t){e.$set(e.form,"fieldScale",t)},expression:"form.fieldScale"}})],1)],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"是否主键",prop:"primaryKey"}},[r("help-popover",{attrs:{name:"field.primaryKey"}},[r("el-radio-group",{model:{value:e.form.primaryKey,callback:function(t){e.$set(e.form,"primaryKey",t)},expression:"form.primaryKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否自增",prop:"autoIncrement"}},[r("help-popover",{attrs:{name:"field.autoIncrement"}},[r("el-radio-group",{attrs:{disabled:e.autoIncrementDisabled},model:{value:e.form.autoIncrement,callback:function(t){e.$set(e.form,"autoIncrement",t)},expression:"form.autoIncrement"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"不能为空",prop:"notNull"}},[r("help-popover",{attrs:{name:"field.notNull"}},[r("el-radio-group",{attrs:{disabled:e.notNullDisabled},model:{value:e.form.notNull,callback:function(t){e.$set(e.form,"notNull",t)},expression:"form.notNull"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否外键",prop:"foreignKey"}},[r("help-popover",{attrs:{name:"field.foreignKey"}},[r("el-radio-group",{model:{value:e.form.foreignKey,callback:function(t){e.$set(e.form,"foreignKey",t)},expression:"form.foreignKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"外键字段"}},[r("help-popover",{attrs:{name:"field.foreignField"}},[r("el-cascader",{attrs:{disabled:e.foreignFieldDisabled,placeholder:"请选择",options:e.entityFieldOptions},on:{"active-item-change":e.handleForeignEntityChange},model:{value:e.foreignField,callback:function(t){e.foreignField=t},expression:"foreignField"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"特殊字段类型",prop:"specialField"}},[r("help-popover",{attrs:{name:"field.specialField"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.specialFieldDisabled,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.specialField,callback:function(t){e.$set(e.form,"specialField",t)},expression:"form.specialField"}},e._l(e.specialFieldOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段示例",prop:"fieldExample"}},[r("help-popover",{attrs:{name:"field.fieldExample"}},[r("el-input",{attrs:{placeholder:"字段示例，例如年龄字段：21"},model:{value:e.form.fieldExample,callback:function(t){e.$set(e.form,"fieldExample",t)},expression:"form.fieldExample"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段备注",prop:"fieldComment"}},[r("help-popover",{attrs:{name:"field.fieldComment"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"字段备注，例如：年龄【整型】"},model:{value:e.form.fieldComment,callback:function(t){e.$set(e.form,"fieldComment",t)},expression:"form.fieldComment"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举字典",prop:"dicType"}},[r("help-popover",{attrs:{name:"field.dicType"}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{disabled:e.dicTypeDisabled,"fetch-suggestions":e.queryDicType,placeholder:"请输入枚举字典"},model:{value:e.form.dicType,callback:function(t){e.$set(e.form,"dicType",t)},expression:"form.dicType"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否查询字段",prop:"query"}},[r("help-popover",{attrs:{name:"field.query"}},[r("el-radio-group",{model:{value:e.form.query,callback:function(t){e.$set(e.form,"query",t)},expression:"form.query"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"查询方式",prop:"queryType"}},[r("help-popover",{attrs:{name:"field.queryType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.queryTypeDisabled,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.queryType,callback:function(t){e.$set(e.form,"queryType",t)},expression:"form.queryType"}},e._l(e.queryTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否新增字段",prop:"insert"}},[r("help-popover",{attrs:{name:"field.insert"}},[r("el-radio-group",{model:{value:e.form.insert,callback:function(t){e.$set(e.form,"insert",t)},expression:"form.insert"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否编辑字段",prop:"update"}},[r("help-popover",{attrs:{name:"field.update"}},[r("el-radio-group",{model:{value:e.form.update,callback:function(t){e.$set(e.form,"update",t)},expression:"form.update"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否列表字段",prop:"list"}},[r("help-popover",{attrs:{name:"field.list"}},[r("el-radio-group",{model:{value:e.form.list,callback:function(t){e.$set(e.form,"list",t)},expression:"form.list"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否支持排序",prop:"listSort"}},[r("help-popover",{attrs:{name:"field.listSort"}},[r("el-radio-group",{model:{value:e.form.listSort,callback:function(t){e.$set(e.form,"listSort",t)},expression:"form.listSort"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否详情字段",prop:"show"}},[r("help-popover",{attrs:{name:"field.show"}},[r("el-radio-group",{model:{value:e.form.show,callback:function(t){e.$set(e.form,"show",t)},expression:"form.show"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"排序号",prop:"orderNo"}},[r("help-popover",{attrs:{name:"field.orderNo"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var ye=r("VU/8")(ve,be,!1,function(e){r("QHvO")},null,null).exports,ge={fieldId:null,entityId:null,jfieldName:"",fieldName:"",fieldDesc:"",jfieldType:"",fieldType:"",fieldLength:0,fieldScale:0,primaryKey:0,autoIncrement:0,defaultValue:"",notNull:0,foreignKey:0,foreignEntityId:null,foreignFieldId:null,specialField:"",fieldExample:"",fieldComment:"",dicType:"",query:0,queryType:null,insert:1,update:1,list:1,listSort:0,show:1,editType:null,orderNo:1},_e={name:"fieldShow",props:["projectId","entityId","fieldId"],data:function(){return{boolOptions:I.boolOptions,fieldTypeOptions:I.fieldTypeOptions,jfieldTypeOptions:I.jfieldTypeOptions,queryTypeOptions:I.queryTypeOptions,specialFieldOptions:I.specialFieldOptions,entityFieldOptions:[],foreignField:[0,0],form:N()({},ge)}},computed:{fieldScaleVisible:function(){return I.showFieldScale(this.form.fieldType)}},methods:{initForeignEntityOptions:function(){var e=this;return this.$common.getEntityOptions(this.projectId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.entityFieldOptions=t.data.entities.map(function(e){return{value:e.entityId,label:e.title,children:[]}})})},handleForeignEntityChange:function(e){var t=this,r=e[0],o=this.entityFieldOptions.find(function(e){return e.value==r});if(!o.children.length)return this.$common.getFieldOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return o.children=e.data.filter(function(e){return 1==e.primaryKey}).map(function(e){return{value:e.fieldId,label:e.fieldDesc}})})},getField:function(){var e=this;return this.$ajax.get("/generate/meta_field/"+this.fieldId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.form=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/field")}},created:function(){var e=this;z.a.all([this.getField(),this.initForeignEntityOptions()]).then(function(){return e.handleForeignEntityChange([e.form.foreignEntityId])}).then(function(){e.foreignField=[e.form.foreignEntityId,e.form.foreignFieldId]})}},je={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"fieldShow"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/field"}}},[e._v("字段管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查看")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"showForm",staticClass:"showForm",attrs:{model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"java字段名",prop:"jfieldName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.jfieldName,callback:function(t){e.$set(e.form,"jfieldName",t)},expression:"form.jfieldName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"mysql字段名",prop:"fieldName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.fieldName,callback:function(t){e.$set(e.form,"fieldName",t)},expression:"form.fieldName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"字段描述",prop:"fieldDesc"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.fieldDesc,callback:function(t){e.$set(e.form,"fieldDesc",t)},expression:"form.fieldDesc"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"java字段类型",prop:"jfieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0,filterable:""},model:{value:e.form.jfieldType,callback:function(t){e.$set(e.form,"jfieldType",t)},expression:"form.jfieldType"}},e._l(e.jfieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"mysql字段类型",prop:"fieldType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0,filterable:""},model:{value:e.form.fieldType,callback:function(t){e.$set(e.form,"fieldType",t)},expression:"form.fieldType"}},e._l(e.fieldTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"字段长度",prop:"fieldLength"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!0,min:0},model:{value:e.form.fieldLength,callback:function(t){e.$set(e.form,"fieldLength",t)},expression:"form.fieldLength"}})],1),e._v(" "),e.fieldScaleVisible?r("el-form-item",{attrs:{label:"字段精度",prop:"fieldScale"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!0,min:0},model:{value:e.form.fieldScale,callback:function(t){e.$set(e.form,"fieldScale",t)},expression:"form.fieldScale"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"是否主键",prop:"primaryKey"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.primaryKey,callback:function(t){e.$set(e.form,"primaryKey",t)},expression:"form.primaryKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否自增",prop:"autoIncrement"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.autoIncrement,callback:function(t){e.$set(e.form,"autoIncrement",t)},expression:"form.autoIncrement"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"不能为空",prop:"notNull"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.notNull,callback:function(t){e.$set(e.form,"notNull",t)},expression:"form.notNull"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否外键",prop:"foreignKey"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.foreignKey,callback:function(t){e.$set(e.form,"foreignKey",t)},expression:"form.foreignKey"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"外键字段"}},[r("el-cascader",{attrs:{disabled:!0,placeholder:"请选择",options:e.entityFieldOptions},on:{"active-item-change":e.handleForeignEntityChange},model:{value:e.foreignField,callback:function(t){e.foreignField=t},expression:"foreignField"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"特殊字段类型",prop:"specialField"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0,filterable:""},model:{value:e.form.specialField,callback:function(t){e.$set(e.form,"specialField",t)},expression:"form.specialField"}},e._l(e.specialFieldOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"字段示例",prop:"fieldExample"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.fieldExample,callback:function(t){e.$set(e.form,"fieldExample",t)},expression:"form.fieldExample"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"字段备注",prop:"fieldComment"}},[r("el-input",{attrs:{disabled:!0,type:"textarea",rows:2},model:{value:e.form.fieldComment,callback:function(t){e.$set(e.form,"fieldComment",t)},expression:"form.fieldComment"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举字典",prop:"dicType"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.form.dicType,callback:function(t){e.$set(e.form,"dicType",t)},expression:"form.dicType"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否查询字段",prop:"query"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.query,callback:function(t){e.$set(e.form,"query",t)},expression:"form.query"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"查询方式",prop:"queryType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0,filterable:""},model:{value:e.form.queryType,callback:function(t){e.$set(e.form,"queryType",t)},expression:"form.queryType"}},e._l(e.queryTypeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否新增字段",prop:"insert"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.insert,callback:function(t){e.$set(e.form,"insert",t)},expression:"form.insert"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否编辑字段",prop:"update"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.update,callback:function(t){e.$set(e.form,"update",t)},expression:"form.update"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否列表字段",prop:"list"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.list,callback:function(t){e.$set(e.form,"list",t)},expression:"form.list"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否支持排序",prop:"listSort"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.listSort,callback:function(t){e.$set(e.form,"listSort",t)},expression:"form.listSort"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否详情字段",prop:"show"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.show,callback:function(t){e.$set(e.form,"show",t)},expression:"form.show"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"排序号",prop:"orderNo"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{disabled:!0,min:1},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Ie=r("VU/8")(_e,je,!1,function(e){r("tKKT")},null,null).exports,ke={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:"constList"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]},xe=r("VU/8")(null,ke,!1,null,null,null).exports,$e={name:"constList",props:["projectId"],data:function(){return{query:{projectId:null},queryForm:{projectId:null},projectList:[],activeNum:0,selectItems:[],page:{pageNo:1,entityCount:0,pageSize:20,entities:[]},loading:!1}},filters:{optionLabel:function(e,t){var r=I[t],o=!0,n=!1,l=void 0;try{for(var a,i=oe()(r);!(o=(a=i.next()).done);o=!0){var s=a.value;if(s.value==e)return s.label}}catch(e){n=!0,l=e}finally{try{!o&&i.return&&i.return()}finally{if(n)throw l}}return null}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择枚举"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/generate/meta_const/deleteBatch",e.selectItems.map(function(e){return e.constId}))}).then(function(){return e.doQuery()})},sizeChange:function(e){this.page.pageSize=e,this.doQuery()},currentChange:function(e){this.page.pageNo=e,this.doQuery()},queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},handleQuery:function(){this.query=N()({},this.queryForm),this.query.projectId!=parseInt(this.projectId)&&this.$router.push("/project/"+this.query.projectId+"/const"),this.doQuery()},doQuery:function(){var e=this;if(this.query.projectId){var t=N()({},this.query,{pageNo:this.page.pageNo,pageSize:this.page.pageSize});this.loading=!0,this.$ajax.get("/generate/meta_const/list",{params:t}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.page=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){return e.loading=!1})}},handleAdd:function(){this.$router.push("/project/"+this.projectId+"/const/add")},handleConstDetail:function(e){this.$router.push("/project/"+this.projectId+"/const/"+e.constId+"/constDetail")},handleEdit:function(e){this.$router.push("/project/"+this.projectId+"/const/edit/"+e.constId)},handleShow:function(e){this.$router.push("/project/"+this.projectId+"/const/show/"+e.constId)}},activated:function(){var e=this;this.queryProject().then(function(){e.queryForm.projectId=parseInt(e.projectId),e.query.projectId=e.queryForm.projectId}).then(function(){return e.doQuery()})}},we={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("枚举管理")])],1),e._v(" "),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:6}},[e._v("\n      已选择"+e._s(e.activeNum)+"个枚举\n    ")]),e._v(" "),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"请选择项目"},on:{change:e.handleQuery},model:{value:e.queryForm.projectId,callback:function(t){e.$set(e.queryForm,"projectId",t)},expression:"queryForm.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.page.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{property:"constRemark",label:"枚举名称"}}),e._v(" "),r("el-table-column",{attrs:{property:"constName",label:"枚举类名"}}),e._v(" "),r("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("optionLabel")(t.row.constType,"constTypeOptions"))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleShow(t.row)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleConstDetail(t.row)}}},[e._v("枚举值管理")])]}}])})],1),e._v(" "),r("el-row",{staticStyle:{padding:"20px 0"},attrs:{type:"flex",justify:"end"}},[r("el-pagination",{attrs:{"current-page":e.page.pageNo,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"sizes, prev, pager, next",total:e.page.entityCount},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var Ne=r("VU/8")($e,we,!1,function(e){r("dRNg")},null,null).exports,qe={name:"constAdd",props:["projectId"],data:function(){return{constTypeOptions:I.constTypeOptions,projectList:[],form:{projectId:null,title:"",className:"",tableName:"",desc:"",commonCall:!0},rules:{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],constRemark:[{required:!0,message:"请输入枚举名称",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],constName:[{required:!0,message:"请输入枚举类名",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],constType:[{required:!0,type:"number",message:"请选择类型",trigger:"change"}]}}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/generate/meta_const/save",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/const")}},created:function(){var e=this;this.queryProject().then(function(){return e.form.projectId=parseInt(e.projectId)})}},Fe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("添加")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"const.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举名称",prop:"constRemark"}},[r("help-popover",{attrs:{name:"const.constRemark"}},[r("el-input",{attrs:{placeholder:"例如：性别"},model:{value:e.form.constRemark,callback:function(t){e.$set(e.form,"constRemark",t)},expression:"form.constRemark"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举类名",prop:"constName"}},[r("help-popover",{attrs:{name:"const.constName"}},[r("el-input",{attrs:{placeholder:"例如：Sex"},model:{value:e.form.constName,callback:function(t){e.$set(e.form,"constName",t)},expression:"form.constName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"类型",prop:"constType"}},[r("help-popover",{attrs:{name:"const.constType"}},[r("el-radio-group",{model:{value:e.form.constType,callback:function(t){e.$set(e.form,"constType",t)},expression:"form.constType"}},e._l(e.constTypeOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Te=r("VU/8")(qe,Fe,!1,function(e){r("M2RA")},null,null).exports,Se={constId:null,projectId:null,constRemark:"",constName:"",constType:""},Ee={name:"constEdit",props:["projectId","constId"],data:function(){return{constTypeOptions:I.constTypeOptions,projectList:[],old:N()({},Se),form:N()({},Se),rules:{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],constRemark:[{required:!0,message:"请输入枚举名称",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}],constName:[{required:!0,message:"请输入枚举类名",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],constType:[{required:!0,type:"number",message:"请选择类型",trigger:"change"}]}}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},getConst:function(){var e=this;return this.$ajax.get("/generate/meta_const/"+this.constId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Se)this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/generate/meta_const/update",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/const")}},created:function(){var e=this;z.a.all([this.getConst(),this.queryProject()]).then(function(){return e.reset()})}},Oe={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("编辑")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"const.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举名称",prop:"constRemark"}},[r("help-popover",{attrs:{name:"const.constRemark"}},[r("el-input",{attrs:{placeholder:"例如：性别"},model:{value:e.form.constRemark,callback:function(t){e.$set(e.form,"constRemark",t)},expression:"form.constRemark"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举类名",prop:"constName"}},[r("help-popover",{attrs:{name:"const.constName"}},[r("el-input",{attrs:{placeholder:"例如：Sex"},model:{value:e.form.constName,callback:function(t){e.$set(e.form,"constName",t)},expression:"form.constName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"类型",prop:"constType"}},[r("help-popover",{attrs:{name:"const.constType"}},[r("el-radio-group",{model:{value:e.form.constType,callback:function(t){e.$set(e.form,"constType",t)},expression:"form.constType"}},e._l(e.constTypeOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Ce=r("VU/8")(Ee,Oe,!1,function(e){r("VoAC")},null,null).exports,Re={constId:null,projectId:null,constRemark:"",constName:"",constType:""},De={name:"constShow",props:["projectId","constId"],data:function(){return{constTypeOptions:I.constTypeOptions,form:N()({},Re)}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},getConst:function(){var e=this;return this.$ajax.get("/generate/meta_const/"+this.constId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.form=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},goBack:function(){this.$router.push("/project/"+this.projectId+"/const")}},created:function(){var e=this;this.queryProject().then(function(){return e.getConst()})}},Le={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constShow"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查看")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"showForm",staticClass:"showForm",attrs:{model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举名称",prop:"constRemark"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.constRemark,callback:function(t){e.$set(e.form,"constRemark",t)},expression:"form.constRemark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举类名",prop:"constName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.constName,callback:function(t){e.$set(e.form,"constName",t)},expression:"form.constName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"类型",prop:"constType"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.constType,callback:function(t){e.$set(e.form,"constType",t)},expression:"form.constType"}},e._l(e.constTypeOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Ve=r("VU/8")(De,Le,!1,function(e){r("2ah0")},null,null).exports,Pe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:"constDetailList"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]},Be=r("VU/8")(null,Pe,!1,null,null,null).exports,Ue={name:"constDetailList",props:["projectId","constId"],data:function(){return{query:{projectId:null,constId:null},queryForm:{projectConstOptions:[],projectConst:[0,0]},activeNum:0,selectItems:[],entities:[],loading:!1}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择枚举值"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/generate/meta_const_detail/deleteBatch",e.selectItems.map(function(e){return e.constDetailId}))}).then(function(){return e.doQuery()})},initProjectOptions:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.queryForm.projectConstOptions=t.data.map(function(e){return{value:e.projectId,label:e.projectName,children:[]}})})},handleProjectChange:function(e){var t=this,r=e[0],o=this.queryForm.projectConstOptions.find(function(e){return e.value==r});if(!o.children.length)return this.$common.getConstOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return o.children=e.data.entities.map(function(e){return{value:e.constId,label:e.constRemark}})})},handleQuery:function(){null!=this.queryForm.projectConst[1]?(this.query.projectId=this.queryForm.projectConst[0],this.query.constId=this.queryForm.projectConst[1],this.query.constId!=parseInt(this.constId)&&this.$router.push("/project/"+this.query.projectId+"/const/"+this.query.constId+"/constDetail"),this.doQuery()):this.$common.showNotifyError("请选择常量")},doQuery:function(){var e=this;this.query.projectId&&this.query.constId&&(this.loading=!0,this.$ajax.get("/generate/meta_const_detail/list",{params:this.query}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.entities=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){return e.loading=!1}))},handleAdd:function(){this.$router.push("/project/"+this.projectId+"/const/"+this.constId+"/constDetail/add")},handleEdit:function(e){this.$router.push("/project/"+this.projectId+"/const/"+this.constId+"/constDetail/edit/"+e.constDetailId)},handleShow:function(e){this.$router.push("/project/"+this.projectId+"/const/"+this.constId+"/constDetail/show/"+e.constDetailId)}},activated:function(){var e=this,t=parseInt(this.projectId),r=parseInt(this.constId);this.queryForm.projectConst[0]=t,this.queryForm.projectConst[1]=r,this.query.projectId=t,this.query.constId=r,this.initProjectOptions().then(function(){return e.handleProjectChange([t])}).then(function(){return e.doQuery()})}},Me={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constDetailList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("枚举值管理")])],1),e._v(" "),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:4}},[e._v("\n      已选择"+e._s(e.activeNum)+"个枚举值\n    ")]),e._v(" "),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-cascader",{attrs:{placeholder:"请选择枚举",options:e.queryForm.projectConstOptions},on:{"active-item-change":e.handleProjectChange,change:e.handleQuery},model:{value:e.queryForm.projectConst,callback:function(t){e.$set(e.queryForm,"projectConst",t)},expression:"queryForm.projectConst"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{property:"detailName",label:"枚举字段名"}}),e._v(" "),r("el-table-column",{attrs:{property:"detailValue",label:"枚举值"}}),e._v(" "),r("el-table-column",{attrs:{property:"detailRemark",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleShow(t.row)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")])]}}])})],1)],1)},staticRenderFns:[]};var Ae=r("VU/8")(Ue,Me,!1,function(e){r("1r4E")},null,null).exports,Ke={name:"constDetailAdd",props:["projectId","constId"],data:function(){return{form:{constId:null,detailName:"",detailValue:"",detailRemark:""},rules:{detailName:[{required:!0,message:"请输入枚举字段名",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],detailValue:[{required:!0,message:"请输入枚举值",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],detailRemark:[{required:!0,message:"请输入备注",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}]}}},methods:{submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/generate/meta_const_detail/save",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/const/"+this.constId+"/constDetail")}},created:function(){this.form.constId=parseInt(this.constId)}},ze={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constDetailAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const/"+this.constId+"/constDetail"}}},[e._v("枚举值管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("添加")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"枚举字段名",prop:"detailName"}},[r("help-popover",{attrs:{name:"constDetail.detailName"}},[r("el-input",{attrs:{placeholder:"枚举字段名，例如：WOMAN"},model:{value:e.form.detailName,callback:function(t){e.$set(e.form,"detailName",t)},expression:"form.detailName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举值",prop:"detailValue"}},[r("help-popover",{attrs:{name:"constDetail.detailValue"}},[r("el-input",{attrs:{placeholder:"枚举值，例如：2"},model:{value:e.form.detailValue,callback:function(t){e.$set(e.form,"detailValue",t)},expression:"form.detailValue"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"detailRemark"}},[r("help-popover",{attrs:{name:"constDetail.detailRemark"}},[r("el-input",{attrs:{placeholder:"备注，例如：女"},model:{value:e.form.detailRemark,callback:function(t){e.$set(e.form,"detailRemark",t)},expression:"form.detailRemark"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Qe=r("VU/8")(Ke,ze,!1,function(e){r("RSSb")},null,null).exports,Ge={constDetailId:null,constId:null,detailName:"",detailValue:"",detailRemark:""},He={name:"constDetailEdit",props:["projectId","constId","constDetailId"],data:function(){return{old:N()({},Ge),form:N()({},Ge),rules:{detailName:[{required:!0,message:"请输入枚举字段名",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],detailValue:[{required:!0,message:"请输入枚举值",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],detailRemark:[{required:!0,message:"请输入备注",trigger:"blur"},{max:100,message:"长度不能超过100个字符",trigger:"blur"}]}}},methods:{getConstDetail:function(){var e=this;return this.$ajax.get("/generate/meta_const_detail/"+this.constDetailId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Ge)this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/generate/meta_const_detail/update",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/const/"+this.constId+"/constDetail")}},created:function(){var e=this;this.getConstDetail().then(function(){return e.reset()})}},Je={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constDetailEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const/"+this.constId+"/constDetail"}}},[e._v("枚举值管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("编辑")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"枚举字段名",prop:"detailName"}},[r("help-popover",{attrs:{name:"constDetail.detailName"}},[r("el-input",{attrs:{placeholder:"枚举字段名，例如：WOMAN"},model:{value:e.form.detailName,callback:function(t){e.$set(e.form,"detailName",t)},expression:"form.detailName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举值",prop:"detailValue"}},[r("help-popover",{attrs:{name:"constDetail.detailValue"}},[r("el-input",{attrs:{placeholder:"枚举值，例如：2"},model:{value:e.form.detailValue,callback:function(t){e.$set(e.form,"detailValue",t)},expression:"form.detailValue"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"detailRemark"}},[r("help-popover",{attrs:{name:"constDetail.detailRemark"}},[r("el-input",{attrs:{placeholder:"备注，例如：女"},model:{value:e.form.detailRemark,callback:function(t){e.$set(e.form,"detailRemark",t)},expression:"form.detailRemark"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var We=r("VU/8")(He,Je,!1,function(e){r("7HQV")},null,null).exports,Xe={constDetailId:null,constId:null,detailName:"",detailValue:"",detailRemark:""},Ye={name:"constDetailShow",props:["projectId","entityId","constDetailId"],data:function(){return{form:N()({},Xe)}},methods:{getConstDetail:function(){var e=this;return this.$ajax.get("/generate/meta_const_detail/"+this.constDetailId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.form=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},goBack:function(){this.$router.push("/project/"+this.projectId+"/const/"+this.constId+"/constDetail")}},created:function(){this.getConstDetail()}},Ze={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"constDetailShow"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const"}}},[e._v("枚举管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/const/"+this.constId+"/constDetail"}}},[e._v("枚举值管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查看")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"showForm",staticClass:"showForm",attrs:{model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"枚举字段名",prop:"detailName"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.detailName,callback:function(t){e.$set(e.form,"detailName",t)},expression:"form.detailName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"枚举值",prop:"detailValue"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.detailValue,callback:function(t){e.$set(e.form,"detailValue",t)},expression:"form.detailValue"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"detailRemark"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.detailRemark,callback:function(t){e.$set(e.form,"detailRemark",t)},expression:"form.detailRemark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var et=r("VU/8")(Ye,Ze,!1,function(e){r("eX8z")},null,null).exports,tt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:"mtmList"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]},rt=r("VU/8")(null,tt,!1,null,null,null).exports,ot={name:"mtmList",props:["projectId"],data:function(){return{query:{projectId:null},queryForm:{projectId:null},projectList:[],entityList:[],activeNum:0,selectItems:[],entities:[],loading:!1}},filters:{renderEntity:function(e,t){var r=t.find(function(t){return t.entityId==e});return r?r.title:e}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择多对多"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/generate/meta_mtm/deleteBatch",e.selectItems.map(function(e){return e.mtmId}))}).then(function(){return e.doQuery()})},queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},queryEntity:function(e){var t=this;return this.$common.getEntityOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return t.entityList=e.data.entities})},handleQuery:function(){var e=this;this.query=N()({},this.queryForm),this.query.projectId!=parseInt(this.projectId)&&this.$router.push("/project/"+this.query.projectId+"/mtm"),this.queryEntity(this.queryForm.projectId).then(function(){return e.doQuery()})},doQuery:function(){var e=this;this.query.projectId&&(this.loading=!0,this.$ajax.get("/generate/meta_mtm/list",{params:this.query}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.entities=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){return e.loading=!1}))},handleAdd:function(){this.$router.push("/project/"+this.projectId+"/mtm/add")},handleEdit:function(e){this.$router.push("/project/"+this.projectId+"/mtm/edit/"+e.mtmId)},handleShow:function(e){this.$router.push("/project/"+this.projectId+"/mtm/show/"+e.mtmId)}},activated:function(){var e=this;this.queryForm.projectId=parseInt(this.projectId),this.query.projectId=this.queryForm.projectId,this.queryProject(),this.queryEntity(this.queryForm.projectId).then(function(){return e.doQuery()})}},nt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mtmList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("多对多管理")])],1),e._v(" "),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:6}},[e._v("\n      已选择"+e._s(e.activeNum)+"个多对多\n    ")]),e._v(" "),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"请选择项目"},on:{change:e.handleQuery},model:{value:e.queryForm.projectId,callback:function(t){e.$set(e.queryForm,"projectId",t)},expression:"queryForm.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{property:"tableName",label:"关联表名"}}),e._v(" "),r("el-table-column",{attrs:{label:"实体1"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("renderEntity")(t.row.entityId1,e.entityList))+"\n        "),1==t.row.holdRefer1?r("icon",{staticClass:"color-warning",attrs:{name:"heart"}}):r("icon",{staticClass:"color-warning",attrs:{name:"heart-o"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"实体2"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("renderEntity")(t.row.entityId2,e.entityList))+"\n        "),1==t.row.holdRefer2?r("icon",{staticClass:"color-warning",attrs:{name:"heart"}}):r("icon",{staticClass:"color-warning",attrs:{name:"heart-o"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{property:"desc",label:"描述"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleShow(t.row)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")])]}}])})],1)],1)},staticRenderFns:[]};var lt=r("VU/8")(ot,nt,!1,function(e){r("lWrl")},null,null).exports,at={name:"mtmAdd",props:["projectId"],data:function(){return{boolOptions:I.boolOptions,projectList:[],entityList:[],form:{projectId:null,tableName:"",desc:"",entityId1:null,entityId2:null,holdRefer1:1,holdRefer2:1},rules:{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],tableName:[{required:!0,message:"请输入关联表名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],desc:[{max:250,message:"长度不能超过250个字符",trigger:"blur"}],entityId1:[{required:!0,type:"number",message:"请选择实体1",trigger:"change"}],entityId2:[{required:!0,type:"number",message:"请选择实体2",trigger:"change"}],holdRefer1:[{required:!0,type:"number",message:"请选择实体1持有引用",trigger:"change"}],holdRefer2:[{required:!0,type:"number",message:"请选择实体2持有引用",trigger:"change"}]}}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},queryEntity:function(e){var t=this;return this.$common.getEntityOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return t.entityList=e.data.entities})},submit:function(){var e=this,t=null;this.$refs.addForm.validate().then(function(){return t=e.$loading(),e.$ajax.post("/generate/meta_mtm/save",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/mtm")}},created:function(){var e=this;this.form.projectId=parseInt(this.projectId),this.queryProject().then(function(){return e.queryEntity(e.form.projectId)})}},it={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mtmAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/mtm"}}},[e._v("多对多管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("添加")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"mtm.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"关联表名",prop:"tableName"}},[r("help-popover",{attrs:{name:"mtm.tableName"}},[r("el-input",{attrs:{placeholder:"例如：r_user_role"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("help-popover",{attrs:{name:"mtm.desc"}},[r("el-input",{attrs:{placeholder:"例如：用户角色关联表",type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体1",prop:"entityId1"}},[r("help-popover",{attrs:{name:"mtm.entityId1"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择实体1"},model:{value:e.form.entityId1,callback:function(t){e.$set(e.form,"entityId1",t)},expression:"form.entityId1"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体2",prop:"entityId2"}},[r("help-popover",{attrs:{name:"mtm.entityId2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择实体2"},model:{value:e.form.entityId2,callback:function(t){e.$set(e.form,"entityId2",t)},expression:"form.entityId2"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体1持有引用",prop:"holdRefer1"}},[r("help-popover",{attrs:{name:"mtm.holdRefer1"}},[r("el-radio-group",{model:{value:e.form.holdRefer1,callback:function(t){e.$set(e.form,"holdRefer1",t)},expression:"form.holdRefer1"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体2持有引用",prop:"holdRefer2"}},[r("help-popover",{attrs:{name:"mtm.holdRefer2"}},[r("el-radio-group",{model:{value:e.form.holdRefer2,callback:function(t){e.$set(e.form,"holdRefer2",t)},expression:"form.holdRefer2"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var st=r("VU/8")(at,it,!1,function(e){r("Uqzk")},null,null).exports,ct={mtmId:null,projectId:null,tableName:"",desc:"",entityId1:null,entityId2:null,holdRefer1:1,holdRefer2:1},ut={name:"mtmEdit",props:["projectId","mtmId"],data:function(){return{boolOptions:I.boolOptions,projectList:[],entityList:[],old:N()({},ct),form:N()({},ct),rules:{projectId:[{required:!0,type:"number",message:"请选择项目",trigger:"change"}],tableName:[{required:!0,message:"请输入关联表名",trigger:"blur"},{max:50,message:"长度不能超过50个字符",trigger:"blur"}],desc:[{max:250,message:"长度不能超过250个字符",trigger:"blur"}],entityId1:[{required:!0,type:"number",message:"请选择实体1",trigger:"change"}],entityId2:[{required:!0,type:"number",message:"请选择实体2",trigger:"change"}],holdRefer1:[{required:!0,type:"number",message:"请选择实体1持有引用",trigger:"change"}],holdRefer2:[{required:!0,type:"number",message:"请选择实体2持有引用",trigger:"change"}]}}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},queryEntity:function(e){var t=this;return this.$common.getEntityOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return t.entityList=e.data.entities})},getMtm:function(){var e=this;return this.$ajax.get("/generate/meta_mtm/"+this.mtmId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.old=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in ct)this.form[e]=this.old[e]},submit:function(){var e=this,t=null;this.$refs.editForm.validate().then(function(){return t=e.$loading(),e.$ajax.put("/generate/meta_mtm/update",e.form)}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){t&&t.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/mtm")}},created:function(){var e=this;z.a.all([this.getMtm(),this.queryProject(),this.queryEntity(this.projectId)]).then(function(){return e.reset()})}},dt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mtmEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/mtm"}}},[e._v("多对多管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("编辑")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("help-popover",{attrs:{name:"mtm.projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择项目",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"关联表名",prop:"tableName"}},[r("help-popover",{attrs:{name:"mtm.tableName"}},[r("el-input",{attrs:{placeholder:"例如：r_user_role"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("help-popover",{attrs:{name:"mtm.desc"}},[r("el-input",{attrs:{placeholder:"例如：用户角色关联表",type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体1",prop:"entityId1"}},[r("help-popover",{attrs:{name:"mtm.entityId1"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择实体1"},model:{value:e.form.entityId1,callback:function(t){e.$set(e.form,"entityId1",t)},expression:"form.entityId1"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体2",prop:"entityId2"}},[r("help-popover",{attrs:{name:"mtm.entityId2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择实体2"},model:{value:e.form.entityId2,callback:function(t){e.$set(e.form,"entityId2",t)},expression:"form.entityId2"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体1持有引用",prop:"holdRefer1"}},[r("help-popover",{attrs:{name:"mtm.holdRefer1"}},[r("el-radio-group",{model:{value:e.form.holdRefer1,callback:function(t){e.$set(e.form,"holdRefer1",t)},expression:"form.holdRefer1"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"实体2持有引用",prop:"holdRefer2"}},[r("help-popover",{attrs:{name:"mtm.holdRefer2"}},[r("el-radio-group",{model:{value:e.form.holdRefer2,callback:function(t){e.$set(e.form,"holdRefer2",t)},expression:"form.holdRefer2"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var mt=r("VU/8")(ut,dt,!1,function(e){r("1vbG")},null,null).exports,pt={mtmId:null,projectId:null,tableName:"",desc:"",entityId1:null,entityId2:null,holdRefer1:1,holdRefer2:1},ft={name:"mtmShow",props:["projectId","mtmId"],data:function(){return{boolOptions:I.boolOptions,projectList:[],entityList:[],form:N()({},pt)}},methods:{queryProject:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.projectList=t.data})},queryEntity:function(e){var t=this;return this.$common.getEntityOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return t.entityList=e.data.entities})},getMtm:function(){var e=this;return this.$ajax.get("/generate/meta_mtm/"+this.mtmId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.form=t.data}).catch(function(t){return e.$common.showNotifyError(t)})},goBack:function(){this.$router.push("/project/"+this.projectId+"/mtm")}},created:function(){this.queryProject(),this.queryEntity(this.projectId),this.getMtm()}},ht={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mtmShow"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/mtm"}}},[e._v("多对多管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查看")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"showForm",staticClass:"showForm",attrs:{model:e.form,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"项目",prop:"projectId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",disabled:!0},model:{value:e.form.projectId,callback:function(t){e.$set(e.form,"projectId",t)},expression:"form.projectId"}},e._l(e.projectList,function(e){return r("el-option",{key:e.projectId,attrs:{label:e.projectName,value:e.projectId}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"关联表名",prop:"tableName"}},[r("el-input",{attrs:{disabled:!0,placeholder:"例如：r_user_role"},model:{value:e.form.tableName,callback:function(t){e.$set(e.form,"tableName",t)},expression:"form.tableName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"desc"}},[r("el-input",{attrs:{disabled:!0,placeholder:"例如：用户角色关联表",type:"textarea",rows:2},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"实体1",prop:"entityId1"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0,filterable:"",placeholder:"请选择实体1"},model:{value:e.form.entityId1,callback:function(t){e.$set(e.form,"entityId1",t)},expression:"form.entityId1"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"实体2",prop:"entityId2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0,filterable:"",placeholder:"请选择实体2"},model:{value:e.form.entityId2,callback:function(t){e.$set(e.form,"entityId2",t)},expression:"form.entityId2"}},e._l(e.entityList,function(e){return r("el-option",{key:e.entityId,attrs:{label:e.title,value:e.entityId}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"实体1持有引用",prop:"holdRefer1"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.holdRefer1,callback:function(t){e.$set(e.form,"holdRefer1",t)},expression:"form.holdRefer1"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n            ")])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"实体2持有引用",prop:"holdRefer2"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.holdRefer2,callback:function(t){e.$set(e.form,"holdRefer2",t)},expression:"form.holdRefer2"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n            ")])}))],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var vt=r("VU/8")(ft,ht,!1,function(e){r("LiaM")},null,null).exports,bt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:"indexList"}},[t("router-view")],1)],1)],1)},staticRenderFns:[]},yt=r("VU/8")(null,bt,!1,null,null,null).exports,gt={name:"indexList",props:["projectId","entityId"],data:function(){return{query:{projectId:null,entityId:null},queryForm:{projectEntityOptions:[],projectEntity:[0,0]},activeNum:0,selectItems:[],entities:[],loading:!1}},filters:{renderFields:function(e){return e?e.map(function(e){return e.fieldName}).join(","):""}},methods:{selectionChange:function(e){this.selectItems=e,this.activeNum=this.selectItems.length},handleDel:function(){var e=this;this.activeNum<=0?this.$common.showMsg("warning","请选择索引"):this.$common.confirm("是否确认删除").then(function(){return e.$ajax.put("/generate/meta_index/deleteBatch",e.selectItems.map(function(e){return e.indexId}))}).then(function(){return e.doQuery()})},initProjectOptions:function(){var e=this;return this.$common.getProjectOptions().then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.queryForm.projectEntityOptions=t.data.map(function(e){return{value:e.projectId,label:e.projectName,children:[]}})})},handleProjectChange:function(e){var t=this,r=e[0],o=this.queryForm.projectEntityOptions.find(function(e){return e.value==r});if(!o.children.length)return this.$common.getEntityOptions(r).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return o.children=e.data.entities.map(function(e){return{value:e.entityId,label:e.title}})})},handleQuery:function(){null!=this.queryForm.projectEntity[1]?(this.query.projectId=this.queryForm.projectEntity[0],this.query.entityId=this.queryForm.projectEntity[1],this.query.entityId!=parseInt(this.entityId)&&this.$router.push("/project/"+this.query.projectId+"/entity/"+this.query.entityId+"/index"),this.doQuery()):this.$common.showNotifyError("请选择实体")},doQuery:function(){var e=this;this.query.projectId&&this.query.entityId&&(this.loading=!0,this.$ajax.get("/generate/meta_index/list",{params:this.query}).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){return e.entities=t.data}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){return e.loading=!1}))},handleAdd:function(){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/index/add")},handleEdit:function(e){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/index/edit/"+e.indexId)},handleShow:function(e){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/index/show/"+e.indexId)}},activated:function(){var e=this,t=parseInt(this.projectId),r=parseInt(this.entityId);this.queryForm.projectEntity[0]=t,this.queryForm.projectEntity[1]=r,this.query.projectId=t,this.query.entityId=r,this.initProjectOptions().then(function(){return e.handleProjectChange([t])}).then(function(){return e.doQuery()})}},_t={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"indexList"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("索引管理")])],1),e._v(" "),r("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{staticClass:"activeNum",attrs:{span:6}},[e._v("\n      已选择"+e._s(e.activeNum)+"个索引\n    ")]),e._v(" "),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryForm}},[r("el-form-item",[r("el-cascader",{attrs:{placeholder:"请选择实体",options:e.queryForm.projectEntityOptions},on:{"active-item-change":e.handleProjectChange,change:e.handleQuery},model:{value:e.queryForm.projectEntity,callback:function(t){e.$set(e.queryForm,"projectEntity",t)},expression:"queryForm.projectEntity"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"success"},nativeOn:{click:function(t){return e.handleAdd(t)}}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{type:"danger"},nativeOn:{click:function(t){return e.handleDel(t)}}},[e._v("删除")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.entities},on:{"selection-change":e.selectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{property:"indexName",label:"索引名",width:"200px"}}),e._v(" "),r("el-table-column",{attrs:{label:"是否唯一",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.unique?r("icon",{staticClass:"color-success",attrs:{name:"check"}}):e._e(),e._v(" "),1!=t.row.unique?r("icon",{staticClass:"color-danger",attrs:{name:"close"}}):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"字段"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("renderFields")(t.row.fields))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleShow(t.row)}}},[e._v("查看")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.handleEdit(t.row)}}},[e._v("编辑")])]}}])})],1)],1)},staticRenderFns:[]};var jt=r("VU/8")(gt,_t,!1,function(e){r("q7wQ")},null,null).exports,It={name:"indexAdd",props:["projectId","entityId"],data:function(){return{boolOptions:I.boolOptions,fieldList:[],form:{entityId:null,indexName:"",unique:0,fieldIds:[]},rules:{indexName:[{required:!0,message:"请输入索引名",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],unique:[{required:!0,type:"number",message:"请选择是否唯一",trigger:"change"}],fieldIds:[{required:!0,type:"array",message:"请选择字段",trigger:"change"}]}}},methods:{queryField:function(e){var t=this;return this.$common.getFieldOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return t.fieldList=e.data})},submit:function(){var e=this,t=N()({},this.form);t.fieldIds=this.form.fieldIds.join(",");var r=null;this.$refs.addForm.validate().then(function(){return r=e.$loading(),e.$ajax.post("/generate/meta_index/save",e.$common.removeBlankField(t))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","添加成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){r&&r.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/index")}},created:function(){this.form.entityId=parseInt(this.entityId),this.queryField(this.form.entityId)}},kt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"indexAdd"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/index"}}},[e._v("索引管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("添加")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"addForm",staticClass:"addForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"索引名",prop:"indexName"}},[r("help-popover",{attrs:{name:"index.indexName"}},[r("el-input",{attrs:{placeholder:"索引名，例如：IDX_ORDER_1"},model:{value:e.form.indexName,callback:function(t){e.$set(e.form,"indexName",t)},expression:"form.indexName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段",prop:"fieldIds"}},[r("help-popover",{attrs:{name:"index.fieldIds"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.fieldIds,callback:function(t){e.$set(e.form,"fieldIds",t)},expression:"form.fieldIds"}},e._l(e.fieldList,function(e){return r("el-option",{key:e.fieldId,attrs:{label:e.fieldName,value:e.fieldId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否唯一",prop:"unique"}},[r("help-popover",{attrs:{name:"index.unique"}},[r("el-radio-group",{model:{value:e.form.unique,callback:function(t){e.$set(e.form,"unique",t)},expression:"form.unique"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var xt=r("VU/8")(It,kt,!1,function(e){r("of5s")},null,null).exports,$t={indexId:null,indexName:"",entityId:null,unique:0,fieldIds:[]},wt={name:"indexEdit",props:["projectId","entityId","indexId"],data:function(){return{boolOptions:I.boolOptions,fieldList:[],old:N()({},$t),form:N()({},$t),rules:{indexName:[{required:!0,message:"请输入索引名",trigger:"blur"},{max:20,message:"长度不能超过20个字符",trigger:"blur"}],unique:[{required:!0,type:"number",message:"请选择是否唯一",trigger:"change"}],fieldIds:[{required:!0,type:"array",message:"请选择字段",trigger:"change"}]}}},methods:{queryField:function(e){var t=this;return this.$common.getFieldOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return t.fieldList=e.data})},getIndex:function(){var e=this;return this.$ajax.get("/generate/meta_index/"+this.indexId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){var r=N()({},t.data);r.fieldIds=r.fields.map(function(e){return e.fieldId}),r.fields=null,e.old=r}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in $t)this.form[e]=this.old[e]},submit:function(){var e=this,t=N()({},this.form);t.fieldIds=this.form.fieldIds.join(",");var r=null;this.$refs.editForm.validate().then(function(){return r=e.$loading(),e.$ajax.put("/generate/meta_index/update",e.$common.removeBlankField(t))}).then(function(t){return e.$common.checkResult(t.data)}).then(function(){e.$common.showMsg("success","修改成功"),e.goBack()}).catch(function(t){return e.$common.showNotifyError(t)}).finally(function(){r&&r.close()})},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/index")}},created:function(){var e=this;z.a.all([this.getIndex(),this.queryField(this.entityId)]).then(function(){return e.reset()})}},Nt={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"indexEdit"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/index"}}},[e._v("索引管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("编辑")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"editForm",staticClass:"editForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"索引名",prop:"indexName"}},[r("help-popover",{attrs:{name:"index.indexName"}},[r("el-input",{attrs:{placeholder:"索引名，例如：IDX_ORDER_1"},model:{value:e.form.indexName,callback:function(t){e.$set(e.form,"indexName",t)},expression:"form.indexName"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"字段",prop:"fieldIds"}},[r("help-popover",{attrs:{name:"index.fieldIds"}},[r("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.fieldIds,callback:function(t){e.$set(e.form,"fieldIds",t)},expression:"form.fieldIds"}},e._l(e.fieldList,function(e){return r("el-option",{key:e.fieldId,attrs:{label:e.fieldName,value:e.fieldId}})}))],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否唯一",prop:"unique"}},[r("help-popover",{attrs:{name:"index.unique"}},[r("el-radio-group",{model:{value:e.form.unique,callback:function(t){e.$set(e.form,"unique",t)},expression:"form.unique"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n              ")])}))],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var qt=r("VU/8")(wt,Nt,!1,function(e){r("inYR")},null,null).exports,Ft={indexId:null,indexName:"",entityId:null,unique:0,fieldIds:[]},Tt={name:"indexShow",props:["projectId","entityId","indexId"],data:function(){return{boolOptions:I.boolOptions,fieldList:[],form:N()({},Ft)}},methods:{queryField:function(e){var t=this;return this.$common.getFieldOptions(e).then(function(e){return t.$common.checkResult(e.data)}).then(function(e){return t.fieldList=e.data})},getIndex:function(){var e=this;return this.$ajax.get("/generate/meta_index/"+this.indexId).then(function(t){return e.$common.checkResult(t.data)}).then(function(t){var r=N()({},t.data);r.fieldIds=r.fields.map(function(e){return e.fieldId}),r.fields=null,e.old=r}).catch(function(t){return e.$common.showNotifyError(t)})},reset:function(){for(var e in Ft)this.form[e]=this.old[e]},goBack:function(){this.$router.push("/project/"+this.projectId+"/entity/"+this.entityId+"/index")}},created:function(){var e=this;z.a.all([this.getIndex(),this.queryField(this.entityId)]).then(function(){return e.reset()})}},St={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"indexShow"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/project"}}},[e._v("项目管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity"}}},[e._v("实体管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/project/"+this.projectId+"/entity/"+this.entityId+"/index"}}},[e._v("索引管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查看")])],1),e._v(" "),r("el-row",{attrs:{type:"flex",align:"middle",gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form",{ref:"showForm",staticClass:"showForm",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"索引名",prop:"indexName"}},[r("el-input",{attrs:{disabled:!0,placeholder:"索引名，例如：IDX_ORDER_1"},model:{value:e.form.indexName,callback:function(t){e.$set(e.form,"indexName",t)},expression:"form.indexName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"字段",prop:"fieldIds"}},[r("el-select",{attrs:{disabled:!0,multiple:"",placeholder:"请选择"},model:{value:e.form.fieldIds,callback:function(t){e.$set(e.form,"fieldIds",t)},expression:"form.fieldIds"}},e._l(e.fieldList,function(e){return r("el-option",{key:e.fieldId,attrs:{label:e.fieldName,value:e.fieldId}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"是否唯一",prop:"unique"}},[r("el-radio-group",{attrs:{disabled:!0},model:{value:e.form.unique,callback:function(t){e.$set(e.form,"unique",t)},expression:"form.unique"}},e._l(e.boolOptions,function(t){return r("el-radio",{key:t.value,attrs:{border:"",label:t.value}},[e._v(e._s(t.label)+"\n            ")])}))],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var Et=r("VU/8")(Tt,St,!1,function(e){r("EGTM")},null,null).exports;o.default.use(s.a);var Ot=new s.a({routes:[{path:"",component:v},{path:"/project",component:y,children:[{path:"",component:j},{path:"add",component:$},{path:"edit/:projectId",component:S,props:!0},{path:"show/:projectId",component:R,props:!0}]},{path:"/project/:projectId/entity",component:L,props:!0,children:[{path:"",component:B,props:!0},{path:"add",component:A,props:!0},{path:"edit/:entityId",component:J,props:!0},{path:"show/:entityId",component:Z,props:!0}]},{path:"/project/:projectId/entity/:entityId/field",component:te,props:!0,children:[{path:"",component:ce,props:!0},{path:"add",component:fe,props:!0},{path:"edit/:fieldId",component:ye,props:!0},{path:"show/:fieldId",component:Ie,props:!0}]},{path:"/project/:projectId/const",component:xe,props:!0,children:[{path:"",component:Ne,props:!0},{path:"add",component:Te,props:!0},{path:"edit/:constId",component:Ce,props:!0},{path:"show/:constId",component:Ve,props:!0}]},{path:"/project/:projectId/const/:constId/constDetail",component:Be,props:!0,children:[{path:"",component:Ae,props:!0},{path:"add",component:Qe,props:!0},{path:"edit/:constDetailId",component:We,props:!0},{path:"show/:constDetailId",component:et,props:!0}]},{path:"/project/:projectId/mtm",component:rt,props:!0,children:[{path:"",component:lt,props:!0},{path:"add",component:st,props:!0},{path:"edit/:mtmId",component:mt,props:!0},{path:"show/:mtmId",component:vt,props:!0}]},{path:"/project/:projectId/entity/:entityId/index",component:yt,props:!0,children:[{path:"",component:jt,props:!0},{path:"add",component:xt,props:!0},{path:"edit/:indexId",component:qt,props:!0},{path:"show/:indexId",component:Et,props:!0}]}],scrollBehavior:function(e,t,r){return{x:0,y:0}}}),Ct=r("pFYg"),Rt=r.n(Ct),Dt=r("mtWM"),Lt=r.n(Dt).a.create({baseURL:"",timeout:6e4,responseType:"json",headers:{"Content-Type":"application/json; charset=utf-8"}}),Vt={install:function(e,t){e.prototype.$ajax=Lt,e.prototype.$common={BASE_API_URL:"",getProjectOptions:function(){return Lt.get("/generate/meta_project/list")},getEntityOptions:function(e){return Lt.get("/generate/meta_entity/list",{params:{projectId:e,pageSize:1e3,pageNo:1}})},getFieldOptions:function(e){return Lt.get("/generate/meta_field/list",{params:{entityId:e}})},getConstOptions:function(e){return Lt.get("/generate/meta_const/list",{params:{projectId:e,pageSize:1e3,pageNo:1}})},confirm:function(t){return e.prototype.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})},showNotify:function(t,r,o){return e.prototype.$notify({title:r,type:t,message:o})},showNotifyError:function(e){if(!1===e)return this.showNotify("error","出错了","表单校验失败");if("string"==typeof e&&e.constructor==String)return this.showNotify("error","出错了",e);if("object"==(void 0===e?"undefined":Rt()(e))){if(e.constructor==Error){if(e.response&&500==e.response.status)return this.showNotify("error","出错了","系统内部错误");if(e.message)return this.showNotify("error","出错了",e.message)}if(e.code&&"0"!=e.code)return this.showNotify("error","出错了",e.message)}return this.showNotify("error","出错了","")},showMsg:function(t,r){e.prototype.$message({message:r,type:t})},checkResult:function(e){return new z.a(function(t,r){return e?"0"===e.code?t(e):r(e.message):r()})},removeBlankField:function(e){var t={};for(var r in e)if("string"==typeof e[r]){var o=e[r].trim();if(""==o)continue;t[r]=o}else t[r]=e[r];return t}}}},Pt=(r("SysY"),r("D/PP"),r("D4uH")),Bt=r("W3Iv"),Ut=r.n(Bt),Mt=r("d7EF"),At=r.n(Mt),Kt={project:{projectName:"\n**项目名称**：整个项目的唯一标识\n> 注意：只允许输入英文小写字母 “a-z”或短横杠 “-”\n    ",packageName:"\n**包名**：生成的核心代码所属包路径\n> 注意：请遵循开发规范，尽量只输入英文小写字母 “a-z”及路径分隔符 “.”\n    ",author:"\n**作者**：生成的代码中会注明作者，此外并无其他用途\n    ",remote:"\n**启用Git仓库**：启用以后，可以将代码同步到git仓库，可以方便实现代码增量变更\n    ",remoteUrl:"\n**Git仓库地址**：远程Git仓库地址，可以是github、码云、gitlab私有仓库等\n> 注意：最好是一个空库，否则出现意外情况概不负责。\n    ",username:"\n**Git用户名**：请填写一个有代码提交权限的用户\n    ",password:"\n**Git密码**：密码不会回显，如果不想修改密码请置空\n    "},entity:{projectId:"\n**项目**：本实体所属项目\n    ",title:"\n**实体名**：本实体的中文名称，会出现在多处代码及表结构的注释中\n> 注意：请尽量使用言简意赅的名称\n    ",className:"\n**类名**：生成的java bean名称，比如输入类名User,会生成的bean有:UserPO、UserAddDTO、UserDAO等\n> 注意：第一个字母请大写\n    ",tableName:"\n**表名**：生成的业务表名称\n> 注意：请按mysql表名规范来命名，尽量使用下划线来分隔单词\n    ",pageSign:"\n**分页**：生成的查询服务返回结果是否需要分页展示\n    ",desc:"\n**描述**：会出现在建表语句的备注中\n    "},field:{jfieldName:"\n**java字段名**：Java类中的字段名称\n> 注意：请遵循Java字段命名规范\n    ",fieldName:"\n**mysql字段名**：业务表中的字段名称\n> 注意：请遵循mysql字段命名规范，尽量使用下划线来分隔单词\n    ",fieldDesc:"\n**字段描述**：本字段的中文描述\n> 主要是给你自己看的，对于生成的代码来说没什么影响:grin::grin::grin:\n    ",jfieldType:"\n**java字段类型**：这个简单，应该不需要我解释 :sweat_smile:\n    ",fieldType:"\n**mysql字段类型**：这些常用类型的应该够了吧，如果不能满足你，请联系我\n> 注意：请跟Java字段类型保持接近，当然你不按常理出牌，我也不能怎么滴 :pig:\n    ",fieldLength:"\n**字段长度**：字段长度限制。\n\n**作用**：\n1. 首先会影响表结构里面的字段长度\n2. 新增和修改服务也会对DTO中的参数进行长度校验\n    ",fieldScale:"\n**字段精度**：只会影响表结构中的字段精度\n    ",primaryKey:"\n**是否主键**：标识当前字段是否业务表中的主键字段\n> 注意：一个实体必须有且只有一个主键\n    ",autoIncrement:"\n**是否自增**：主键的生成策略\n    ",notNull:"\n**不能为空**：是否非空字段\n    ",foreignKey:'\n**是否外键**：本字段是否跟其他实体的主键字段关联，可以用来实现“一对一”、“一对多”关联\n> 注意：这里的外键只是个概念，并不会在表里生成物理外键（因为大家伙都不建议使用物理外键）\n\n**使用外键后的效果1**：新增或修改实体时会校验关联实体是否存在\n```\n@Transactional\npublic DeveloperPO save(DeveloperAddDTO developerDTO) {\n    DeveloperPO developer = DeveloperMapper.INSTANCE.fromAddDTO(developerDTO);\n    if(developer.getUserId() != null){\n        Assert.isTrue(userDAO.exist(developer.getUserId()),"用户id有误");\n    }\n    developerDAO.save(developer);\n    return developer;\n}\n\n```\n\n\n**使用外键后的效果2**：删除实体时会校验当前实体是否有被其他实体的外键引用\n```\n@Transactional\npublic int delete(Long... userIds) {\n    int count = 0;\n    for (Long userId : userIds) {\n        this.checkDeleteByDeveloper(userId);\n        count += userDAO.delete(userId);\n    }\n    return count;\n}\n```\n\n    ',foreignField:"\n**外键字段**：对应其他实体的主键，详细说明同上\n    ",specialField:"\n**特殊字段类型**：有特殊意义的字段类型\n- 逻辑删除：如果当前实体存在逻辑删除字段，那么调用删除方法的时候，只会将该字段改为1（默认值是0），而不是物理删除。\n- 创建时间：创建实体的时候，会自动对本字段设值为当前时间\n- 创建人员：记录下谁创建了本实体\n- 更新时间：修改实体的时候，会自动对本字段设值为当前时间\n- 更新人员：记录下是谁最后一次修改了本实体\n- 乐观锁版本号：如果对乐观锁的含义不了解，请自己百度一下\n    ",fieldExample:"\n**字段示例**：有两个作用\n1. 生成的swagger文档中，出入参示例来源于此\n2. 生成的单元测试中，会用字段示例作为测试参数\n> 所以请认真写一下示例！\n    ",fieldComment:"\n**字段备注**：对该字段的详细说明，有两个作用\n1. 生成的swagger文档中，出入参结构中会用到字段备注\n2. 生成的表结构中，每个字段都有备注\n> 所以请认真写一下备注，越详细越好，其他人要看！\n    ",dicType:"\n**枚举字典**：当前字段的值是否来源于枚举\n\n系统默认枚举有：\n- BoolConst：1是，0否\n    ",query:"\n**是否查询字段**：如果是查询字段，则当前字段会出现在查询参数中，当然也会出现在查询sql的where语句中。\n    ",queryType:'\n**查询方式**：决定sql的查询方式，如果是between类型，则会生成前后两个查询字段。\n```\n//注册开始时间\n@ApiModelProperty(notes = N_REGTIME,example = E_REGTIME)\n@JsonFormat(pattern=JsonFieldConst.DEFAULT_DATETIME_FORMAT,timezone="GMT+8")\nprivate Date regTimeStart;\n\n//注册结束时间\n@ApiModelProperty(notes = N_REGTIME,example = E_REGTIME)\n@JsonFormat(pattern=JsonFieldConst.DEFAULT_DATETIME_FORMAT,timezone="GMT+8")\nprivate Date regTimeEnd;\n\n```\n    ',insert:"\n**是否新增字段**：如果是新增字段，则会出现在新增服务的外部入参中，\n否则就是需要在save方法中设置默认值。\n> 注意：如果是非新增字段，同时又非空。那生成的初始代码直接跑单元测试肯定会报错的。\n    ",update:"\n**是否编辑字段**：如果是编辑字段，则会出现在修改服务的外部入参中，\n否则代表该字段不允许用户编辑。比如某些状态字段，可以设置成非编辑字段。\n    ",list:"\n**是否列表字段**：如果是列表字段，则会出现在列表查询服务的返回结果中。\n    ",listSort:'\n**是否支持排序**：如果支持排序，则会在列表查询入参中加入排序字段，前端就可以自由指定如何排序。\n```\n@ApiModelProperty(notes = "发布标识排序标识【1升序,-1降序,0不排序】",example = "1")\nprivate Integer publishSignSortSign;\n```\n    ',show:"\n**是否详情字段**：如果是详情字段，则会出现查看详情服务的返回结果中\n    ",orderNo:"\n**排序号**：只影响当前字段在实体中的先后顺序，将功能接近的字段放在一起，会比较美观。\n> 强迫症忍不了 :rage:\n    "},const:{projectId:"\n**项目**：当前枚举所属项目\n    ",constRemark:"\n**枚举名称**：枚举的中文名称\n    ",constName:"\n**枚举类名**：Java枚举类的类名，请一定要符合类名规范。\n    ",constType:"\n**类型**：指定下属枚举值的字段类型\n    "},constDetail:{detailName:"\n**枚举字段名**：Java枚举类中的字段名称，请符合Java字段命名规范\n    ",detailValue:"\n**枚举值**：枚举字段的值，如果枚举类型是整数，这里就请老老实实输入数字。\n    ",detailRemark:'\n**备注**：枚举的中文描述，对应枚举类中desc属性的值\n#### 生成的枚举类会包含两个属性，请看下面示例：\n```\n/**\n * Title: 枚举【开发者类型】\n * Description: \n * Project: optimize\n * Author: cbb\n * Create Time: 2018-03-09 17:51\n */\npublic enum DevType {\n\n    PERSONAL(1,"个人"),\n    COMPANY(2,"公司");\n\n    private final Integer value;\n    private final String desc;\n\n    private static final Map<Integer, DevType> lookup = new HashMap<>();\n\n    static {\n        for (DevType e : DevType.values()) {\n            lookup.put(e.value, e);\n        }\n    }\n    \n    ......\n}\n```\n\n    '},mtm:{projectId:"\n**项目**：当前多对多所属项目\n    ",tableName:"\n**关联表名**：由于一个多对多关系会生成一张关联表，此处填写该关联表表名。\n    ",desc:"\n**描述**：用于生成关联表的备注信息\n    ",entityId1:"\n**实体1**：多对多的其中一方\n    ",entityId2:"\n**实体2**：多对多的另一方\n    ",holdRefer1:"\n**实体1持有引用**：持有引用的一方可以主动维护多对多关联关系，包括添加、删除关联等操作\n    ",holdRefer2:"\n**实体2持有引用**：持有引用的一方可以主动维护多对多关联关系，包括添加、删除关联等操作\n    "},index:{indexName:"\n**索引名**：生成数据库索引的名称\n    ",fieldIds:"\n**字段**：生成索引的表字段\n    ",unique:"\n**是否唯一**：唯一索引可以从数据库层面限制字段唯一性\n> 注意：如果实体同时添加了唯一索引和逻辑删除字段，则需要特别注意，请自己想办法解决删除后无法重复添加的问题\n    "},fieldListHelp:"\n**快速复制字段攻略**\n> 注意：离开“实体管理”页面，复制的内容会清空！\n\n![image]({copyField})\n\n\n"},zt=new u.a.Converter({emoji:"true"}),Qt={name:"help-popover",props:["name","pic"],data:function(){var e=Kt;if(this.name.split(".").forEach(function(t){return e=e[t]}),this.pic){var t=!0,r=!1,o=void 0;try{for(var n,l=oe()(Ut()(this.pic));!(t=(n=l.next()).done);t=!0){var a=n.value,i=At()(a,2),s=i[0],c=i[1];e=e.replace("{"+s+"}",c)}}catch(e){r=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(r)throw o}}}return{markdown:zt.makeHtml(e)}}},Gt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"help-popover"},[t("el-popover",{ref:"popover",attrs:{placement:"right",width:"400",trigger:"click"}},[t("div",{staticClass:"markdown-body",domProps:{innerHTML:this._s(this.markdown)}})]),this._v(" "),t("el-col",{attrs:{span:22}},[this._t("default")],2),this._v(" "),t("el-col",{attrs:{span:2}},[t("icon",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"question-circle-o",attrs:{name:"question-circle-o"}})],1)],1)},staticRenderFns:[]};var Ht=r("VU/8")(Qt,Gt,!1,function(e){r("Uqx0")},null,null).exports;o.default.config.productionTip=!1,o.default.use(l.a),o.default.use(Vt),o.default.component("icon",Pt.a),o.default.component("help-popover",Ht),new o.default({el:"#app",router:Ot,render:function(e){return e(i)}})},Q4Wu:function(e,t){},QHvO:function(e,t){},RSSb:function(e,t){},SysY:function(e,t){},Uqx0:function(e,t){},Uqzk:function(e,t){},VoAC:function(e,t){},"asR+":function(e,t){},beal:function(e,t){},dRNg:function(e,t){},eX8z:function(e,t){},f9oQ:function(e,t){},g2YT:function(e,t){},gM1w:function(e,t){},inYR:function(e,t){},lWrl:function(e,t){},nRaw:function(e,t){},of5s:function(e,t){},pXpU:function(e,t){},q7wQ:function(e,t){},tKKT:function(e,t){},tvR6:function(e,t){},"xk7+":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2ecf1fdd90622a511387.js.map